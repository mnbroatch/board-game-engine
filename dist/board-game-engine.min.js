/*! For license information please see board-game-engine.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BoardGameEngine=t():e.BoardGameEngine=t()}(this,()=>(()=>{var e={4039(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9014);n(5878),n(1946),n(9001);t.ActivePlayers=r.ActivePlayers,Object.defineProperty(t,"GameMethod",{enumerable:!0,get:function(){return r.GameMethod}}),t.INVALID_MOVE=r.INVALID_MOVE,t.Stage=r.Stage,t.TurnOrder=r.TurnOrder,t.PlayerView={STRIP_SECRETS:e=>{let{G:t,playerID:n}=e;const r={...t};return void 0!==r.secret&&delete r.secret,r.players&&(r.players=n?{[n]:r.players[n]}:{}),r}}},1946(e,t){"use strict";class n{constructor(e){const t=function(){let e=4022871197;return function(t){const n=t.toString();for(let t=0;t<n.length;t++){e+=n.charCodeAt(t);let r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}}();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){const e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){const s=new n(e),o=s.next.bind(s);return t&&r(t,s),o.state=()=>r(s,{}),o}class o{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const e=this.state,t=s(e.prngstate?"":e.seed,e.prngstate),n=t();return this.state={...e,prngstate:t.state()},n}api(){const e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={};for(const r in t){const s=t[r];n[r]=t=>void 0===t?Math.floor(e()*s)+1:Array.from({length:t}).map(()=>Math.floor(e()*s)+1)}return{...n,Die:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,n=arguments.length>1?arguments[1]:void 0;return void 0===n?Math.floor(e()*t)+1:Array.from({length:n}).map(()=>Math.floor(e()*t)+1)},Number:()=>e(),Shuffle:t=>{const n=[...t];let r=t.length,s=0;const o=Array.from({length:r});for(;r;){const t=Math.trunc(r*e());o[s++]=n[t],n[t]=n[--r]}return o},_private:this}}}const i={name:"random",noClient:e=>{let{api:t}=e;return t._private.isUsed()},flush:e=>{let{api:t}=e;return t._private.getState()},api:e=>{let{data:t}=e;return new o(t).api()},setup:e=>{let{game:t}=e,{seed:n}=t;return void 0===n&&(n=o.seed()),{seed:n}},playerView:()=>{}};t.RandomPlugin=i,t.alea=s},9014(e,t,n){"use strict";var r=n(5878),s=n(1946);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}n(9001);var i=o(r);const a="MAKE_MOVE",c="GAME_EVENT",l="REDO",u="RESET",p="SYNC",d="UNDO",f="UPDATE",h="PATCH",v="PLUGIN",y="STRIP_TRANSIENTS",g=(e,t,n,r)=>({type:a,payload:{type:e,args:t,playerID:n,credentials:r}}),m=(e,t,n,r)=>({type:c,payload:{type:e,args:t,playerID:n,credentials:r}}),b=(e,t,n,r)=>({type:c,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),x=e=>({type:p,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),_=(e,t,n,r)=>({type:h,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),w=(e,t)=>({type:f,state:e,deltalog:t,clientOnly:!0}),P=e=>({type:u,state:e,clientOnly:!0}),O=(e,t)=>({type:d,payload:{type:null,args:null,playerID:e,credentials:t}}),k=(e,t)=>({type:l,payload:{type:null,args:null,playerID:e,credentials:t}}),M=()=>({type:y});var E=Object.freeze({__proto__:null,makeMove:g,gameEvent:m,automaticGameEvent:b,sync:x,patch:_,update:w,reset:P,undo:O,redo:k,plugin:(e,t,n,r)=>({type:v,payload:{type:e,args:t,playerID:n,credentials:r}}),stripTransients:M});const $="INVALID_MOVE",A={name:"plugin-immer",fnWrap:e=>function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];let o=!1;const a=i.default(t.G,n=>{const s=e({...t,G:n},...r);if(s!==$)return s;o=!0});return o?$:a}};var j,S;t.GameMethod=void 0,(j=t.GameMethod||(t.GameMethod={})).MOVE="MOVE",j.GAME_ON_END="GAME_ON_END",j.PHASE_ON_BEGIN="PHASE_ON_BEGIN",j.PHASE_ON_END="PHASE_ON_END",j.TURN_ON_BEGIN="TURN_ON_BEGIN",j.TURN_ON_MOVE="TURN_ON_MOVE",j.TURN_ON_END="TURN_ON_END",function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks — the turn is already ending.",e.MaxTurnEndings="Maximum number of turn endings exceeded for this update.\nThis likely means game code is triggering an infinite loop.",e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phase’s `onEnd` hook — the phase is already ending.\nIf you’re trying to dynamically choose the next phase when a phase ends, use the phase’s `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phase’s `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."}(S||(S={}));class I{constructor(e,t,n){this.flow=e,this.playerID=n,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=100*t.numPlayers}api(){var e=this;const t={_private:this};for(const n of this.flow.eventNames)t[n]=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];e.dispatch.push({type:n,args:r,phase:e.currentPhase,turn:e.currentTurn,calledFrom:e.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){const n=e,r=(e,t)=>{let{stack:r}=e;return{...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:t+"\n"+r}}}}};e:for(let n=0;n<this.dispatch.length;n++){const s=this.dispatch[n],o=s.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,S.MaxTurnEndings);if(void 0===s.calledFrom)return r(s.error,S.CalledOutsideHook);if(e.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":switch(s.calledFrom){case t.GameMethod.TURN_ON_END:case t.GameMethod.PHASE_ON_END:return r(s.error,S.StageEventInOnEnd);case t.GameMethod.PHASE_ON_BEGIN:return r(s.error,S.StageEventInPhaseBegin);case t.GameMethod.TURN_ON_BEGIN:if("setActivePlayers"===s.type)break;return r(s.error,S.StageEventInTurnBegin)}if(o)continue e;break;case"endTurn":if(s.calledFrom===t.GameMethod.TURN_ON_END||s.calledFrom===t.GameMethod.PHASE_ON_END)return r(s.error,S.EndTurnInOnEnd);if(o)continue e;break;case"endPhase":case"setPhase":if(s.calledFrom===t.GameMethod.PHASE_ON_END)return r(s.error,S.PhaseEventInOnEnd);if(s.phase!==e.ctx.phase)continue e}const i=b(s.type,s.args,this.playerID);e=this.flow.processEvent(e,i)}return e}}const C={name:"events",noClient:e=>{let{api:t}=e;return t._private.isUsed()},isInvalid:e=>{let{data:t}=e;return t.error||!1},fnWrap:(e,t)=>function(n){const r=n.events;r&&r._private.updateTurnContext(n.ctx,t);for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];const a=e(n,...o);return r&&r._private.unsetCurrentMethod(),a},dangerouslyFlushRawState:e=>{let{state:t,api:n}=e;return n._private.update(t)},api:e=>{let{game:t,ctx:n,playerID:r}=e;return new I(t.flow,n,r).api()}},T={name:"plugin-serializable",fnWrap:e=>function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e(t,...r)}};function N(e){!function(){console.error(...arguments)}("ERROR:",e)}const D=[A,s.RandomPlugin,{name:"log",flush:()=>({}),api:e=>{let{data:t}=e;return{setMetadata:e=>{t.metadata=e}}},setup:()=>({})},T],R=[...D,C],B=e=>{let{plugins:t}=e;return Object.entries(t||{}).reduce((e,t)=>{let[n,{api:r}]=t;return e[n]=r,e},{})};function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function G(e,t){let n={},r=[],s=null,o={},i={};if(Array.isArray(t)){const e={};t.forEach(t=>e[t]=z.NULL),n=e}else{if(F(t),t.next&&(s=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),void 0!==t.currentPlayer&&L(n,o,i,e.currentPlayer,t.currentPlayer),void 0!==t.others)for(let r=0;r<e.playOrder.length;r++){const s=e.playOrder[r];s!==e.currentPlayer&&L(n,o,i,s,t.others)}if(void 0!==t.all)for(let r=0;r<e.playOrder.length;r++)L(n,o,i,e.playOrder[r],t.all);if(t.value)for(const e in t.value)L(n,o,i,e,t.value[e]);if(t.minMoves)for(const e in n)void 0===o[e]&&(o[e]=t.minMoves);if(t.maxMoves)for(const e in n)void 0===i[e]&&(i[e]=t.maxMoves)}0===Object.keys(n).length&&(n=null),0===Object.keys(o).length&&(o=null),0===Object.keys(i).length&&(i=null);const a={};for(const e in n)a[e]=0;return{...e,activePlayers:n,_activePlayersMinMoves:o,_activePlayersMaxMoves:i,_activePlayersNumMoves:a,_prevActivePlayers:r,_nextActivePlayers:s}}function L(e,t,n,r,s){"object"==typeof s&&s!==z.NULL||(s={stage:s}),void 0!==s.stage&&(F(s),e[r]=s.stage,s.minMoves&&(t[r]=s.minMoves),s.maxMoves&&(n[r]=s.maxMoves))}function U(e,t){return e[t]+""}const z={NULL:null},q={ALL:{all:z.NULL},ALL_ONCE:{all:z.NULL,minMoves:1,maxMoves:1},OTHERS:{others:z.NULL},OTHERS_ONCE:{others:z.NULL,minMoves:1,maxMoves:1}};t.ActionCreators=E,t.ActivePlayers=q,t.Enhance=(e,t)=>([...R,...t.game.plugins].filter(e=>void 0!==e.api).forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}},o=n.api({G:e.G,ctx:e.ctx,data:s.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...s,api:o}}}}),e),t.FlushAndValidate=(e,t)=>{const n=((e,t)=>([...D,...t.game.plugins,C].reverse().forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}};if(n.flush){const r=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:s.api,data:s.data});e={...e,plugins:{...e.plugins,[n.name]:{data:r}}}}else if(n.dangerouslyFlushRawState){const o=(e=n.dangerouslyFlushRawState({state:e,game:t.game,api:s.api,data:s.data})).plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:o}}}}}),e))(e,t),r=((e,t)=>{const n=[...R,...t.game.plugins].filter(e=>void 0!==e.isInvalid).map(n=>{const{name:r}=n,s=e.plugins[r],o=n.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return!!o&&{plugin:r,message:o}}).find(e=>e);return n||!1})(n,t);if(!r)return[n];const{plugin:s,message:o}=r;return N(`${s} plugin declared action invalid:\n${o}`),[e,r]},t.FnWrap=(e,t,n)=>[...D,...n,C].filter(e=>void 0!==e.fnWrap).reduce((e,n)=>{let{fnWrap:r}=n;return r(e,t)},e),t.GAME_EVENT=c,t.GetAPIs=B,t.INVALID_MOVE=$,t.InitTurnOrderState=function(e,t){let{G:n,ctx:r}=e;const{numPlayers:s}=r,o={...B(e),G:n,ctx:r},i=t.order;let a=[...Array.from({length:s})].map((e,t)=>t+"");void 0!==i.playOrder&&(a=i.playOrder(o));const c=i.first(o),l=typeof c;"number"!==l&&N(`invalid value returned by turn.order.first — expected number got ${l} “${c}”.`);const u=U(a,c);return r={...r,currentPlayer:u,playOrderPos:c,playOrder:a},r=G(r,t.activePlayers||{}),r},t.MAKE_MOVE=a,t.NoClient=(e,t)=>[...R,...t.game.plugins].filter(e=>void 0!==e.noClient).map(n=>{const r=n.name,s=e.plugins[r];return!!s&&n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:s.api,data:s.data})}).includes(!0),t.PATCH=h,t.PLUGIN=v,t.PlayerView=(e,t)=>{let{G:n,ctx:r,plugins:s={}}=e,{game:o,playerID:i}=t;return[...R,...o.plugins].forEach(e=>{let{name:t,playerView:a}=e;if(!a)return;const{data:c}=s[t]||{data:{}},l=a({G:n,ctx:r,game:o,data:c,playerID:i});s={...s,[t]:{data:l}}}),s},t.ProcessAction=(e,t,n)=>(n.game.plugins.filter(e=>void 0!==e.action).filter(e=>e.name===t.payload.type).forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}},o=n.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[r]:{...s,data:o}}}}),e),t.REDO=l,t.RESET=u,t.STRIP_TRANSIENTS=y,t.SYNC=p,t.SetActivePlayers=G,t.Setup=(e,t)=>([...R,...t.game.plugins].filter(e=>void 0!==e.setup).forEach(n=>{const r=n.name,s=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:s}}}}),e),t.Stage=z,t.TurnOrder={DEFAULT:{first:e=>{let{ctx:t}=e;return 0===t.turn?t.playOrderPos:(t.playOrderPos+1)%t.playOrder.length},next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}},RESET:{first:()=>0,next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}},CONTINUE:{first:e=>{let{ctx:t}=e;return t.playOrderPos},next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}},ONCE:{first:()=>0,next:e=>{let{ctx:t}=e;if(t.playOrderPos<t.playOrder.length-1)return t.playOrderPos+1}},CUSTOM:e=>({playOrder:()=>e,first:()=>0,next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}}),CUSTOM_FROM:e=>({playOrder:t=>{let{G:n}=t;return n[e]},first:()=>0,next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}})},t.UNDO=d,t.UPDATE=f,t.UpdateActivePlayersOnceEmpty=function(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:o,_nextActivePlayers:i}=e;if(t&&0===Object.keys(t).length)if(i)e=G(e,i),({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:o}=e);else if(o.length>0){const e=o.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s}=o[e]),o=o.slice(0,e)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:o}},t.UpdateTurnOrderState=function(e,t,n,r){const s=n.order;let{G:o,ctx:i}=e,a=i.playOrderPos,c=!1;if(r&&!0!==r)"object"!=typeof r&&N(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(e=>{switch(e){case"remove":t=U(i.playOrder,a);break;case"next":a=i.playOrder.indexOf(r.next),t=r.next;break;default:N(`invalid argument to endTurn: ${e}`)}});else{const n={...B(e),G:o,ctx:i},r=s.next(n),l=typeof r;void 0!==r&&"number"!==l&&N(`invalid value returned by turn.order.next — expected number or undefined got ${l} “${r}”.`),void 0===r?c=!0:(a=r,t=U(i.playOrder,a))}return i={...i,playOrderPos:a,currentPlayer:t},{endPhase:c,ctx:i}},t.error=N,t.gameEvent=m,t.info=function(e){},t.makeMove=g,t.patch=_,t.redo=k,t.reset=P,t.stripTransients=M,t.supportDeprecatedMoveLimit=F,t.sync=x,t.undo=O,t.update=w},4826(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.D=void 0,t._=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)},t.a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Vn(e);if(t){var s=Vn(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}},t.b=function(e,t,n){return t&&zn(e.prototype,t),n&&zn(e,n),e},t.c=qn,t.d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.e=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s},t.f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach(function(t){qn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e};var r=n(9896),s=n(7035),o=n(2591),i=n(3637);function a(){}const c=e=>e;function l(e,t){for(const n in t)e[n]=t[n];return e}function u(e){return e()}function p(){return Object.create(null)}function d(e){e.forEach(u)}function f(e){return"function"==typeof e}function h(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function v(e){if(null==e)return a;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function y(e,t,n){e.$$.on_destroy.push(v(t,n))}function g(e,t,n,r){return e[1]&&r?l(n.ctx.slice(),e[1](r(t))):n.ctx}function m(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function b(e){return null==e?"":e}const x="undefined"!=typeof window;let _=x?()=>window.performance.now():()=>Date.now(),w=x?e=>requestAnimationFrame(e):a;const P=new Set;function O(e){P.forEach(t=>{t.c(e)||(P.delete(t),t.f())}),0!==P.size&&w(O)}function k(e){let t;return 0===P.size&&w(O),{promise:new Promise(n=>{P.add(t={c:e,f:n})}),abort(){P.delete(t)}}}function M(e,t){e.appendChild(t)}function E(e,t,n){const r=$(e);if(!r.getElementById(t)){const e=T("style");e.id=t,e.textContent=n,j(r,e)}}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function A(e){const t=T("style");return j($(e),t),t.sheet}function j(e,t){M(e.head||e,t)}function S(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function N(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function D(e){return document.createTextNode(e)}function R(){return D(" ")}function B(){return D("")}function F(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function G(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function L(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function U(e,t){e.value=null==t?"":t}function z(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}function q(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function V(e,t,n){e.classList[n?"add":"remove"](t)}function W(e,t){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,r,t),s}const H=new Map;let J,K=0;function Y(e,t,n,r,s,o,i){let a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const c=16.666/r;let l="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*o(e);l+=100*e+`%{${i(r,1-r)}}\n`}const u=l+`100% {${i(n,1-n)}}\n}`,p=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,d=$(e),{stylesheet:f,rules:h}=H.get(d)||function(e,t){const n={stylesheet:A(t),rules:{}};return H.set(e,n),n}(d,e);h[p]||(h[p]=!0,f.insertRule(`@keyframes ${p} ${u}`,f.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${p} ${r}ms linear ${s}ms 1 both`,K+=1,p}function X(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-r.length;s&&(e.style.animation=r.join(", "),K-=s,K||w(()=>{K||(H.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),H.clear())}))}function Q(e){J=e}function Z(){if(!J)throw new Error("Function called outside component initialization");return J}function ee(e){Z().$$.on_destroy.push(e)}function te(){const e=Z();return function(t,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.$$.callbacks[t];if(s){const o=W(t,n,{cancelable:r});return s.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}function ne(e,t){return Z().$$.context.set(e,t),t}function re(e){return Z().$$.context.get(e)}function se(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e.call(this,t))}const oe=[],ie=[],ae=[],ce=[],le=Promise.resolve();let ue=!1;function pe(e){ae.push(e)}const de=new Set;let fe,he=0;function ve(){const e=J;do{for(;he<oe.length;){const e=oe[he];he++,Q(e),ye(e.$$)}for(Q(null),oe.length=0,he=0;ie.length;)ie.pop()();for(let e=0;e<ae.length;e+=1){const t=ae[e];de.has(t)||(de.add(t),t())}ae.length=0}while(oe.length);for(;ce.length;)ce.pop()();ue=!1,de.clear(),Q(e)}function ye(e){if(null!==e.fragment){e.update(),d(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(pe)}}function ge(){return fe||(fe=Promise.resolve(),fe.then(()=>{fe=null})),fe}function me(e,t,n){e.dispatchEvent(W(`${t?"intro":"outro"}${n}`))}const be=new Set;let xe;function _e(){xe={r:0,c:[],p:xe}}function we(){xe.r||d(xe.c),xe=xe.p}function Pe(e,t){e&&e.i&&(be.delete(e),e.i(t))}function Oe(e,t,n,r){if(e&&e.o){if(be.has(e))return;be.add(e),xe.c.push(()=>{be.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const ke={duration:0};function Me(e,t,n){let r,s,o=t(e,n),i=!1,l=0;function u(){r&&X(e,r)}function p(){const{delay:t=0,duration:n=300,easing:p=c,tick:d=a,css:f}=o||ke;f&&(r=Y(e,0,1,n,t,p,f,l++)),d(0,1);const h=_()+t,v=h+n;s&&s.abort(),i=!0,pe(()=>me(e,!0,"start")),s=k(t=>{if(i){if(t>=v)return d(1,0),me(e,!0,"end"),u(),i=!1;if(t>=h){const e=p((t-h)/n);d(e,1-e)}}return i})}let d=!1;return{start(){d||(d=!0,X(e),f(o)?(o=o(),ge().then(p)):p())},invalidate(){d=!1},end(){i&&(u(),i=!1)}}}function Ee(e,t,n){let r,s=t(e,n),o=!0;const i=xe;function l(){const{delay:t=0,duration:n=300,easing:l=c,tick:u=a,css:p}=s||ke;p&&(r=Y(e,1,0,n,t,l,p));const f=_()+t,h=f+n;pe(()=>me(e,!1,"start")),k(t=>{if(o){if(t>=h)return u(0,1),me(e,!1,"end"),--i.r||d(i.c),!1;if(t>=f){const e=l((t-f)/n);u(1-e,e)}}return o})}return i.r+=1,f(s)?ge().then(()=>{s=s(),l()}):l(),{end(t){t&&s.tick&&s.tick(1,0),o&&(r&&X(e,r),o=!1)}}}function $e(e,t,n,r){let s=t(e,n),o=r?0:1,i=null,l=null,u=null;function p(){u&&X(e,u)}function h(e,t){const n=e.b-o;return t*=Math.abs(n),{a:o,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function v(t){const{delay:n=0,duration:r=300,easing:f=c,tick:v=a,css:y}=s||ke,g={start:_()+n,b:t};t||(g.group=xe,xe.r+=1),i||l?l=g:(y&&(p(),u=Y(e,o,t,r,n,f,y)),t&&v(0,1),i=h(g,r),pe(()=>me(e,t,"start")),k(t=>{if(l&&t>l.start&&(i=h(l,r),l=null,me(e,i.b,"start"),y&&(p(),u=Y(e,o,i.b,i.duration,0,f,s.css))),i)if(t>=i.end)v(o=i.b,1-o),me(e,i.b,"end"),l||(i.b?p():--i.group.r||d(i.group.c)),i=null;else if(t>=i.start){const e=t-i.start;o=i.a+i.d*f(e/i.duration),v(o,1-o)}return!(!i&&!l)}))}return{run(e){f(s)?ge().then(()=>{s=s(),v(e)}):v(e)},end(){p(),i=l=null}}}function Ae(e,t){const n={},r={},s={$$scope:1};let o=e.length;for(;o--;){const i=e[o],a=t[o];if(a){for(const e in i)e in a||(r[e]=1);for(const e in a)s[e]||(n[e]=a[e],s[e]=1);e[o]=a}else for(const e in i)s[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function je(e){return"object"==typeof e&&null!==e?e:{}}function Se(e){e&&e.c()}function Ie(e,t,n,r){const{fragment:s,on_mount:o,on_destroy:i,after_update:a}=e.$$;s&&s.m(t,n),r||pe(()=>{const t=o.map(u).filter(f);i?i.push(...t):d(t),e.$$.on_mount=[]}),a.forEach(pe)}function Ce(e,t){const n=e.$$;null!==n.fragment&&(d(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(e,t,n,r,s,o,i){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const l=J;Q(e);const u=e.$$={fragment:null,ctx:null,props:o,update:a,not_equal:s,bound:p(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:p(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};i&&i(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},function(t,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return u.ctx&&s(u.ctx[t],u.ctx[t]=r)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](r),f&&function(e,t){-1===e.$$.dirty[0]&&(oe.push(e),ue||(ue=!0,le.then(ve)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n}):[],u.update(),f=!0,d(u.before_update),u.fragment=!!r&&r(u.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);u.fragment&&u.fragment.l(e),e.forEach(I)}else u.fragment&&u.fragment.c();t.intro&&Pe(e.$$.fragment),Ie(e,t.target,t.anchor,t.customElement),ve()}Q(l)}class Ne{$destroy(){Ce(this,1),this.$destroy=a}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const De=[];function Re(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;const r=new Set;function s(n){if(h(e,n)&&(e=n,t)){const t=!De.length;for(const t of r)t[1](),De.push(t,e);if(t){for(let e=0;e<De.length;e+=2)De[e][0](De[e+1]);De.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o){const i=[o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:a];return r.add(i),1===r.size&&(t=n(s)||a),o(e),()=>{r.delete(i),0===r.size&&(t(),t=null)}}}}function Be(e){const t=e-1;return t*t*t+1}function Fe(e){let{delay:t=0,duration:n=400,easing:r=Be,x:s=0,y:o=0,opacity:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=getComputedStyle(e),c=+a.opacity,l="none"===a.transform?"":a.transform,u=c*(1-i);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${l} translate(${(1-e)*s}px, ${(1-e)*o}px);\n\t\t\topacity: ${c-u*t}`}}function Ge(e){E(e,"svelte-c8tyih","svg.svelte-c8tyih{stroke:currentColor;fill:currentColor;stroke-width:0;width:100%;height:auto;max-height:100%}")}function Le(e){let t,n;return{c(){t=N("title"),n=D(e[0])},m(e,r){S(e,t,r),M(t,n)},p(e,t){1&t&&L(n,e[0])},d(e){e&&I(t)}}}function Ue(e){let t,n,r,s=e[0]&&Le(e);const o=e[3].default,i=function(e,t,n){if(e){const r=g(e,t,n,null);return e[0](r)}}(o,e,e[2]);return{c(){t=N("svg"),s&&s.c(),n=B(),i&&i.c(),G(t,"xmlns","http://www.w3.org/2000/svg"),G(t,"viewBox",e[1]),G(t,"class","svelte-c8tyih")},m(e,o){S(e,t,o),s&&s.m(t,null),M(t,n),i&&i.m(t,null),r=!0},p(e,a){let[c]=a;var l,u;e[0]?s?s.p(e,c):(s=Le(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),i&&i.p&&(!r||4&c)&&function(e,t,n,r,s){if(s){const o=g(t,n,r,null);e.p(o,s)}}(i,o,e,e[2],r?(l=o,u=e[2],l[2],u.dirty):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2])),(!r||2&c)&&G(t,"viewBox",e[1])},i(e){r||(Pe(i,e),r=!0)},o(e){Oe(i,e),r=!1},d(e){e&&I(t),s&&s.d(),i&&i.d(e)}}}function ze(e,t,n){let{$$slots:r={},$$scope:s}=t,{title:o=null}=t,{viewBox:i}=t;return e.$$set=e=>{"title"in e&&n(0,o=e.title),"viewBox"in e&&n(1,i=e.viewBox),"$$scope"in e&&n(2,s=e.$$scope)},[o,i,s,r]}class qe extends Ne{constructor(e){super(),Te(this,e,ze,Ue,h,{title:0,viewBox:1},Ge)}}function Ve(e){let t;return{c(){t=N("path"),G(t,"d","M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z")},m(e,n){S(e,t,n)},p:a,d(e){e&&I(t)}}}function We(e){let t,n;const r=[{viewBox:"0 0 320 512"},e[0]];let s={$$slots:{default:[Ve]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)s=l(s,r[e]);return t=new qe({props:s}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[s]=n;const o=1&s?Ae(r,[r[0],je(e[0])]):{};2&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function He(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),m(e)))},[t=m(t)]}class Je extends Ne{constructor(e){super(),Te(this,e,He,We,h,{})}}function Ke(e){E(e,"svelte-1xg9v5h",".menu.svelte-1xg9v5h{display:flex;margin-top:43px;flex-direction:row-reverse;border:1px solid #ccc;border-radius:5px 5px 0 0;height:25px;line-height:25px;margin-right:-500px;transform-origin:bottom right;transform:rotate(-90deg) translate(0, -500px)}.menu-item.svelte-1xg9v5h{line-height:25px;cursor:pointer;border:0;background:#fefefe;color:#555;padding-left:15px;padding-right:15px;text-align:center}.menu-item.svelte-1xg9v5h:first-child{border-radius:0 5px 0 0}.menu-item.svelte-1xg9v5h:last-child{border-radius:5px 0 0 0}.menu-item.active.svelte-1xg9v5h{cursor:default;font-weight:bold;background:#ddd;color:#555}.menu-item.svelte-1xg9v5h:hover,.menu-item.svelte-1xg9v5h:focus{background:#eee;color:#555}")}function Ye(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1].label,r}function Xe(e){let t,n,r,s,o,i=e[5]+"";function a(){return e[3](e[4])}return{c(){t=T("button"),n=D(i),r=R(),G(t,"class","menu-item svelte-1xg9v5h"),V(t,"active",e[0]==e[4])},m(e,i){S(e,t,i),M(t,n),M(t,r),s||(o=F(t,"click",a),s=!0)},p(r,s){e=r,2&s&&i!==(i=e[5]+"")&&L(n,i),3&s&&V(t,"active",e[0]==e[4])},d(e){e&&I(t),s=!1,o()}}}function Qe(e){let t,n=Object.entries(e[1]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Xe(Ye(e,n,t));return{c(){t=T("nav");for(let e=0;e<r.length;e+=1)r[e].c();G(t,"class","menu svelte-1xg9v5h")},m(e,n){S(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,s){let[o]=s;if(7&o){let s;for(n=Object.entries(e[1]),s=0;s<n.length;s+=1){const i=Ye(e,n,s);r[s]?r[s].p(i,o):(r[s]=Xe(i),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:a,o:a,d(e){e&&I(t),C(r,e)}}}function Ze(e,t,n){let{pane:r}=t,{panes:s}=t;const o=te();return e.$$set=e=>{"pane"in e&&n(0,r=e.pane),"panes"in e&&n(1,s=e.panes)},[r,s,o,e=>o("change",e)]}class et extends Ne{constructor(e){super(),Te(this,e,Ze,Qe,h,{pane:0,panes:1},Ke)}}var tt={};function nt(e){E(e,"svelte-1vyml86",".container.svelte-1vyml86{display:inline-block;cursor:pointer;transform:translate(calc(0px - var(--li-identation)), -50%);position:absolute;top:50%;padding-right:100%}.arrow.svelte-1vyml86{transform-origin:25% 50%;position:relative;line-height:1.1em;font-size:0.75em;margin-left:0;transition:150ms;color:var(--arrow-sign);user-select:none;font-family:'Courier New', Courier, monospace}.expanded.svelte-1vyml86{transform:rotateZ(90deg) translateX(-3px)}")}function rt(e){let t,n,r,s;return{c(){t=T("div"),n=T("div"),n.textContent="▶",G(n,"class","arrow svelte-1vyml86"),V(n,"expanded",e[0]),G(t,"class","container svelte-1vyml86")},m(o,i){S(o,t,i),M(t,n),r||(s=F(t,"click",e[1]),r=!0)},p(e,t){let[r]=t;1&r&&V(n,"expanded",e[0])},i:a,o:a,d(e){e&&I(t),r=!1,s()}}}function st(e,t,n){let{expanded:r}=t;return e.$$set=e=>{"expanded"in e&&n(0,r=e.expanded)},[r,function(t){se.call(this,e,t)}]}class ot extends Ne{constructor(e){super(),Te(this,e,st,rt,h,{expanded:0},nt)}}function it(e){E(e,"svelte-1vlbacg","label.svelte-1vlbacg{display:inline-block;color:var(--label-color);padding:0}.spaced.svelte-1vlbacg{padding-right:var(--li-colon-space)}")}function at(e){let t,n,r,s,o,i;return{c(){t=T("label"),n=T("span"),r=D(e[0]),s=D(e[2]),G(t,"class","svelte-1vlbacg"),V(t,"spaced",e[1])},m(a,c){S(a,t,c),M(t,n),M(n,r),M(n,s),o||(i=F(t,"click",e[5]),o=!0)},p(e,n){1&n&&L(r,e[0]),4&n&&L(s,e[2]),2&n&&V(t,"spaced",e[1])},d(e){e&&I(t),o=!1,i()}}}function ct(e){let t,n=e[3]&&e[0]&&at(e);return{c(){n&&n.c(),t=B()},m(e,r){n&&n.m(e,r),S(e,t,r)},p(e,r){let[s]=r;e[3]&&e[0]?n?n.p(e,s):(n=at(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:a,o:a,d(e){n&&n.d(e),e&&I(t)}}}function lt(e,t,n){let r,{key:s,isParentExpanded:o,isParentArray:i=!1,colon:a=":"}=t;return e.$$set=e=>{"key"in e&&n(0,s=e.key),"isParentExpanded"in e&&n(1,o=e.isParentExpanded),"isParentArray"in e&&n(4,i=e.isParentArray),"colon"in e&&n(2,a=e.colon)},e.$$.update=()=>{19&e.$$.dirty&&n(3,r=o||!i||s!=+s)},[s,o,a,r,i,function(t){se.call(this,e,t)}]}class ut extends Ne{constructor(e){super(),Te(this,e,lt,ct,h,{key:0,isParentExpanded:1,isParentArray:4,colon:2},it)}}function pt(e){E(e,"svelte-rwxv37","label.svelte-rwxv37{display:inline-block}.indent.svelte-rwxv37{padding-left:var(--li-identation)}.collapse.svelte-rwxv37{--li-display:inline;display:inline;font-style:italic}.comma.svelte-rwxv37{margin-left:-0.5em;margin-right:0.5em}label.svelte-rwxv37{position:relative}")}function dt(e,t,n){const r=e.slice();return r[12]=t[n],r[20]=n,r}function ft(e){let t,n;return t=new ot({props:{expanded:e[0]}}),t.$on("click",e[15]),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.expanded=e[0]),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function ht(e){let t;return{c(){t=T("span"),t.textContent="…"},m(e,n){S(e,t,n)},p:a,i:a,o:a,d(e){e&&I(t)}}}function vt(e){let t,n,r,s,o,i=e[13],a=[];for(let t=0;t<i.length;t+=1)a[t]=gt(dt(e,i,t));const c=e=>Oe(a[e],1,1,()=>{a[e]=null});let l=e[13].length<e[7].length&&mt();return{c(){t=T("ul");for(let e=0;e<a.length;e+=1)a[e].c();n=R(),l&&l.c(),G(t,"class","svelte-rwxv37"),V(t,"collapse",!e[0])},m(i,c){S(i,t,c);for(let e=0;e<a.length;e+=1)a[e].m(t,null);M(t,n),l&&l.m(t,null),r=!0,s||(o=F(t,"click",e[16]),s=!0)},p(e,r){if(10129&r){let s;for(i=e[13],s=0;s<i.length;s+=1){const o=dt(e,i,s);a[s]?(a[s].p(o,r),Pe(a[s],1)):(a[s]=gt(o),a[s].c(),Pe(a[s],1),a[s].m(t,n))}for(_e(),s=i.length;s<a.length;s+=1)c(s);we()}e[13].length<e[7].length?l||(l=mt(),l.c(),l.m(t,null)):l&&(l.d(1),l=null),1&r&&V(t,"collapse",!e[0])},i(e){if(!r){for(let e=0;e<i.length;e+=1)Pe(a[e]);r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Oe(a[e]);r=!1},d(e){e&&I(t),C(a,e),l&&l.d(),s=!1,o()}}}function yt(e){let t;return{c(){t=T("span"),t.textContent=",",G(t,"class","comma svelte-rwxv37")},m(e,n){S(e,t,n)},d(e){e&&I(t)}}}function gt(e){let t,n,r,s;t=new rn({props:{key:e[8](e[12]),isParentExpanded:e[0],isParentArray:e[4],value:e[0]?e[9](e[12]):e[10](e[12])}});let o=!e[0]&&e[20]<e[7].length-1&&yt();return{c(){Se(t.$$.fragment),n=R(),o&&o.c(),r=B()},m(e,i){Ie(t,e,i),S(e,n,i),o&&o.m(e,i),S(e,r,i),s=!0},p(e,n){const s={};8448&n&&(s.key=e[8](e[12])),1&n&&(s.isParentExpanded=e[0]),16&n&&(s.isParentArray=e[4]),9729&n&&(s.value=e[0]?e[9](e[12]):e[10](e[12])),t.$set(s),!e[0]&&e[20]<e[7].length-1?o||(o=yt(),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(e){s||(Pe(t.$$.fragment,e),s=!0)},o(e){Oe(t.$$.fragment,e),s=!1},d(e){Ce(t,e),e&&I(n),o&&o.d(e),e&&I(r)}}}function mt(e){let t;return{c(){t=T("span"),t.textContent="…"},m(e,n){S(e,t,n)},d(e){e&&I(t)}}}function bt(e){let t,n,r,s,o,i,a,c,l,u,p,d,f,h,v,y,g,m,b=e[11]&&e[2]&&ft(e);s=new ut({props:{key:e[12],colon:e[14].colon,isParentExpanded:e[2],isParentArray:e[3]}}),s.$on("click",e[15]);const x=[vt,ht],_=[];function w(e,t){return e[2]?0:1}return p=w(e),d=_[p]=x[p](e),{c(){t=T("li"),n=T("label"),b&&b.c(),r=R(),Se(s.$$.fragment),o=R(),i=T("span"),a=T("span"),c=D(e[1]),l=D(e[5]),u=R(),d.c(),f=R(),h=T("span"),v=D(e[6]),G(n,"class","svelte-rwxv37"),G(t,"class","svelte-rwxv37"),V(t,"indent",e[2])},m(d,x){S(d,t,x),M(t,n),b&&b.m(n,null),M(n,r),Ie(s,n,null),M(n,o),M(n,i),M(i,a),M(a,c),M(i,l),M(t,u),_[p].m(t,null),M(t,f),M(t,h),M(h,v),y=!0,g||(m=F(i,"click",e[15]),g=!0)},p(e,o){let[i]=o;e[11]&&e[2]?b?(b.p(e,i),2052&i&&Pe(b,1)):(b=ft(e),b.c(),Pe(b,1),b.m(n,r)):b&&(_e(),Oe(b,1,1,()=>{b=null}),we());const a={};4096&i&&(a.key=e[12]),4&i&&(a.isParentExpanded=e[2]),8&i&&(a.isParentArray=e[3]),s.$set(a),(!y||2&i)&&L(c,e[1]),(!y||32&i)&&L(l,e[5]);let u=p;p=w(e),p===u?_[p].p(e,i):(_e(),Oe(_[u],1,1,()=>{_[u]=null}),we(),d=_[p],d?d.p(e,i):(d=_[p]=x[p](e),d.c()),Pe(d,1),d.m(t,f)),(!y||64&i)&&L(v,e[6]),4&i&&V(t,"indent",e[2])},i(e){y||(Pe(b),Pe(s.$$.fragment,e),Pe(d),y=!0)},o(e){Oe(b),Oe(s.$$.fragment,e),Oe(d),y=!1},d(e){e&&I(t),b&&b.d(),Ce(s),_[p].d(),g=!1,m()}}}function xt(e,t,n){let r,{key:s,keys:o,colon:i=":",label:a="",isParentExpanded:c,isParentArray:l,isArray:u=!1,bracketOpen:p,bracketClose:d}=t,{previewKeys:f=o}=t,{getKey:h=e=>e}=t,{getValue:v=e=>e}=t,{getPreviewValue:y=v}=t,{expanded:g=!1,expandable:m=!0}=t;const b=re(tt);return ne(tt,{...b,colon:i}),e.$$set=e=>{"key"in e&&n(12,s=e.key),"keys"in e&&n(17,o=e.keys),"colon"in e&&n(18,i=e.colon),"label"in e&&n(1,a=e.label),"isParentExpanded"in e&&n(2,c=e.isParentExpanded),"isParentArray"in e&&n(3,l=e.isParentArray),"isArray"in e&&n(4,u=e.isArray),"bracketOpen"in e&&n(5,p=e.bracketOpen),"bracketClose"in e&&n(6,d=e.bracketClose),"previewKeys"in e&&n(7,f=e.previewKeys),"getKey"in e&&n(8,h=e.getKey),"getValue"in e&&n(9,v=e.getValue),"getPreviewValue"in e&&n(10,y=e.getPreviewValue),"expanded"in e&&n(0,g=e.expanded),"expandable"in e&&n(11,m=e.expandable)},e.$$.update=()=>{4&e.$$.dirty&&(c||n(0,g=!1)),131201&e.$$.dirty&&n(13,r=g?o:f.slice(0,5))},[g,a,c,l,u,p,d,f,h,v,y,m,s,r,b,function(){n(0,g=!g)},function(){n(0,g=!0)},o,i]}class _t extends Ne{constructor(e){super(),Te(this,e,xt,bt,h,{key:12,keys:17,colon:18,label:1,isParentExpanded:2,isParentArray:3,isArray:4,bracketOpen:5,bracketClose:6,previewKeys:7,getKey:8,getValue:9,getPreviewValue:10,expanded:0,expandable:11},pt)}}function wt(e){let t,n;return t=new _t({props:{key:e[0],expanded:e[4],isParentExpanded:e[1],isParentArray:e[2],keys:e[5],previewKeys:e[5],getValue:e[6],label:e[3]+" ",bracketOpen:"{",bracketClose:"}"}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[r]=n;const s={};1&r&&(s.key=e[0]),16&r&&(s.expanded=e[4]),2&r&&(s.isParentExpanded=e[1]),4&r&&(s.isParentArray=e[2]),32&r&&(s.keys=e[5]),32&r&&(s.previewKeys=e[5]),8&r&&(s.label=e[3]+" "),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Pt(e,t,n){let r,{key:s,value:o,isParentExpanded:i,isParentArray:a,nodeType:c}=t,{expanded:l=!0}=t;return e.$$set=e=>{"key"in e&&n(0,s=e.key),"value"in e&&n(7,o=e.value),"isParentExpanded"in e&&n(1,i=e.isParentExpanded),"isParentArray"in e&&n(2,a=e.isParentArray),"nodeType"in e&&n(3,c=e.nodeType),"expanded"in e&&n(4,l=e.expanded)},e.$$.update=()=>{128&e.$$.dirty&&n(5,r=Object.getOwnPropertyNames(o))},[s,i,a,c,l,r,function(e){return o[e]},o]}class Ot extends Ne{constructor(e){super(),Te(this,e,Pt,wt,h,{key:0,value:7,isParentExpanded:1,isParentArray:2,nodeType:3,expanded:4})}}function kt(e){let t,n;return t=new _t({props:{key:e[0],expanded:e[4],isParentExpanded:e[2],isParentArray:e[3],isArray:!0,keys:e[5],previewKeys:e[6],getValue:e[7],label:"Array("+e[1].length+")",bracketOpen:"[",bracketClose:"]"}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[r]=n;const s={};1&r&&(s.key=e[0]),16&r&&(s.expanded=e[4]),4&r&&(s.isParentExpanded=e[2]),8&r&&(s.isParentArray=e[3]),32&r&&(s.keys=e[5]),64&r&&(s.previewKeys=e[6]),2&r&&(s.label="Array("+e[1].length+")"),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Mt(e,t,n){let r,s,{key:o,value:i,isParentExpanded:a,isParentArray:c}=t,{expanded:l=JSON.stringify(i).length<1024}=t;const u=new Set(["length"]);return e.$$set=e=>{"key"in e&&n(0,o=e.key),"value"in e&&n(1,i=e.value),"isParentExpanded"in e&&n(2,a=e.isParentExpanded),"isParentArray"in e&&n(3,c=e.isParentArray),"expanded"in e&&n(4,l=e.expanded)},e.$$.update=()=>{2&e.$$.dirty&&n(5,r=Object.getOwnPropertyNames(i)),32&e.$$.dirty&&n(6,s=r.filter(e=>!u.has(e)))},[o,i,a,c,l,r,s,function(e){return i[e]}]}class Et extends Ne{constructor(e){super(),Te(this,e,Mt,kt,h,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4})}}function $t(e){let t,n;return t=new _t({props:{key:e[0],isParentExpanded:e[1],isParentArray:e[2],keys:e[4],getKey:At,getValue:jt,isArray:!0,label:e[3]+"("+e[4].length+")",bracketOpen:"{",bracketClose:"}"}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[r]=n;const s={};1&r&&(s.key=e[0]),2&r&&(s.isParentExpanded=e[1]),4&r&&(s.isParentArray=e[2]),16&r&&(s.keys=e[4]),24&r&&(s.label=e[3]+"("+e[4].length+")"),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function At(e){return String(e[0])}function jt(e){return e[1]}function St(e,t,n){let{key:r,value:s,isParentExpanded:o,isParentArray:i,nodeType:a}=t,c=[];return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(5,s=e.value),"isParentExpanded"in e&&n(1,o=e.isParentExpanded),"isParentArray"in e&&n(2,i=e.isParentArray),"nodeType"in e&&n(3,a=e.nodeType)},e.$$.update=()=>{if(32&e.$$.dirty){let e=[],t=0;for(const n of s)e.push([t++,n]);n(4,c=e)}},[r,o,i,a,c,s]}class It extends Ne{constructor(e){super(),Te(this,e,St,$t,h,{key:0,value:5,isParentExpanded:1,isParentArray:2,nodeType:3})}}class Ct{constructor(e,t){this.key=e,this.value=t}}function Tt(e){let t,n;return t=new _t({props:{key:e[0],isParentExpanded:e[1],isParentArray:e[2],keys:e[4],getKey:Nt,getValue:Dt,label:e[3]+"("+e[4].length+")",colon:"",bracketOpen:"{",bracketClose:"}"}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[r]=n;const s={};1&r&&(s.key=e[0]),2&r&&(s.isParentExpanded=e[1]),4&r&&(s.isParentArray=e[2]),16&r&&(s.keys=e[4]),24&r&&(s.label=e[3]+"("+e[4].length+")"),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Nt(e){return e[0]}function Dt(e){return e[1]}function Rt(e,t,n){let{key:r,value:s,isParentExpanded:o,isParentArray:i,nodeType:a}=t,c=[];return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(5,s=e.value),"isParentExpanded"in e&&n(1,o=e.isParentExpanded),"isParentArray"in e&&n(2,i=e.isParentArray),"nodeType"in e&&n(3,a=e.nodeType)},e.$$.update=()=>{if(32&e.$$.dirty){let e=[],t=0;for(const n of s)e.push([t++,new Ct(n[0],n[1])]);n(4,c=e)}},[r,o,i,a,c,s]}class Bt extends Ne{constructor(e){super(),Te(this,e,Rt,Tt,h,{key:0,value:5,isParentExpanded:1,isParentArray:2,nodeType:3})}}function Ft(e){let t,n;return t=new _t({props:{expanded:e[4],isParentExpanded:e[2],isParentArray:e[3],key:e[2]?String(e[0]):e[1].key,keys:e[5],getValue:e[6],label:e[2]?"Entry ":"=> ",bracketOpen:"{",bracketClose:"}"}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[r]=n;const s={};16&r&&(s.expanded=e[4]),4&r&&(s.isParentExpanded=e[2]),8&r&&(s.isParentArray=e[3]),7&r&&(s.key=e[2]?String(e[0]):e[1].key),4&r&&(s.label=e[2]?"Entry ":"=> "),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Gt(e,t,n){let{key:r,value:s,isParentExpanded:o,isParentArray:i}=t,{expanded:a=!1}=t;return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(1,s=e.value),"isParentExpanded"in e&&n(2,o=e.isParentExpanded),"isParentArray"in e&&n(3,i=e.isParentArray),"expanded"in e&&n(4,a=e.expanded)},[r,s,o,i,a,["key","value"],function(e){return s[e]}]}class Lt extends Ne{constructor(e){super(),Te(this,e,Gt,Ft,h,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4})}}function Ut(e){E(e,"svelte-3bjyvl","li.svelte-3bjyvl{user-select:text;word-wrap:break-word;word-break:break-all}.indent.svelte-3bjyvl{padding-left:var(--li-identation)}.String.svelte-3bjyvl{color:var(--string-color)}.Date.svelte-3bjyvl{color:var(--date-color)}.Number.svelte-3bjyvl{color:var(--number-color)}.Boolean.svelte-3bjyvl{color:var(--boolean-color)}.Null.svelte-3bjyvl{color:var(--null-color)}.Undefined.svelte-3bjyvl{color:var(--undefined-color)}.Function.svelte-3bjyvl{color:var(--function-color);font-style:italic}.Symbol.svelte-3bjyvl{color:var(--symbol-color)}")}function zt(e){let t,n,r,s,o,i,a,c=(e[2]?e[2](e[1]):e[1])+"";return n=new ut({props:{key:e[0],colon:e[6],isParentExpanded:e[3],isParentArray:e[4]}}),{c(){t=T("li"),Se(n.$$.fragment),r=R(),s=T("span"),o=D(c),G(s,"class",i=b(e[5])+" svelte-3bjyvl"),G(t,"class","svelte-3bjyvl"),V(t,"indent",e[3])},m(e,i){S(e,t,i),Ie(n,t,null),M(t,r),M(t,s),M(s,o),a=!0},p(e,r){let[l]=r;const u={};1&l&&(u.key=e[0]),8&l&&(u.isParentExpanded=e[3]),16&l&&(u.isParentArray=e[4]),n.$set(u),(!a||6&l)&&c!==(c=(e[2]?e[2](e[1]):e[1])+"")&&L(o,c),(!a||32&l&&i!==(i=b(e[5])+" svelte-3bjyvl"))&&G(s,"class",i),8&l&&V(t,"indent",e[3])},i(e){a||(Pe(n.$$.fragment,e),a=!0)},o(e){Oe(n.$$.fragment,e),a=!1},d(e){e&&I(t),Ce(n)}}}function qt(e,t,n){let{key:r,value:s,valueGetter:o=null,isParentExpanded:i,isParentArray:a,nodeType:c}=t;const{colon:l}=re(tt);return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(1,s=e.value),"valueGetter"in e&&n(2,o=e.valueGetter),"isParentExpanded"in e&&n(3,i=e.isParentExpanded),"isParentArray"in e&&n(4,a=e.isParentArray),"nodeType"in e&&n(5,c=e.nodeType)},[r,s,o,i,a,c,l]}class Vt extends Ne{constructor(e){super(),Te(this,e,qt,zt,h,{key:0,value:1,valueGetter:2,isParentExpanded:3,isParentArray:4,nodeType:5},Ut)}}function Wt(e){E(e,"svelte-1ca3gb2","li.svelte-1ca3gb2{user-select:text;word-wrap:break-word;word-break:break-all}.indent.svelte-1ca3gb2{padding-left:var(--li-identation)}.collapse.svelte-1ca3gb2{--li-display:inline;display:inline;font-style:italic}")}function Ht(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Jt(e){let t,n;return t=new ot({props:{expanded:e[0]}}),t.$on("click",e[7]),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.expanded=e[0]),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Kt(e){let t,n,r=e[0]&&Yt(e);return{c(){t=T("ul"),r&&r.c(),G(t,"class","svelte-1ca3gb2"),V(t,"collapse",!e[0])},m(e,s){S(e,t,s),r&&r.m(t,null),n=!0},p(e,n){e[0]?r?(r.p(e,n),1&n&&Pe(r,1)):(r=Yt(e),r.c(),Pe(r,1),r.m(t,null)):r&&(_e(),Oe(r,1,1,()=>{r=null}),we()),1&n&&V(t,"collapse",!e[0])},i(e){n||(Pe(r),n=!0)},o(e){Oe(r),n=!1},d(e){e&&I(t),r&&r.d()}}}function Yt(e){let t,n,r,s,o,i,a;t=new rn({props:{key:"message",value:e[2].message}}),s=new ut({props:{key:"stack",colon:":",isParentExpanded:e[3]}});let c=e[5],l=[];for(let t=0;t<c.length;t+=1)l[t]=Xt(Ht(e,c,t));return{c(){Se(t.$$.fragment),n=R(),r=T("li"),Se(s.$$.fragment),o=R(),i=T("span");for(let e=0;e<l.length;e+=1)l[e].c();G(r,"class","svelte-1ca3gb2")},m(e,c){Ie(t,e,c),S(e,n,c),S(e,r,c),Ie(s,r,null),M(r,o),M(r,i);for(let e=0;e<l.length;e+=1)l[e].m(i,null);a=!0},p(e,n){const r={};4&n&&(r.value=e[2].message),t.$set(r);const o={};if(8&n&&(o.isParentExpanded=e[3]),s.$set(o),32&n){let t;for(c=e[5],t=0;t<c.length;t+=1){const r=Ht(e,c,t);l[t]?l[t].p(r,n):(l[t]=Xt(r),l[t].c(),l[t].m(i,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=c.length}},i(e){a||(Pe(t.$$.fragment,e),Pe(s.$$.fragment,e),a=!0)},o(e){Oe(t.$$.fragment,e),Oe(s.$$.fragment,e),a=!1},d(e){Ce(t,e),e&&I(n),e&&I(r),Ce(s),C(l,e)}}}function Xt(e){let t,n,r,s=e[8]+"";return{c(){t=T("span"),n=D(s),r=T("br"),G(t,"class","svelte-1ca3gb2"),V(t,"indent",e[10]>0)},m(e,s){S(e,t,s),M(t,n),S(e,r,s)},p(e,t){32&t&&s!==(s=e[8]+"")&&L(n,s)},d(e){e&&I(t),e&&I(r)}}}function Qt(e){let t,n,r,s,o,i,a,c,l,u,p,d=(e[0]?"":e[2].message)+"",f=e[3]&&Jt(e);r=new ut({props:{key:e[1],colon:e[6].colon,isParentExpanded:e[3],isParentArray:e[4]}});let h=e[3]&&Kt(e);return{c(){t=T("li"),f&&f.c(),n=R(),Se(r.$$.fragment),s=R(),o=T("span"),i=D("Error: "),a=D(d),c=R(),h&&h.c(),G(t,"class","svelte-1ca3gb2"),V(t,"indent",e[3])},m(d,v){S(d,t,v),f&&f.m(t,null),M(t,n),Ie(r,t,null),M(t,s),M(t,o),M(o,i),M(o,a),M(t,c),h&&h.m(t,null),l=!0,u||(p=F(o,"click",e[7]),u=!0)},p(e,s){let[o]=s;e[3]?f?(f.p(e,o),8&o&&Pe(f,1)):(f=Jt(e),f.c(),Pe(f,1),f.m(t,n)):f&&(_e(),Oe(f,1,1,()=>{f=null}),we());const i={};2&o&&(i.key=e[1]),8&o&&(i.isParentExpanded=e[3]),16&o&&(i.isParentArray=e[4]),r.$set(i),(!l||5&o)&&d!==(d=(e[0]?"":e[2].message)+"")&&L(a,d),e[3]?h?(h.p(e,o),8&o&&Pe(h,1)):(h=Kt(e),h.c(),Pe(h,1),h.m(t,null)):h&&(_e(),Oe(h,1,1,()=>{h=null}),we()),8&o&&V(t,"indent",e[3])},i(e){l||(Pe(f),Pe(r.$$.fragment,e),Pe(h),l=!0)},o(e){Oe(f),Oe(r.$$.fragment,e),Oe(h),l=!1},d(e){e&&I(t),f&&f.d(),Ce(r),h&&h.d(),u=!1,p()}}}function Zt(e,t,n){let r,{key:s,value:o,isParentExpanded:i,isParentArray:a}=t,{expanded:c=!1}=t;const l=re(tt);return ne(tt,{...l,colon:":"}),e.$$set=e=>{"key"in e&&n(1,s=e.key),"value"in e&&n(2,o=e.value),"isParentExpanded"in e&&n(3,i=e.isParentExpanded),"isParentArray"in e&&n(4,a=e.isParentArray),"expanded"in e&&n(0,c=e.expanded)},e.$$.update=()=>{4&e.$$.dirty&&n(5,r=o.stack.split("\n")),8&e.$$.dirty&&(i||n(0,c=!1))},[c,s,o,i,a,r,l,function(){n(0,c=!c)}]}class en extends Ne{constructor(e){super(),Te(this,e,Zt,Qt,h,{key:1,value:2,isParentExpanded:3,isParentArray:4,expanded:0},Wt)}}function tn(e){let t,n,r;var s=e[6];function o(e){return{props:{key:e[0],value:e[1],isParentExpanded:e[2],isParentArray:e[3],nodeType:e[4],valueGetter:e[5]}}}return s&&(t=new s(o(e))),{c(){t&&Se(t.$$.fragment),n=B()},m(e,s){t&&Ie(t,e,s),S(e,n,s),r=!0},p(e,r){let[i]=r;const a={};if(1&i&&(a.key=e[0]),2&i&&(a.value=e[1]),4&i&&(a.isParentExpanded=e[2]),8&i&&(a.isParentArray=e[3]),16&i&&(a.nodeType=e[4]),32&i&&(a.valueGetter=e[5]),s!==(s=e[6])){if(t){_e();const e=t;Oe(e.$$.fragment,1,0,()=>{Ce(e,1)}),we()}s?(t=new s(o(e)),Se(t.$$.fragment),Pe(t.$$.fragment,1),Ie(t,n.parentNode,n)):t=null}else s&&t.$set(a)},i(e){r||(t&&Pe(t.$$.fragment,e),r=!0)},o(e){t&&Oe(t.$$.fragment,e),r=!1},d(e){e&&I(n),t&&Ce(t,e)}}}function nn(e,t,n){let r,s,o,{key:i,value:a,isParentExpanded:c,isParentArray:l}=t;return e.$$set=e=>{"key"in e&&n(0,i=e.key),"value"in e&&n(1,a=e.value),"isParentExpanded"in e&&n(2,c=e.isParentExpanded),"isParentArray"in e&&n(3,l=e.isParentArray)},e.$$.update=()=>{2&e.$$.dirty&&n(4,r=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t?"function"==typeof e[Symbol.iterator]?"Iterable":e.constructor.name:t}(a)),16&e.$$.dirty&&n(6,s=function(e){switch(e){case"Object":return Ot;case"Error":return en;case"Array":return Et;case"Iterable":case"Map":case"Set":return"function"==typeof a.set?Bt:It;case"MapEntry":return Lt;default:return Vt}}(r)),16&e.$$.dirty&&n(5,o=function(e){switch(e){case"Object":case"Error":case"Array":case"Iterable":case"Map":case"Set":case"MapEntry":case"Number":return;case"String":return e=>`"${e}"`;case"Boolean":return e=>e?"true":"false";case"Date":return e=>e.toISOString();case"Null":return()=>"null";case"Undefined":return()=>"undefined";case"Function":case"Symbol":return e=>e.toString();default:return()=>`<${e}>`}}(r))},[i,a,c,l,r,o,s]}class rn extends Ne{constructor(e){super(),Te(this,e,nn,tn,h,{key:0,value:1,isParentExpanded:2,isParentArray:3})}}function sn(e){E(e,"svelte-773n60","ul.svelte-773n60{--string-color:var(--json-tree-string-color, #cb3f41);--symbol-color:var(--json-tree-symbol-color, #cb3f41);--boolean-color:var(--json-tree-boolean-color, #112aa7);--function-color:var(--json-tree-function-color, #112aa7);--number-color:var(--json-tree-number-color, #3029cf);--label-color:var(--json-tree-label-color, #871d8f);--arrow-color:var(--json-tree-arrow-color, #727272);--null-color:var(--json-tree-null-color, #8d8d8d);--undefined-color:var(--json-tree-undefined-color, #8d8d8d);--date-color:var(--json-tree-date-color, #8d8d8d);--li-identation:var(--json-tree-li-indentation, 1em);--li-line-height:var(--json-tree-li-line-height, 1.3);--li-colon-space:0.3em;font-size:var(--json-tree-font-size, 12px);font-family:var(--json-tree-font-family, 'Courier New', Courier, monospace)}ul.svelte-773n60 li{line-height:var(--li-line-height);display:var(--li-display, list-item);list-style:none}ul.svelte-773n60,ul.svelte-773n60 ul{padding:0;margin:0}")}function on(e){let t,n,r;return n=new rn({props:{key:e[0],value:e[1],isParentExpanded:!0,isParentArray:!1}}),{c(){t=T("ul"),Se(n.$$.fragment),G(t,"class","svelte-773n60")},m(e,s){S(e,t,s),Ie(n,t,null),r=!0},p(e,t){let[r]=t;const s={};1&r&&(s.key=e[0]),2&r&&(s.value=e[1]),n.$set(s)},i(e){r||(Pe(n.$$.fragment,e),r=!0)},o(e){Oe(n.$$.fragment,e),r=!1},d(e){e&&I(t),Ce(n)}}}function an(e,t,n){ne(tt,{});let{key:r="",value:s}=t;return e.$$set=e=>{"key"in e&&n(0,r=e.key),"value"in e&&n(1,s=e.value)},[r,s]}class cn extends Ne{constructor(e){super(),Te(this,e,an,on,h,{key:0,value:1},sn)}}function ln(e){E(e,"svelte-jvfq3i",".svelte-jvfq3i{box-sizing:border-box}section.switcher.svelte-jvfq3i{position:sticky;bottom:0;transform:translateY(20px);margin:40px -20px 0;border-top:1px solid #999;padding:20px;background:#fff}label.svelte-jvfq3i{display:flex;align-items:baseline;gap:5px;font-weight:bold}select.svelte-jvfq3i{min-width:140px}")}function un(e,t,n){const r=e.slice();return r[7]=t[n],r[9]=n,r}function pn(e){let t,n,r,s,o,i,a=e[1],c=[];for(let t=0;t<a.length;t+=1)c[t]=dn(un(e,a,t));return{c(){t=T("section"),n=T("label"),r=D("Client\n      \n      "),s=T("select");for(let e=0;e<c.length;e+=1)c[e].c();G(s,"id",hn),G(s,"class","svelte-jvfq3i"),void 0===e[2]&&pe(()=>e[6].call(s)),G(n,"class","svelte-jvfq3i"),G(t,"class","switcher svelte-jvfq3i")},m(a,l){S(a,t,l),M(t,n),M(n,r),M(n,s);for(let e=0;e<c.length;e+=1)c[e].m(s,null);z(s,e[2]),o||(i=[F(s,"change",e[3]),F(s,"change",e[6])],o=!0)},p(e,t){if(2&t){let n;for(a=e[1],n=0;n<a.length;n+=1){const r=un(e,a,n);c[n]?c[n].p(r,t):(c[n]=dn(r),c[n].c(),c[n].m(s,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}4&t&&z(s,e[2])},d(e){e&&I(t),C(c,e),o=!1,d(i)}}}function dn(e){let t,n,r,s,o,i,a,c,l,u=JSON.stringify(e[7].playerID)+"",p=JSON.stringify(e[7].matchID)+"",d=e[7].game.name+"";return{c(){t=T("option"),n=D(e[9]),r=D(" —\n            playerID: "),s=D(u),o=D(",\n            matchID: "),i=D(p),a=D("\n            ("),c=D(d),l=D(")\n          "),t.__value=e[9],t.value=t.__value,G(t,"class","svelte-jvfq3i")},m(e,u){S(e,t,u),M(t,n),M(t,r),M(t,s),M(t,o),M(t,i),M(t,a),M(t,c),M(t,l)},p(e,t){2&t&&u!==(u=JSON.stringify(e[7].playerID)+"")&&L(s,u),2&t&&p!==(p=JSON.stringify(e[7].matchID)+"")&&L(i,p),2&t&&d!==(d=e[7].game.name+"")&&L(c,d)},d(e){e&&I(t)}}}function fn(e){let t,n=e[1].length>1&&pn(e);return{c(){n&&n.c(),t=B()},m(e,r){n&&n.m(e,r),S(e,t,r)},p(e,r){let[s]=r;e[1].length>1?n?n.p(e,s):(n=pn(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:a,o:a,d(e){n&&n.d(e),e&&I(t)}}}const hn="bgio-debug-select-client";function vn(e,t,n){let r,s,o,i,c=a,l=()=>(c(),c=v(u,e=>n(5,i=e)),u);e.$$.on_destroy.push(()=>c());let{clientManager:u}=t;return l(),e.$$set=e=>{"clientManager"in e&&l(n(0,u=e.clientManager))},e.$$.update=()=>{32&e.$$.dirty&&n(4,({client:r,debuggableClients:s}=i),r,(n(1,s),n(5,i))),18&e.$$.dirty&&n(2,o=s.indexOf(r))},[u,s,o,e=>{const t=s[e.target.value];u.switchToClient(t);const n=document.getElementById(hn);n&&n.focus()},r,i,function(){o=q(this),n(2,o),n(1,s),n(4,r),n(5,i)}]}class yn extends Ne{constructor(e){super(),Te(this,e,vn,fn,h,{clientManager:0},ln)}}function gn(e){E(e,"svelte-1vfj1mn",".key.svelte-1vfj1mn.svelte-1vfj1mn{display:flex;flex-direction:row;align-items:center}button.svelte-1vfj1mn.svelte-1vfj1mn{cursor:pointer;min-width:10px;padding-left:5px;padding-right:5px;height:20px;line-height:20px;text-align:center;border:1px solid #ccc;box-shadow:1px 1px 1px #888;background:#eee;color:#444}button.svelte-1vfj1mn.svelte-1vfj1mn:hover{background:#ddd}.key.active.svelte-1vfj1mn button.svelte-1vfj1mn{background:#ddd;border:1px solid #999;box-shadow:none}label.svelte-1vfj1mn.svelte-1vfj1mn{margin-left:10px}")}function mn(e){let t,n,r,s,o,i=`(shortcut: ${e[0]})`;return{c(){t=T("label"),n=D(e[1]),r=R(),s=T("span"),o=D(i),G(s,"class","screen-reader-only"),G(t,"for",e[5]),G(t,"class","svelte-1vfj1mn")},m(e,i){S(e,t,i),M(t,n),M(t,r),M(t,s),M(s,o)},p(e,t){2&t&&L(n,e[1]),1&t&&i!==(i=`(shortcut: ${e[0]})`)&&L(o,i)},d(e){e&&I(t)}}}function bn(e){let t,n,r,s,o,i,c=e[1]&&mn(e);return{c(){t=T("div"),n=T("button"),r=D(e[0]),s=R(),c&&c.c(),G(n,"id",e[5]),n.disabled=e[2],G(n,"class","svelte-1vfj1mn"),G(t,"class","key svelte-1vfj1mn"),V(t,"active",e[3])},m(a,l){S(a,t,l),M(t,n),M(n,r),M(t,s),c&&c.m(t,null),o||(i=[F(window,"keydown",e[7]),F(n,"click",e[6])],o=!0)},p(e,s){let[o]=s;1&o&&L(r,e[0]),4&o&&(n.disabled=e[2]),e[1]?c?c.p(e,o):(c=mn(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),8&o&&V(t,"active",e[3])},i:a,o:a,d(e){e&&I(t),c&&c.d(),o=!1,d(i)}}}function xn(e,t,n){let r,{value:s}=t,{onPress:o=null}=t,{label:i=null}=t,{disable:a=!1}=t;const{disableHotkeys:c}=re("hotkeys");y(e,c,e=>n(9,r=e));let l=!1,u=`key-${s}`;function p(){n(3,l=!1)}function d(){n(3,l=!0),setTimeout(p,200),o&&setTimeout(o,1)}return e.$$set=e=>{"value"in e&&n(0,s=e.value),"onPress"in e&&n(8,o=e.onPress),"label"in e&&n(1,i=e.label),"disable"in e&&n(2,a=e.disable)},[s,i,a,l,c,u,d,function(e){r||a||e.ctrlKey||e.metaKey||e.key!=s||(e.preventDefault(),d())},o]}class _n extends Ne{constructor(e){super(),Te(this,e,xn,bn,h,{value:0,onPress:8,label:1,disable:2},gn)}}function wn(e){E(e,"svelte-1mppqmp",".move.svelte-1mppqmp{display:flex;flex-direction:row;cursor:pointer;margin-left:10px;color:#666}.move.svelte-1mppqmp:hover{color:#333}.move.active.svelte-1mppqmp{color:#111;font-weight:bold}.arg-field.svelte-1mppqmp{outline:none;font-family:monospace}")}function Pn(e){let t,n,r,s,o,i,c,l,u,p,h;return{c(){t=T("div"),n=T("span"),r=D(e[2]),s=R(),o=T("span"),o.textContent="(",i=R(),c=T("span"),l=R(),u=T("span"),u.textContent=")",G(c,"class","arg-field svelte-1mppqmp"),G(c,"contenteditable",""),G(t,"class","move svelte-1mppqmp"),V(t,"active",e[3])},m(a,d){var v;S(a,t,d),M(t,n),M(n,r),M(t,s),M(t,o),M(t,i),M(t,c),e[6](c),M(t,l),M(t,u),p||(h=[F(c,"focus",function(){f(e[0])&&e[0].apply(this,arguments)}),F(c,"blur",function(){f(e[1])&&e[1].apply(this,arguments)}),F(c,"keypress",(v=On,function(e){return e.stopPropagation(),v.call(this,e)})),F(c,"keydown",e[5]),F(t,"click",function(){f(e[0])&&e[0].apply(this,arguments)})],p=!0)},p(n,s){let[o]=s;e=n,4&o&&L(r,e[2]),8&o&&V(t,"active",e[3])},i:a,o:a,d(n){n&&I(t),e[6](null),p=!1,d(h)}}}const On=()=>{};function kn(e,t,n){let r,{Activate:s}=t,{Deactivate:o}=t,{name:i}=t,{active:a}=t;const c=te();var l;return l=()=>{a?r.focus():r.blur()},Z().$$.after_update.push(l),e.$$set=e=>{"Activate"in e&&n(0,s=e.Activate),"Deactivate"in e&&n(1,o=e.Deactivate),"name"in e&&n(2,i=e.name),"active"in e&&n(3,a=e.active)},[s,o,i,a,r,function(e){"Enter"==e.key&&(e.preventDefault(),function(){try{const e=r.innerText;let t=new Function(`return [${e}]`)();c("submit",t)}catch(e){c("error",e)}n(4,r.innerText="",r)}()),"Escape"==e.key&&(e.preventDefault(),o())},function(e){ie[e?"unshift":"push"](()=>{r=e,n(4,r)})}]}class Mn extends Ne{constructor(e){super(),Te(this,e,kn,Pn,h,{Activate:0,Deactivate:1,name:2,active:3},wn)}}function En(e){E(e,"svelte-smqssc",".move-error.svelte-smqssc{color:#a00;font-weight:bold}.wrapper.svelte-smqssc{display:flex;flex-direction:row;align-items:center}")}function $n(e){let t,n;return{c(){t=T("span"),n=D(e[2]),G(t,"class","move-error svelte-smqssc")},m(e,r){S(e,t,r),M(t,n)},p(e,t){4&t&&L(n,e[2])},d(e){e&&I(t)}}}function An(e){let t,n,r,s,o,i,a;r=new _n({props:{value:e[0],onPress:e[4]}}),o=new Mn({props:{Activate:e[4],Deactivate:e[5],name:e[1],active:e[3]}}),o.$on("submit",e[6]),o.$on("error",e[7]);let c=e[2]&&$n(e);return{c(){t=T("div"),n=T("div"),Se(r.$$.fragment),s=R(),Se(o.$$.fragment),i=R(),c&&c.c(),G(n,"class","wrapper svelte-smqssc")},m(e,l){S(e,t,l),M(t,n),Ie(r,n,null),M(n,s),Ie(o,n,null),M(t,i),c&&c.m(t,null),a=!0},p(e,n){let[s]=n;const i={};1&s&&(i.value=e[0]),r.$set(i);const a={};2&s&&(a.name=e[1]),8&s&&(a.active=e[3]),o.$set(a),e[2]?c?c.p(e,s):(c=$n(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){a||(Pe(r.$$.fragment,e),Pe(o.$$.fragment,e),a=!0)},o(e){Oe(r.$$.fragment,e),Oe(o.$$.fragment,e),a=!1},d(e){e&&I(t),Ce(r),Ce(o),c&&c.d()}}}function jn(e,t,n){let{shortcut:s}=t,{name:o}=t,{fn:i}=t;const{disableHotkeys:a}=re("hotkeys");let c="",l=!1;function u(){a.set(!1),n(2,c=""),n(3,l=!1)}return e.$$set=e=>{"shortcut"in e&&n(0,s=e.shortcut),"name"in e&&n(1,o=e.name),"fn"in e&&n(8,i=e.fn)},[s,o,c,l,function(){a.set(!0),n(3,l=!0)},u,function(e){n(2,c=""),u(),i.apply(this,e.detail)},function(e){n(2,c=e.detail),(0,r.g)(e.detail)},i]}class Sn extends Ne{constructor(e){super(),Te(this,e,jn,An,h,{shortcut:0,name:1,fn:8},En)}}function In(e){E(e,"svelte-9hauj9","ul.svelte-9hauj9{padding-left:0}li.svelte-9hauj9{list-style:none;margin:0;margin-bottom:5px}")}function Cn(e){let t,n,r,s,o,i,a,c,l,u,p,d,f;return r=new _n({props:{value:"1",onPress:e[0].reset,label:"reset"}}),i=new _n({props:{value:"2",onPress:e[2],label:"save"}}),l=new _n({props:{value:"3",onPress:e[3],label:"restore"}}),d=new _n({props:{value:".",onPress:e[1],label:"hide"}}),{c(){t=T("ul"),n=T("li"),Se(r.$$.fragment),s=R(),o=T("li"),Se(i.$$.fragment),a=R(),c=T("li"),Se(l.$$.fragment),u=R(),p=T("li"),Se(d.$$.fragment),G(n,"class","svelte-9hauj9"),G(o,"class","svelte-9hauj9"),G(c,"class","svelte-9hauj9"),G(p,"class","svelte-9hauj9"),G(t,"id","debug-controls"),G(t,"class","controls svelte-9hauj9")},m(e,h){S(e,t,h),M(t,n),Ie(r,n,null),M(t,s),M(t,o),Ie(i,o,null),M(t,a),M(t,c),Ie(l,c,null),M(t,u),M(t,p),Ie(d,p,null),f=!0},p(e,t){let[n]=t;const s={};1&n&&(s.onPress=e[0].reset),r.$set(s);const o={};2&n&&(o.onPress=e[1]),d.$set(o)},i(e){f||(Pe(r.$$.fragment,e),Pe(i.$$.fragment,e),Pe(l.$$.fragment,e),Pe(d.$$.fragment,e),f=!0)},o(e){Oe(r.$$.fragment,e),Oe(i.$$.fragment,e),Oe(l.$$.fragment,e),Oe(d.$$.fragment,e),f=!1},d(e){e&&I(t),Ce(r),Ce(i),Ce(l),Ce(d)}}}function Tn(e,t,n){let{client:o}=t,{ToggleVisibility:i}=t;return e.$$set=e=>{"client"in e&&n(0,o=e.client),"ToggleVisibility"in e&&n(1,i=e.ToggleVisibility)},[o,i,function(){const e=o.getState(),t=(0,s.stringify)({...e,_undo:[],_redo:[],deltalog:[]});window.localStorage.setItem("gamestate",t),window.localStorage.setItem("initialState",(0,s.stringify)(o.initialState))},function(){const e=window.localStorage.getItem("gamestate"),t=window.localStorage.getItem("initialState");if(null!==e&&null!==t){const n=(0,s.parse)(e),i=(0,s.parse)(t);o.store.dispatch((0,r.s)({state:n,initialState:i}))}}]}class Nn extends Ne{constructor(e){super(),Te(this,e,Tn,Cn,h,{client:0,ToggleVisibility:1},In)}}function Dn(e){E(e,"svelte-19aan9p",".player-box.svelte-19aan9p{display:flex;flex-direction:row}.player.svelte-19aan9p{cursor:pointer;text-align:center;width:30px;height:30px;line-height:30px;background:#eee;border:3px solid #fefefe;box-sizing:content-box;padding:0}.player.current.svelte-19aan9p{background:#555;color:#eee;font-weight:bold}.player.active.svelte-19aan9p{border:3px solid #ff7f50}")}function Rn(e,t,n){const r=e.slice();return r[7]=t[n],r}function Bn(e){let t,n,r,s,o,i,a=e[7]+"";function c(){return e[5](e[7])}return{c(){t=T("button"),n=D(a),r=R(),G(t,"class","player svelte-19aan9p"),G(t,"aria-label",s=e[4](e[7])),V(t,"current",e[7]==e[0].currentPlayer),V(t,"active",e[7]==e[1])},m(e,s){S(e,t,s),M(t,n),M(t,r),o||(i=F(t,"click",c),o=!0)},p(r,o){e=r,4&o&&a!==(a=e[7]+"")&&L(n,a),4&o&&s!==(s=e[4](e[7]))&&G(t,"aria-label",s),5&o&&V(t,"current",e[7]==e[0].currentPlayer),6&o&&V(t,"active",e[7]==e[1])},d(e){e&&I(t),o=!1,i()}}}function Fn(e){let t,n=e[2],r=[];for(let t=0;t<n.length;t+=1)r[t]=Bn(Rn(e,n,t));return{c(){t=T("div");for(let e=0;e<r.length;e+=1)r[e].c();G(t,"class","player-box svelte-19aan9p")},m(e,n){S(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,s){let[o]=s;if(31&o){let s;for(n=e[2],s=0;s<n.length;s+=1){const i=Rn(e,n,s);r[s]?r[s].p(i,o):(r[s]=Bn(i),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:a,o:a,d(e){e&&I(t),C(r,e)}}}function Gn(e,t,n){let{ctx:r}=t,{playerID:s}=t;const o=te();function i(e){o("change",e==s?{playerID:null}:{playerID:e})}let a;return e.$$set=e=>{"ctx"in e&&n(0,r=e.ctx),"playerID"in e&&n(1,s=e.playerID)},e.$$.update=()=>{1&e.$$.dirty&&n(2,a=r?[...Array(r.numPlayers).keys()].map(e=>e.toString()):[])},[r,s,a,i,function(e){const t=[];e==r.currentPlayer&&t.push("current"),e==s&&t.push("active");let n=`Player ${e}`;return t.length&&(n+=` (${t.join(", ")})`),n},e=>i(e)]}class Ln extends Ne{constructor(e){super(),Te(this,e,Gn,Fn,h,{ctx:0,playerID:1},Dn)}}function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}function Wn(e,t){return Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wn(e,t)}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jn(e){E(e,"svelte-146sq5f",".tree.svelte-146sq5f{--json-tree-font-family:monospace;--json-tree-font-size:14px;--json-tree-null-color:#757575}.label.svelte-146sq5f{margin-bottom:0;text-transform:none}h3.svelte-146sq5f{text-transform:uppercase}ul.svelte-146sq5f{padding-left:0}li.svelte-146sq5f{list-style:none;margin:0;margin-bottom:5px}")}function Kn(e,t,n){const r=e.slice();return r[11]=t[n][0],r[12]=t[n][1],r}function Yn(e){let t,n,r,s;return n=new Sn({props:{shortcut:e[8][e[11]],fn:e[12],name:e[11]}}),{c(){t=T("li"),Se(n.$$.fragment),r=R(),G(t,"class","svelte-146sq5f")},m(e,o){S(e,t,o),Ie(n,t,null),M(t,r),s=!0},p(e,t){const r={};16&t&&(r.shortcut=e[8][e[11]]),16&t&&(r.fn=e[12]),16&t&&(r.name=e[11]),n.$set(r)},i(e){s||(Pe(n.$$.fragment,e),s=!0)},o(e){Oe(n.$$.fragment,e),s=!1},d(e){e&&I(t),Ce(n)}}}function Xn(e){let t,n,r;return n=new Sn({props:{name:"endStage",shortcut:7,fn:e[5].endStage}}),{c(){t=T("li"),Se(n.$$.fragment),G(t,"class","svelte-146sq5f")},m(e,s){S(e,t,s),Ie(n,t,null),r=!0},p(e,t){const r={};32&t&&(r.fn=e[5].endStage),n.$set(r)},i(e){r||(Pe(n.$$.fragment,e),r=!0)},o(e){Oe(n.$$.fragment,e),r=!1},d(e){e&&I(t),Ce(n)}}}function Qn(e){let t,n,r;return n=new Sn({props:{name:"endTurn",shortcut:8,fn:e[5].endTurn}}),{c(){t=T("li"),Se(n.$$.fragment),G(t,"class","svelte-146sq5f")},m(e,s){S(e,t,s),Ie(n,t,null),r=!0},p(e,t){const r={};32&t&&(r.fn=e[5].endTurn),n.$set(r)},i(e){r||(Pe(n.$$.fragment,e),r=!0)},o(e){Oe(n.$$.fragment,e),r=!1},d(e){e&&I(t),Ce(n)}}}function Zn(e){let t,n,r;return n=new Sn({props:{name:"endPhase",shortcut:9,fn:e[5].endPhase}}),{c(){t=T("li"),Se(n.$$.fragment),G(t,"class","svelte-146sq5f")},m(e,s){S(e,t,s),Ie(n,t,null),r=!0},p(e,t){const r={};32&t&&(r.fn=e[5].endPhase),n.$set(r)},i(e){r||(Pe(n.$$.fragment,e),r=!0)},o(e){Oe(n.$$.fragment,e),r=!1},d(e){e&&I(t),Ce(n)}}}function er(e){let t,n,r,s,o,i,a,c,l,u,p,d,f,h,v,y,g,m,b,x,_,w,P,O,k,E,$,A,j,N,D,B,F,L;s=new Nn({props:{client:e[0],ToggleVisibility:e[2]}}),l=new Ln({props:{ctx:e[6],playerID:e[3]}}),l.$on("change",e[9]);let U=Object.entries(e[4]),z=[];for(let t=0;t<U.length;t+=1)z[t]=Yn(Kn(e,U,t));const q=e=>Oe(z[e],1,1,()=>{z[e]=null});let V=e[6].activePlayers&&e[5].endStage&&Xn(e),W=e[5].endTurn&&Qn(e),H=e[6].phase&&e[5].endPhase&&Zn(e);return E=new cn({props:{value:e[7]}}),D=new cn({props:{value:tr(e[6])}}),F=new yn({props:{clientManager:e[1]}}),{c(){t=T("section"),n=T("h3"),n.textContent="Controls",r=R(),Se(s.$$.fragment),o=R(),i=T("section"),a=T("h3"),a.textContent="Players",c=R(),Se(l.$$.fragment),u=R(),p=T("section"),d=T("h3"),d.textContent="Moves",f=R(),h=T("ul");for(let e=0;e<z.length;e+=1)z[e].c();v=R(),y=T("section"),g=T("h3"),g.textContent="Events",m=R(),b=T("ul"),V&&V.c(),x=R(),W&&W.c(),_=R(),H&&H.c(),w=R(),P=T("section"),O=T("h3"),O.textContent="G",k=R(),Se(E.$$.fragment),$=R(),A=T("section"),j=T("h3"),j.textContent="ctx",N=R(),Se(D.$$.fragment),B=R(),Se(F.$$.fragment),G(n,"class","svelte-146sq5f"),G(a,"class","svelte-146sq5f"),G(d,"class","svelte-146sq5f"),G(h,"class","svelte-146sq5f"),G(g,"class","svelte-146sq5f"),G(b,"class","svelte-146sq5f"),G(O,"class","label svelte-146sq5f"),G(P,"class","tree svelte-146sq5f"),G(j,"class","label svelte-146sq5f"),G(A,"class","tree svelte-146sq5f")},m(e,I){S(e,t,I),M(t,n),M(t,r),Ie(s,t,null),S(e,o,I),S(e,i,I),M(i,a),M(i,c),Ie(l,i,null),S(e,u,I),S(e,p,I),M(p,d),M(p,f),M(p,h);for(let e=0;e<z.length;e+=1)z[e].m(h,null);S(e,v,I),S(e,y,I),M(y,g),M(y,m),M(y,b),V&&V.m(b,null),M(b,x),W&&W.m(b,null),M(b,_),H&&H.m(b,null),S(e,w,I),S(e,P,I),M(P,O),M(P,k),Ie(E,P,null),S(e,$,I),S(e,A,I),M(A,j),M(A,N),Ie(D,A,null),S(e,B,I),Ie(F,e,I),L=!0},p(e,t){let[n]=t;const r={};1&n&&(r.client=e[0]),4&n&&(r.ToggleVisibility=e[2]),s.$set(r);const o={};if(64&n&&(o.ctx=e[6]),8&n&&(o.playerID=e[3]),l.$set(o),272&n){let t;for(U=Object.entries(e[4]),t=0;t<U.length;t+=1){const r=Kn(e,U,t);z[t]?(z[t].p(r,n),Pe(z[t],1)):(z[t]=Yn(r),z[t].c(),Pe(z[t],1),z[t].m(h,null))}for(_e(),t=U.length;t<z.length;t+=1)q(t);we()}e[6].activePlayers&&e[5].endStage?V?(V.p(e,n),96&n&&Pe(V,1)):(V=Xn(e),V.c(),Pe(V,1),V.m(b,x)):V&&(_e(),Oe(V,1,1,()=>{V=null}),we()),e[5].endTurn?W?(W.p(e,n),32&n&&Pe(W,1)):(W=Qn(e),W.c(),Pe(W,1),W.m(b,_)):W&&(_e(),Oe(W,1,1,()=>{W=null}),we()),e[6].phase&&e[5].endPhase?H?(H.p(e,n),96&n&&Pe(H,1)):(H=Zn(e),H.c(),Pe(H,1),H.m(b,null)):H&&(_e(),Oe(H,1,1,()=>{H=null}),we());const i={};128&n&&(i.value=e[7]),E.$set(i);const a={};64&n&&(a.value=tr(e[6])),D.$set(a);const c={};2&n&&(c.clientManager=e[1]),F.$set(c)},i(e){if(!L){Pe(s.$$.fragment,e),Pe(l.$$.fragment,e);for(let e=0;e<U.length;e+=1)Pe(z[e]);Pe(V),Pe(W),Pe(H),Pe(E.$$.fragment,e),Pe(D.$$.fragment,e),Pe(F.$$.fragment,e),L=!0}},o(e){Oe(s.$$.fragment,e),Oe(l.$$.fragment,e),z=z.filter(Boolean);for(let e=0;e<z.length;e+=1)Oe(z[e]);Oe(V),Oe(W),Oe(H),Oe(E.$$.fragment,e),Oe(D.$$.fragment,e),Oe(F.$$.fragment,e),L=!1},d(e){e&&I(t),Ce(s),e&&I(o),e&&I(i),Ce(l),e&&I(u),e&&I(p),C(z,e),e&&I(v),e&&I(y),V&&V.d(),W&&W.d(),H&&H.d(),e&&I(w),e&&I(P),Ce(E),e&&I($),e&&I(A),Ce(D),e&&I(B),Ce(F,e)}}}function tr(e){let t={};for(const n in e)n.startsWith("_")||(t[n]=e[n]);return t}function nr(e,t,n){let{client:r}=t,{clientManager:s}=t,{ToggleVisibility:o}=t;const i=function(e){var t,n={},r={},s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw o}}}}("mlia");try{for(s.s();!(t=s.n()).done;)r[t.value]=!0}catch(e){s.e(e)}finally{s.f()}var o=r,i=!0;for(var a in e){var c=a[0];if(o[c]){i=!1;break}o[c]=!0,n[a]=c}if(i)return n;o=r;var l=97;for(var u in n={},e){for(var p=String.fromCharCode(l);o[p];)l++,p=String.fromCharCode(l);o[p]=!0,n[u]=p}return n}(r.moves);let{playerID:a,moves:c,events:l}=r,u={},p={};return ee(r.subscribe(e=>{e&&n(7,({G:p,ctx:u}=e),p,n(6,u)),n(3,({playerID:a,moves:c,events:l}=r),a,n(4,c),n(5,l))})),e.$$set=e=>{"client"in e&&n(0,r=e.client),"clientManager"in e&&n(1,s=e.clientManager),"ToggleVisibility"in e&&n(2,o=e.ToggleVisibility)},[r,s,o,a,c,l,u,p,i,e=>s.switchPlayerID(e.detail.playerID)]}class rr extends Ne{constructor(e){super(),Te(this,e,nr,er,h,{client:0,clientManager:1,ToggleVisibility:2},Jn)}}function sr(e){E(e,"svelte-13qih23",".item.svelte-13qih23.svelte-13qih23{padding:10px}.item.svelte-13qih23.svelte-13qih23:not(:first-child){border-top:1px dashed #aaa}.item.svelte-13qih23 div.svelte-13qih23{float:right;text-align:right}")}function or(e){let t,n,r,s,o,i,c=JSON.stringify(e[1])+"";return{c(){t=T("div"),n=T("strong"),r=D(e[0]),s=R(),o=T("div"),i=D(c),G(o,"class","svelte-13qih23"),G(t,"class","item svelte-13qih23")},m(e,a){S(e,t,a),M(t,n),M(n,r),M(t,s),M(t,o),M(o,i)},p(e,t){let[n]=t;1&n&&L(r,e[0]),2&n&&c!==(c=JSON.stringify(e[1])+"")&&L(i,c)},i:a,o:a,d(e){e&&I(t)}}}function ir(e,t,n){let{name:r}=t,{value:s}=t;return e.$$set=e=>{"name"in e&&n(0,r=e.name),"value"in e&&n(1,s=e.value)},[r,s]}class ar extends Ne{constructor(e){super(),Te(this,e,ir,or,h,{name:0,value:1},sr)}}function cr(e){E(e,"svelte-1yzq5o8",".gameinfo.svelte-1yzq5o8{padding:10px}")}function lr(e){let t,n;return t=new ar({props:{name:"isConnected",value:e[1].isConnected}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.value=e[1].isConnected),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function ur(e){let t,n,r,s,o,i,a,c;n=new ar({props:{name:"matchID",value:e[0].matchID}}),s=new ar({props:{name:"playerID",value:e[0].playerID}}),i=new ar({props:{name:"isActive",value:e[1].isActive}});let l=e[0].multiplayer&&lr(e);return{c(){t=T("section"),Se(n.$$.fragment),r=R(),Se(s.$$.fragment),o=R(),Se(i.$$.fragment),a=R(),l&&l.c(),G(t,"class","gameinfo svelte-1yzq5o8")},m(e,u){S(e,t,u),Ie(n,t,null),M(t,r),Ie(s,t,null),M(t,o),Ie(i,t,null),M(t,a),l&&l.m(t,null),c=!0},p(e,r){let[o]=r;const a={};1&o&&(a.value=e[0].matchID),n.$set(a);const c={};1&o&&(c.value=e[0].playerID),s.$set(c);const u={};2&o&&(u.value=e[1].isActive),i.$set(u),e[0].multiplayer?l?(l.p(e,o),1&o&&Pe(l,1)):(l=lr(e),l.c(),Pe(l,1),l.m(t,null)):l&&(_e(),Oe(l,1,1,()=>{l=null}),we())},i(e){c||(Pe(n.$$.fragment,e),Pe(s.$$.fragment,e),Pe(i.$$.fragment,e),Pe(l),c=!0)},o(e){Oe(n.$$.fragment,e),Oe(s.$$.fragment,e),Oe(i.$$.fragment,e),Oe(l),c=!1},d(e){e&&I(t),Ce(n),Ce(s),Ce(i),l&&l.d()}}}function pr(e,t,n){let r,s=a,o=()=>(s(),s=v(i,e=>n(1,r=e)),i);e.$$.on_destroy.push(()=>s());let{client:i}=t;o();let{clientManager:c}=t,{ToggleVisibility:l}=t;return e.$$set=e=>{"client"in e&&o(n(0,i=e.client)),"clientManager"in e&&n(2,c=e.clientManager),"ToggleVisibility"in e&&n(3,l=e.ToggleVisibility)},[i,r,c,l]}class dr extends Ne{constructor(e){super(),Te(this,e,pr,ur,h,{client:0,clientManager:2,ToggleVisibility:3},cr)}}function fr(e){E(e,"svelte-6eza86",".turn-marker.svelte-6eza86{display:flex;justify-content:center;align-items:center;grid-column:1;background:#555;color:#eee;text-align:center;font-weight:bold;border:1px solid #888}")}function hr(e){let t,n;return{c(){t=T("div"),n=D(e[0]),G(t,"class","turn-marker svelte-6eza86"),G(t,"style",e[1])},m(e,r){S(e,t,r),M(t,n)},p(e,t){let[r]=t;1&r&&L(n,e[0])},i:a,o:a,d(e){e&&I(t)}}}function vr(e,t,n){let{turn:r}=t,{numEvents:s}=t;const o=`grid-row: span ${s}`;return e.$$set=e=>{"turn"in e&&n(0,r=e.turn),"numEvents"in e&&n(2,s=e.numEvents)},[r,o,s]}class yr extends Ne{constructor(e){super(),Te(this,e,vr,hr,h,{turn:0,numEvents:2},fr)}}function gr(e){E(e,"svelte-1t4xap",".phase-marker.svelte-1t4xap{grid-column:3;background:#555;border:1px solid #888;color:#eee;text-align:center;font-weight:bold;padding-top:10px;padding-bottom:10px;text-orientation:sideways;writing-mode:vertical-rl;line-height:30px;width:100%}")}function mr(e){let t,n,r=(e[0]||"")+"";return{c(){t=T("div"),n=D(r),G(t,"class","phase-marker svelte-1t4xap"),G(t,"style",e[1])},m(e,r){S(e,t,r),M(t,n)},p(e,t){let[s]=t;1&s&&r!==(r=(e[0]||"")+"")&&L(n,r)},i:a,o:a,d(e){e&&I(t)}}}function br(e,t,n){let{phase:r}=t,{numEvents:s}=t;const o=`grid-row: span ${s}`;return e.$$set=e=>{"phase"in e&&n(0,r=e.phase),"numEvents"in e&&n(2,s=e.numEvents)},[r,o,s]}class xr extends Ne{constructor(e){super(),Te(this,e,br,mr,h,{phase:0,numEvents:2},gr)}}function _r(e){let t;return{c(){t=T("div"),t.textContent=`${e[0]}`},m(e,n){S(e,t,n)},p:a,i:a,o:a,d(e){e&&I(t)}}}function wr(e,t,n){let{metadata:r}=t;const s=void 0!==r?JSON.stringify(r,null,4):"";return e.$$set=e=>{"metadata"in e&&n(1,r=e.metadata)},[s,r]}class Pr extends Ne{constructor(e){super(),Te(this,e,wr,_r,h,{metadata:1})}}function Or(e){E(e,"svelte-vajd9z",".log-event.svelte-vajd9z{grid-column:2;cursor:pointer;overflow:hidden;display:flex;flex-direction:column;justify-content:center;background:#fff;border:1px dotted #ccc;border-left:5px solid #ccc;padding:5px;text-align:center;color:#666;font-size:14px;min-height:25px;line-height:25px}.log-event.svelte-vajd9z:hover,.log-event.svelte-vajd9z:focus{border-style:solid;background:#eee}.log-event.pinned.svelte-vajd9z{border-style:solid;background:#eee;opacity:1}.args.svelte-vajd9z{text-align:left;white-space:pre-wrap}.player0.svelte-vajd9z{border-left-color:#ff851b}.player1.svelte-vajd9z{border-left-color:#7fdbff}.player2.svelte-vajd9z{border-left-color:#0074d9}.player3.svelte-vajd9z{border-left-color:#39cccc}.player4.svelte-vajd9z{border-left-color:#3d9970}.player5.svelte-vajd9z{border-left-color:#2ecc40}.player6.svelte-vajd9z{border-left-color:#01ff70}.player7.svelte-vajd9z{border-left-color:#ffdc00}.player8.svelte-vajd9z{border-left-color:#001f3f}.player9.svelte-vajd9z{border-left-color:#ff4136}.player10.svelte-vajd9z{border-left-color:#85144b}.player11.svelte-vajd9z{border-left-color:#f012be}.player12.svelte-vajd9z{border-left-color:#b10dc9}.player13.svelte-vajd9z{border-left-color:#111111}.player14.svelte-vajd9z{border-left-color:#aaaaaa}.player15.svelte-vajd9z{border-left-color:#dddddd}")}function kr(e){let t,n;return t=new Pr({props:{metadata:e[2]}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.metadata=e[2]),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Mr(e){let t,n,r;var s=e[3];function o(e){return{props:{metadata:e[2]}}}return s&&(t=new s(o(e))),{c(){t&&Se(t.$$.fragment),n=B()},m(e,s){t&&Ie(t,e,s),S(e,n,s),r=!0},p(e,r){const i={};if(4&r&&(i.metadata=e[2]),s!==(s=e[3])){if(t){_e();const e=t;Oe(e.$$.fragment,1,0,()=>{Ce(e,1)}),we()}s?(t=new s(o(e)),Se(t.$$.fragment),Pe(t.$$.fragment,1),Ie(t,n.parentNode,n)):t=null}else s&&t.$set(i)},i(e){r||(t&&Pe(t.$$.fragment,e),r=!0)},o(e){t&&Oe(t.$$.fragment,e),r=!1},d(e){e&&I(n),t&&Ce(t,e)}}}function Er(e){let t,n,r,s,o,i,a,c,l,u,p,f;const h=[Mr,kr],v=[];function y(e,t){return e[3]?0:1}return c=y(e),l=v[c]=h[c](e),{c(){t=T("button"),n=T("div"),r=D(e[4]),s=D("("),o=D(e[6]),i=D(")"),a=R(),l.c(),G(n,"class","args svelte-vajd9z"),G(t,"class","log-event player"+e[7]+" svelte-vajd9z"),V(t,"pinned",e[1])},m(l,d){S(l,t,d),M(t,n),M(n,r),M(n,s),M(n,o),M(n,i),M(t,a),v[c].m(t,null),u=!0,p||(f=[F(t,"click",e[9]),F(t,"mouseenter",e[10]),F(t,"focus",e[11]),F(t,"mouseleave",e[12]),F(t,"blur",e[13])],p=!0)},p(e,n){let[s]=n;(!u||16&s)&&L(r,e[4]);let o=c;c=y(e),c===o?v[c].p(e,s):(_e(),Oe(v[o],1,1,()=>{v[o]=null}),we(),l=v[c],l?l.p(e,s):(l=v[c]=h[c](e),l.c()),Pe(l,1),l.m(t,null)),2&s&&V(t,"pinned",e[1])},i(e){u||(Pe(l),u=!0)},o(e){Oe(l),u=!1},d(e){e&&I(t),v[c].d(),p=!1,d(f)}}}function $r(e,t,n){let{logIndex:r}=t,{action:s}=t,{pinned:o}=t,{metadata:i}=t,{metadataComponent:a}=t;const c=te(),l=s.payload.args,u=Array.isArray(l)?l.map(e=>JSON.stringify(e,null,2)).join(","):JSON.stringify(l,null,2)||"",p=s.payload.playerID;let d;switch(s.type){case"UNDO":d="undo";break;case"REDO":d="redo";default:d=s.payload.type}return e.$$set=e=>{"logIndex"in e&&n(0,r=e.logIndex),"action"in e&&n(8,s=e.action),"pinned"in e&&n(1,o=e.pinned),"metadata"in e&&n(2,i=e.metadata),"metadataComponent"in e&&n(3,a=e.metadataComponent)},[r,o,i,a,d,c,u,p,s,()=>c("click",{logIndex:r}),()=>c("mouseenter",{logIndex:r}),()=>c("mouseenter",{logIndex:r}),()=>c("mouseleave"),()=>c("mouseleave")]}class Ar extends Ne{constructor(e){super(),Te(this,e,$r,Er,h,{logIndex:0,action:8,pinned:1,metadata:2,metadataComponent:3},Or)}}function jr(e){let t;return{c(){t=N("path"),G(t,"d","M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z")},m(e,n){S(e,t,n)},p:a,d(e){e&&I(t)}}}function Sr(e){let t,n;const r=[{viewBox:"0 0 512 512"},e[0]];let s={$$slots:{default:[jr]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)s=l(s,r[e]);return t=new qe({props:s}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){let[s]=n;const o=1&s?Ae(r,[r[0],je(e[0])]):{};2&s&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Ir(e,t,n){return e.$$set=e=>{n(0,t=l(l({},t),m(e)))},[t=m(t)]}class Cr extends Ne{constructor(e){super(),Te(this,e,Ir,Sr,h,{})}}function Tr(e){E(e,"svelte-1a7time","div.svelte-1a7time{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:500px}")}function Nr(e){let t,n;return{c(){t=T("div"),n=D(e[0]),G(t,"alt",e[0]),G(t,"class","svelte-1a7time")},m(e,r){S(e,t,r),M(t,n)},p(e,r){let[s]=r;1&s&&L(n,e[0]),1&s&&G(t,"alt",e[0])},i:a,o:a,d(e){e&&I(t)}}}function Dr(e,t,n){let r,{action:s}=t;return e.$$set=e=>{"action"in e&&n(1,s=e.action)},e.$$.update=()=>{if(2&e.$$.dirty){const{type:e,args:t}=s.payload,o=(t||[]).join(",");n(0,r=`${e}(${o})`)}},[r,s]}class Rr extends Ne{constructor(e){super(),Te(this,e,Dr,Nr,h,{action:1},Tr)}}function Br(e){E(e,"svelte-ztcwsu","table.svelte-ztcwsu.svelte-ztcwsu{font-size:12px;border-collapse:collapse;border:1px solid #ddd;padding:0}tr.svelte-ztcwsu.svelte-ztcwsu{cursor:pointer}tr.svelte-ztcwsu:hover td.svelte-ztcwsu{background:#eee}tr.selected.svelte-ztcwsu td.svelte-ztcwsu{background:#eee}td.svelte-ztcwsu.svelte-ztcwsu{padding:10px;height:10px;line-height:10px;font-size:12px;border:none}th.svelte-ztcwsu.svelte-ztcwsu{background:#888;color:#fff;padding:10px;text-align:center}")}function Fr(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Gr(e){let t,n,r,s,o,i,a,c,l,u,p,f,h,v=e[10].value+"",y=e[10].visits+"";function g(){return e[6](e[10],e[12])}function m(){return e[7](e[12])}function b(){return e[8](e[10],e[12])}return l=new Rr({props:{action:e[10].parentAction}}),{c(){t=T("tr"),n=T("td"),r=D(v),s=R(),o=T("td"),i=D(y),a=R(),c=T("td"),Se(l.$$.fragment),u=R(),G(n,"class","svelte-ztcwsu"),G(o,"class","svelte-ztcwsu"),G(c,"class","svelte-ztcwsu"),G(t,"class","svelte-ztcwsu"),V(t,"clickable",e[1].length>0),V(t,"selected",e[12]===e[0])},m(e,d){S(e,t,d),M(t,n),M(n,r),M(t,s),M(t,o),M(o,i),M(t,a),M(t,c),Ie(l,c,null),M(t,u),p=!0,f||(h=[F(t,"click",g),F(t,"mouseout",m),F(t,"mouseover",b)],f=!0)},p(n,s){e=n,(!p||2&s)&&v!==(v=e[10].value+"")&&L(r,v),(!p||2&s)&&y!==(y=e[10].visits+"")&&L(i,y);const o={};2&s&&(o.action=e[10].parentAction),l.$set(o),2&s&&V(t,"clickable",e[1].length>0),1&s&&V(t,"selected",e[12]===e[0])},i(e){p||(Pe(l.$$.fragment,e),p=!0)},o(e){Oe(l.$$.fragment,e),p=!1},d(e){e&&I(t),Ce(l),f=!1,d(h)}}}function Lr(e){let t,n,r,s,o,i=e[1],a=[];for(let t=0;t<i.length;t+=1)a[t]=Gr(Fr(e,i,t));const c=e=>Oe(a[e],1,1,()=>{a[e]=null});return{c(){t=T("table"),n=T("thead"),n.innerHTML='<th class="svelte-ztcwsu">Value</th> \n    <th class="svelte-ztcwsu">Visits</th> \n    <th class="svelte-ztcwsu">Action</th>',r=R(),s=T("tbody");for(let e=0;e<a.length;e+=1)a[e].c();G(t,"class","svelte-ztcwsu")},m(e,i){S(e,t,i),M(t,n),M(t,r),M(t,s);for(let e=0;e<a.length;e+=1)a[e].m(s,null);o=!0},p(e,t){let[n]=t;if(15&n){let t;for(i=e[1],t=0;t<i.length;t+=1){const r=Fr(e,i,t);a[t]?(a[t].p(r,n),Pe(a[t],1)):(a[t]=Gr(r),a[t].c(),Pe(a[t],1),a[t].m(s,null))}for(_e(),t=i.length;t<a.length;t+=1)c(t);we()}},i(e){if(!o){for(let e=0;e<i.length;e+=1)Pe(a[e]);o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Oe(a[e]);o=!1},d(e){e&&I(t),C(a,e)}}}function Ur(e,t,n){let{root:r}=t,{selectedIndex:s=null}=t;const o=te();let i=[],a=[];function c(e,t){o("select",{node:e,selectedIndex:t})}function l(e,t){null===s&&o("preview",{node:e})}return e.$$set=e=>{"root"in e&&n(4,r=e.root),"selectedIndex"in e&&n(0,s=e.selectedIndex)},e.$$.update=()=>{if(48&e.$$.dirty){let e=r;for(n(5,i=[]);e.parent;){const t=e.parent,{type:n,args:r}=e.parentAction.payload,s=`${n}(${(r||[]).join(",")})`;i.push({parent:t,arrowText:s}),e=t}i.reverse(),n(1,a=[...r.children].sort((e,t)=>e.visits<t.visits?1:-1).slice(0,50))}},[s,a,c,l,r,i,(e,t)=>c(e,t),e=>l(null),(e,t)=>l(e)]}class zr extends Ne{constructor(e){super(),Te(this,e,Ur,Lr,h,{root:4,selectedIndex:0},Br)}}function qr(e){E(e,"svelte-1f0amz4",".visualizer.svelte-1f0amz4{display:flex;flex-direction:column;align-items:center;padding:50px}.preview.svelte-1f0amz4{opacity:0.5}.icon.svelte-1f0amz4{color:#777;width:32px;height:32px;margin-bottom:20px}")}function Vr(e,t,n){const r=e.slice();return r[9]=t[n].node,r[10]=t[n].selectedIndex,r[12]=n,r}function Wr(e){let t,n;return t=new zr({props:{root:e[9],selectedIndex:e[10]}}),t.$on("select",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[7](e[12],...n)}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(n,r){e=n;const s={};1&r&&(s.root=e[9]),1&r&&(s.selectedIndex=e[10]),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Hr(e){let t,n;return t=new zr({props:{root:e[9]}}),t.$on("select",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[5](e[12],...n)}),t.$on("preview",function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[6](e[12],...n)}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(n,r){e=n;const s={};1&r&&(s.root=e[9]),t.$set(s)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function Jr(e){let t,n,r,s,o,i=0!==e[12]&&function(){let e,t,n;return t=new Cr({}),{c(){e=T("div"),Se(t.$$.fragment),G(e,"class","icon svelte-1f0amz4")},m(r,s){S(r,e,s),Ie(t,e,null),n=!0},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(n){n&&I(e),Ce(t)}}}();const a=[Hr,Wr],c=[];function l(e,t){return e[12]===e[0].length-1?0:1}return r=l(e),s=c[r]=a[r](e),{c(){i&&i.c(),t=R(),n=T("section"),s.c()},m(e,s){i&&i.m(e,s),S(e,t,s),S(e,n,s),c[r].m(n,null),o=!0},p(e,t){let o=r;r=l(e),r===o?c[r].p(e,t):(_e(),Oe(c[o],1,1,()=>{c[o]=null}),we(),s=c[r],s?s.p(e,t):(s=c[r]=a[r](e),s.c()),Pe(s,1),s.m(n,null))},i(e){o||(Pe(i),Pe(s),o=!0)},o(e){Oe(i),Oe(s),o=!1},d(e){i&&i.d(e),e&&I(t),e&&I(n),c[r].d()}}}function Kr(e){let t,n,r,s,o,i;return n=new Cr({}),o=new zr({props:{root:e[1]}}),{c(){t=T("div"),Se(n.$$.fragment),r=R(),s=T("section"),Se(o.$$.fragment),G(t,"class","icon svelte-1f0amz4"),G(s,"class","preview svelte-1f0amz4")},m(e,a){S(e,t,a),Ie(n,t,null),S(e,r,a),S(e,s,a),Ie(o,s,null),i=!0},p(e,t){const n={};2&t&&(n.root=e[1]),o.$set(n)},i(e){i||(Pe(n.$$.fragment,e),Pe(o.$$.fragment,e),i=!0)},o(e){Oe(n.$$.fragment,e),Oe(o.$$.fragment,e),i=!1},d(e){e&&I(t),Ce(n),e&&I(r),e&&I(s),Ce(o)}}}function Yr(e){let t,n,r,s=e[0],o=[];for(let t=0;t<s.length;t+=1)o[t]=Jr(Vr(e,s,t));const i=e=>Oe(o[e],1,1,()=>{o[e]=null});let a=e[1]&&Kr(e);return{c(){t=T("div");for(let e=0;e<o.length;e+=1)o[e].c();n=R(),a&&a.c(),G(t,"class","visualizer svelte-1f0amz4")},m(e,s){S(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);M(t,n),a&&a.m(t,null),r=!0},p(e,r){let[c]=r;if(13&c){let r;for(s=e[0],r=0;r<s.length;r+=1){const i=Vr(e,s,r);o[r]?(o[r].p(i,c),Pe(o[r],1)):(o[r]=Jr(i),o[r].c(),Pe(o[r],1),o[r].m(t,n))}for(_e(),r=s.length;r<o.length;r+=1)i(r);we()}e[1]?a?(a.p(e,c),2&c&&Pe(a,1)):(a=Kr(e),a.c(),Pe(a,1),a.m(t,null)):a&&(_e(),Oe(a,1,1,()=>{a=null}),we())},i(e){if(!r){for(let e=0;e<s.length;e+=1)Pe(o[e]);Pe(a),r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Oe(o[e]);Oe(a),r=!1},d(e){e&&I(t),C(o,e),a&&a.d()}}}function Xr(e,t,n){let{metadata:r}=t,s=[],o=null;function i(e,t){let{node:r,selectedIndex:i}=e;n(1,o=null),n(0,s[t].selectedIndex=i,s),n(0,s=[...s.slice(0,t+1),{node:r}])}function a(e,t){let{node:r}=e;n(1,o=r)}return e.$$set=e=>{"metadata"in e&&n(4,r=e.metadata)},e.$$.update=()=>{16&e.$$.dirty&&n(0,s=[{node:r}])},[s,o,i,a,r,(e,t)=>i(t.detail,e),(e,t)=>a(t.detail),(e,t)=>i(t.detail,e)]}class Qr extends Ne{constructor(e){super(),Te(this,e,Xr,Yr,h,{metadata:4},qr)}}function Zr(e){E(e,"svelte-1pq5e4b",".gamelog.svelte-1pq5e4b{display:grid;grid-template-columns:30px 1fr 30px;grid-auto-rows:auto;grid-auto-flow:column}")}function es(e,t,n){const r=e.slice();return r[16]=t[n].phase,r[18]=n,r}function ts(e,t,n){const r=e.slice();return r[19]=t[n].action,r[20]=t[n].metadata,r[18]=n,r}function ns(e,t,n){const r=e.slice();return r[22]=t[n].turn,r[18]=n,r}function rs(e){let t,n;return t=new yr({props:{turn:e[22],numEvents:e[3][e[18]]}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.turn=e[22]),8&n&&(r.numEvents=e[3][e[18]]),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function ss(e){let t,n,r=e[18]in e[3]&&rs(e);return{c(){r&&r.c(),t=B()},m(e,s){r&&r.m(e,s),S(e,t,s),n=!0},p(e,n){e[18]in e[3]?r?(r.p(e,n),8&n&&Pe(r,1)):(r=rs(e),r.c(),Pe(r,1),r.m(t.parentNode,t)):r&&(_e(),Oe(r,1,1,()=>{r=null}),we())},i(e){n||(Pe(r),n=!0)},o(e){Oe(r),n=!1},d(e){r&&r.d(e),e&&I(t)}}}function os(e){let t,n;return t=new Ar({props:{pinned:e[18]===e[2],logIndex:e[18],action:e[19],metadata:e[20]}}),t.$on("click",e[5]),t.$on("mouseenter",e[6]),t.$on("mouseleave",e[7]),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.pinned=e[18]===e[2]),2&n&&(r.action=e[19]),2&n&&(r.metadata=e[20]),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function is(e){let t,n;return t=new xr({props:{phase:e[16],numEvents:e[4][e[18]]}}),{c(){Se(t.$$.fragment)},m(e,r){Ie(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.phase=e[16]),16&n&&(r.numEvents=e[4][e[18]]),t.$set(r)},i(e){n||(Pe(t.$$.fragment,e),n=!0)},o(e){Oe(t.$$.fragment,e),n=!1},d(e){Ce(t,e)}}}function as(e){let t,n,r=e[18]in e[4]&&is(e);return{c(){r&&r.c(),t=B()},m(e,s){r&&r.m(e,s),S(e,t,s),n=!0},p(e,n){e[18]in e[4]?r?(r.p(e,n),16&n&&Pe(r,1)):(r=is(e),r.c(),Pe(r,1),r.m(t.parentNode,t)):r&&(_e(),Oe(r,1,1,()=>{r=null}),we())},i(e){n||(Pe(r),n=!0)},o(e){Oe(r),n=!1},d(e){r&&r.d(e),e&&I(t)}}}function cs(e){let t,n,r,s,o,i,a=e[1],c=[];for(let t=0;t<a.length;t+=1)c[t]=ss(ns(e,a,t));const l=e=>Oe(c[e],1,1,()=>{c[e]=null});let u=e[1],p=[];for(let t=0;t<u.length;t+=1)p[t]=os(ts(e,u,t));const d=e=>Oe(p[e],1,1,()=>{p[e]=null});let f=e[1],h=[];for(let t=0;t<f.length;t+=1)h[t]=as(es(e,f,t));const v=e=>Oe(h[e],1,1,()=>{h[e]=null});return{c(){t=T("div");for(let e=0;e<c.length;e+=1)c[e].c();n=R();for(let e=0;e<p.length;e+=1)p[e].c();r=R();for(let e=0;e<h.length;e+=1)h[e].c();G(t,"class","gamelog svelte-1pq5e4b"),V(t,"pinned",e[2])},m(a,l){S(a,t,l);for(let e=0;e<c.length;e+=1)c[e].m(t,null);M(t,n);for(let e=0;e<p.length;e+=1)p[e].m(t,null);M(t,r);for(let e=0;e<h.length;e+=1)h[e].m(t,null);s=!0,o||(i=F(window,"keydown",e[8]),o=!0)},p(e,s){let[o]=s;if(10&o){let r;for(a=e[1],r=0;r<a.length;r+=1){const s=ns(e,a,r);c[r]?(c[r].p(s,o),Pe(c[r],1)):(c[r]=ss(s),c[r].c(),Pe(c[r],1),c[r].m(t,n))}for(_e(),r=a.length;r<c.length;r+=1)l(r);we()}if(230&o){let n;for(u=e[1],n=0;n<u.length;n+=1){const s=ts(e,u,n);p[n]?(p[n].p(s,o),Pe(p[n],1)):(p[n]=os(s),p[n].c(),Pe(p[n],1),p[n].m(t,r))}for(_e(),n=u.length;n<p.length;n+=1)d(n);we()}if(18&o){let n;for(f=e[1],n=0;n<f.length;n+=1){const r=es(e,f,n);h[n]?(h[n].p(r,o),Pe(h[n],1)):(h[n]=as(r),h[n].c(),Pe(h[n],1),h[n].m(t,null))}for(_e(),n=f.length;n<h.length;n+=1)v(n);we()}4&o&&V(t,"pinned",e[2])},i(e){if(!s){for(let e=0;e<a.length;e+=1)Pe(c[e]);for(let e=0;e<u.length;e+=1)Pe(p[e]);for(let e=0;e<f.length;e+=1)Pe(h[e]);s=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)Oe(c[e]);p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)Oe(p[e]);h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)Oe(h[e]);s=!1},d(e){e&&I(t),C(c,e),C(p,e),C(h,e),o=!1,i()}}}function ls(e,t,n){let r,s=a,i=()=>(s(),s=v(c,e=>n(10,r=e)),c);e.$$.on_destroy.push(()=>s());let{client:c}=t;i();const{secondaryPane:l}=re("secondaryPane"),u=(0,o.C)({game:c.game}),p=c.getInitialState();let d,{log:f}=r,h=null;function y(e){let t=p;for(let n=0;n<f.length;n++){const{action:r,automatic:s}=f[n];if(!s){if(t=u(t,r),0==e)break;e--}}return{G:t.G,ctx:t.ctx,plugins:t.plugins}}function g(){n(2,h=null),c.overrideGameState(null),l.set(null)}ee(g);let m={},b={};return e.$$set=e=>{"client"in e&&i(n(0,c=e.client))},e.$$.update=()=>{if(1538&e.$$.dirty){n(9,f=r.log),n(1,d=f.filter(e=>!e.automatic));let e=0,t=0;n(3,m={}),n(4,b={});for(let r=0;r<d.length;r++){const{action:s,payload:o,turn:i,phase:a}=d[r];t++,e++,r!=d.length-1&&d[r+1].turn==i||(n(3,m[r]=t,m),t=0),r!=d.length-1&&d[r+1].phase==a||(n(4,b[r]=e,b),e=0)}}},[c,d,h,m,b,function(e){const{logIndex:t}=e.detail,r=y(t),s=f.filter(e=>!e.automatic);if(c.overrideGameState(r),h==t)n(2,h=null),l.set(null);else{n(2,h=t);const{metadata:e}=s[t].action.payload;e&&l.set({component:Qr,metadata:e})}},function(e){const{logIndex:t}=e.detail;if(null===h){const e=y(t);c.overrideGameState(e)}},function(){null===h&&c.overrideGameState(null)},function(e){27==e.keyCode&&g()},f,r]}class us extends Ne{constructor(e){super(),Te(this,e,ls,cs,h,{client:0},Zr)}}function ps(e){E(e,"svelte-1fu900w","label.svelte-1fu900w{color:#666}.option.svelte-1fu900w{margin-bottom:20px}.value.svelte-1fu900w{font-weight:bold;color:#000}input[type='checkbox'].svelte-1fu900w{vertical-align:middle}")}function ds(e,t,n){const r=e.slice();return r[6]=t[n][0],r[7]=t[n][1],r[8]=t,r[9]=n,r}function fs(e){let t,n,r,s;function o(){e[5].call(t,e[6])}return{c(){t=T("input"),G(t,"id",n=e[3](e[6])),G(t,"type","checkbox"),G(t,"class","svelte-1fu900w")},m(n,i){S(n,t,i),t.checked=e[1][e[6]],r||(s=[F(t,"change",o),F(t,"change",e[2])],r=!0)},p(r,s){e=r,1&s&&n!==(n=e[3](e[6]))&&G(t,"id",n),3&s&&(t.checked=e[1][e[6]])},d(e){e&&I(t),r=!1,d(s)}}}function hs(e){let t,n,r,s,o,i,a,c,l,u=e[1][e[6]]+"";function p(){e[4].call(s,e[6])}return{c(){t=T("span"),n=D(u),r=R(),s=T("input"),G(t,"class","value svelte-1fu900w"),G(s,"id",o=e[3](e[6])),G(s,"type","range"),G(s,"min",i=e[7].range.min),G(s,"max",a=e[7].range.max)},m(o,i){S(o,t,i),M(t,n),S(o,r,i),S(o,s,i),U(s,e[1][e[6]]),c||(l=[F(s,"change",p),F(s,"input",p),F(s,"change",e[2])],c=!0)},p(t,r){e=t,3&r&&u!==(u=e[1][e[6]]+"")&&L(n,u),1&r&&o!==(o=e[3](e[6]))&&G(s,"id",o),1&r&&i!==(i=e[7].range.min)&&G(s,"min",i),1&r&&a!==(a=e[7].range.max)&&G(s,"max",a),3&r&&U(s,e[1][e[6]])},d(e){e&&I(t),e&&I(r),e&&I(s),c=!1,d(l)}}}function vs(e){let t,n,r,s,o,i,a=e[6]+"";function c(e,t){return e[7].range?hs:"boolean"==typeof e[7].value?fs:void 0}let l=c(e),u=l&&l(e);return{c(){t=T("div"),n=T("label"),r=D(a),o=R(),u&&u.c(),i=R(),G(n,"for",s=e[3](e[6])),G(n,"class","svelte-1fu900w"),G(t,"class","option svelte-1fu900w")},m(e,s){S(e,t,s),M(t,n),M(n,r),M(t,o),u&&u.m(t,null),M(t,i)},p(e,o){1&o&&a!==(a=e[6]+"")&&L(r,a),1&o&&s!==(s=e[3](e[6]))&&G(n,"for",s),l===(l=c(e))&&u?u.p(e,o):(u&&u.d(1),u=l&&l(e),u&&(u.c(),u.m(t,i)))},d(e){e&&I(t),u&&u.d()}}}function ys(e){let t,n=Object.entries(e[0].opts()),r=[];for(let t=0;t<n.length;t+=1)r[t]=vs(ds(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=B()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);S(e,t,n)},p(e,s){let[o]=s;if(15&o){let s;for(n=Object.entries(e[0].opts()),s=0;s<n.length;s+=1){const i=ds(e,n,s);r[s]?r[s].p(i,o):(r[s]=vs(i),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:a,o:a,d(e){C(r,e),e&&I(t)}}}function gs(e,t,n){let{bot:r}=t,s={};for(let[e,t]of Object.entries(r.opts()))s[e]=t.value;return e.$$set=e=>{"bot"in e&&n(0,r=e.bot)},[r,s,function(){for(let[e,t]of Object.entries(s))r.setOpt(e,t)},e=>"ai-option-"+e,function(e){var t;s[e]=""===(t=this.value)?null:+t,n(1,s)},function(e){s[e]=this.checked,n(1,s)}]}class ms extends Ne{constructor(e){super(),Te(this,e,gs,ys,h,{bot:0},ps)}}function bs(e){E(e,"svelte-fn09gm","ul.svelte-fn09gm{padding-left:0}li.svelte-fn09gm{list-style:none;margin:0;margin-bottom:5px}h3.svelte-fn09gm{text-transform:uppercase}label.svelte-fn09gm{color:#666}input[type='checkbox'].svelte-fn09gm{vertical-align:middle}")}function xs(e,t,n){const r=e.slice();return r[7]=t[n],r}function _s(e){let t,n,r;return{c(){t=T("p"),t.textContent="No bots available.",n=R(),r=T("p"),r.innerHTML='Follow the instructions\n        <a href="https://boardgame.io/documentation/#/tutorial?id=bots" target="_blank">here</a>\n        to set up bots.'},m(e,s){S(e,t,s),S(e,n,s),S(e,r,s)},p:a,i:a,o:a,d(e){e&&I(t),e&&I(n),e&&I(r)}}}function ws(e){let t;return{c(){t=T("p"),t.textContent="The bot debugger is only available in singleplayer mode."},m(e,n){S(e,t,n)},p:a,i:a,o:a,d(e){e&&I(t)}}}function Ps(e){let t,n,r,s,o,i,a,c,l,u,p,f,h,v,y,g,m,b,x,_,w,P,O,k=Object.keys(e[7].opts()).length;i=new _n({props:{value:"1",onPress:e[13],label:"reset"}}),l=new _n({props:{value:"2",onPress:e[11],label:"play"}}),f=new _n({props:{value:"3",onPress:e[12],label:"simulate"}});let E=Object.keys(e[8]),$=[];for(let t=0;t<E.length;t+=1)$[t]=Os(xs(e,E,t));let A=k&&ks(e),j=(e[5]||e[3])&&Ms(e);return{c(){t=T("section"),n=T("h3"),n.textContent="Controls",r=R(),s=T("ul"),o=T("li"),Se(i.$$.fragment),a=R(),c=T("li"),Se(l.$$.fragment),u=R(),p=T("li"),Se(f.$$.fragment),h=R(),v=T("section"),y=T("h3"),y.textContent="Bot",g=R(),m=T("select");for(let e=0;e<$.length;e+=1)$[e].c();b=R(),A&&A.c(),x=R(),j&&j.c(),_=B(),G(n,"class","svelte-fn09gm"),G(o,"class","svelte-fn09gm"),G(c,"class","svelte-fn09gm"),G(p,"class","svelte-fn09gm"),G(s,"class","svelte-fn09gm"),G(y,"class","svelte-fn09gm"),void 0===e[4]&&pe(()=>e[17].call(m))},m(d,k){S(d,t,k),M(t,n),M(t,r),M(t,s),M(s,o),Ie(i,o,null),M(s,a),M(s,c),Ie(l,c,null),M(s,u),M(s,p),Ie(f,p,null),S(d,h,k),S(d,v,k),M(v,y),M(v,g),M(v,m);for(let e=0;e<$.length;e+=1)$[e].m(m,null);z(m,e[4]),S(d,b,k),A&&A.m(d,k),S(d,x,k),j&&j.m(d,k),S(d,_,k),w=!0,P||(O=[F(m,"change",e[17]),F(m,"change",e[10])],P=!0)},p(e,t){if(256&t){let n;for(E=Object.keys(e[8]),n=0;n<E.length;n+=1){const r=xs(e,E,n);$[n]?$[n].p(r,t):($[n]=Os(r),$[n].c(),$[n].m(m,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=E.length}272&t&&z(m,e[4]),128&t&&(k=Object.keys(e[7].opts()).length),k?A?(A.p(e,t),128&t&&Pe(A,1)):(A=ks(e),A.c(),Pe(A,1),A.m(x.parentNode,x)):A&&(_e(),Oe(A,1,1,()=>{A=null}),we()),e[5]||e[3]?j?j.p(e,t):(j=Ms(e),j.c(),j.m(_.parentNode,_)):j&&(j.d(1),j=null)},i(e){w||(Pe(i.$$.fragment,e),Pe(l.$$.fragment,e),Pe(f.$$.fragment,e),Pe(A),w=!0)},o(e){Oe(i.$$.fragment,e),Oe(l.$$.fragment,e),Oe(f.$$.fragment,e),Oe(A),w=!1},d(e){e&&I(t),Ce(i),Ce(l),Ce(f),e&&I(h),e&&I(v),C($,e),e&&I(b),A&&A.d(e),e&&I(x),j&&j.d(e),e&&I(_),P=!1,d(O)}}}function Os(e){let t,n,r=e[7]+"";return{c(){t=T("option"),n=D(r),t.__value=e[7],t.value=t.__value},m(e,r){S(e,t,r),M(t,n)},p:a,d(e){e&&I(t)}}}function ks(e){let t,n,r,s,o,i,a,c,l,u,p;return c=new ms({props:{bot:e[7]}}),{c(){t=T("section"),n=T("h3"),n.textContent="Options",r=R(),s=T("label"),s.textContent="debug",o=R(),i=T("input"),a=R(),Se(c.$$.fragment),G(n,"class","svelte-fn09gm"),G(s,"for","ai-option-debug"),G(s,"class","svelte-fn09gm"),G(i,"id","ai-option-debug"),G(i,"type","checkbox"),G(i,"class","svelte-fn09gm")},m(d,f){S(d,t,f),M(t,n),M(t,r),M(t,s),M(t,o),M(t,i),i.checked=e[1],M(t,a),Ie(c,t,null),l=!0,u||(p=[F(i,"change",e[18]),F(i,"change",e[9])],u=!0)},p(e,t){2&t&&(i.checked=e[1]);const n={};128&t&&(n.bot=e[7]),c.$set(n)},i(e){l||(Pe(c.$$.fragment,e),l=!0)},o(e){Oe(c.$$.fragment,e),l=!1},d(e){e&&I(t),Ce(c),u=!1,d(p)}}}function Ms(e){let t,n,r,s,o=e[2]&&e[2]<1&&Es(e),i=e[5]&&$s(e);return{c(){t=T("section"),n=T("h3"),n.textContent="Result",r=R(),o&&o.c(),s=R(),i&&i.c(),G(n,"class","svelte-fn09gm")},m(e,a){S(e,t,a),M(t,n),M(t,r),o&&o.m(t,null),M(t,s),i&&i.m(t,null)},p(e,n){e[2]&&e[2]<1?o?o.p(e,n):(o=Es(e),o.c(),o.m(t,s)):o&&(o.d(1),o=null),e[5]?i?i.p(e,n):(i=$s(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&I(t),o&&o.d(),i&&i.d()}}}function Es(e){let t;return{c(){t=T("progress"),t.value=e[2]},m(e,n){S(e,t,n)},p(e,n){4&n&&(t.value=e[2])},d(e){e&&I(t)}}}function $s(e){let t,n,r,s,o,i,a,c,l=JSON.stringify(e[6])+"";return{c(){t=T("ul"),n=T("li"),r=D("Action: "),s=D(e[5]),o=R(),i=T("li"),a=D("Args: "),c=D(l),G(n,"class","svelte-fn09gm"),G(i,"class","svelte-fn09gm"),G(t,"class","svelte-fn09gm")},m(e,l){S(e,t,l),M(t,n),M(n,r),M(n,s),M(t,o),M(t,i),M(i,a),M(i,c)},p(e,t){32&t&&L(s,e[5]),64&t&&l!==(l=JSON.stringify(e[6])+"")&&L(c,l)},d(e){e&&I(t)}}}function As(e){let t,n,r,s,o,i;const a=[Ps,ws,_s],c=[];function l(e,t){return e[0].game.ai&&!e[0].multiplayer?0:e[0].multiplayer?1:2}return n=l(e),r=c[n]=a[n](e),{c(){t=T("section"),r.c()},m(r,a){S(r,t,a),c[n].m(t,null),s=!0,o||(i=F(window,"keydown",e[14]),o=!0)},p(e,s){let[o]=s,i=n;n=l(e),n===i?c[n].p(e,o):(_e(),Oe(c[i],1,1,()=>{c[i]=null}),we(),r=c[n],r?r.p(e,o):(r=c[n]=a[n](e),r.c()),Pe(r,1),r.m(t,null))},i(e){s||(Pe(r),s=!0)},o(e){Oe(r),s=!1},d(e){e&&I(t),c[n].d(),o=!1,i()}}}function js(e,t,n){let{client:r}=t,{clientManager:s}=t,{ToggleVisibility:o}=t;const{secondaryPane:a}=re("secondaryPane"),c={MCTS:i.M,Random:i.R};let l=!1,u=null,p=0,d=null;const f=e=>{let{iterationCounter:t,numIterations:r,metadata:s}=e;n(3,p=t),n(2,u=t/r),d=s,l&&d&&a.set({component:Qr,metadata:d})};let h,v,y,g;function m(){r.overrideGameState(null),a.set(null),n(1,l=!1)}return r.game.ai&&(h=new i.M({game:r.game,enumerate:r.game.ai.enumerate,iterationCallback:f}),h.setOpt("async",!0)),ee(m),e.$$set=e=>{"client"in e&&n(0,r=e.client),"clientManager"in e&&n(15,s=e.clientManager),"ToggleVisibility"in e&&n(16,o=e.ToggleVisibility)},[r,l,u,p,v,y,g,h,c,function(){l&&d?a.set({component:Qr,metadata:d}):a.set(null)},function(){n(7,h=new(0,c[v])({game:r.game,enumerate:r.game.ai.enumerate,iterationCallback:f})),h.setOpt("async",!0),n(5,y=null),d=null,a.set(null),n(3,p=0)},async function(){n(5,y=null),d=null,n(3,p=0);const e=await(0,i.S)(r,h);e&&(n(5,y=e.payload.type),n(6,g=e.payload.args))},function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return n(5,y=null),d=null,n(3,p=0),(async()=>{for(let n=0;n<e&&await(0,i.S)(r,h);n++)await new Promise(e=>setTimeout(e,t))})()},function(){r.reset(),n(5,y=null),d=null,n(3,p=0),m()},function(e){27==e.keyCode&&m()},s,o,function(){v=q(this),n(4,v),n(8,c)},function(){l=this.checked,n(1,l)}]}class Ss extends Ne{constructor(e){super(),Te(this,e,js,As,h,{client:0,clientManager:15,ToggleVisibility:16},bs)}}function Is(e){E(e,"svelte-8ymctk",".debug-panel.svelte-8ymctk.svelte-8ymctk{position:fixed;color:#555;font-family:monospace;right:0;top:0;height:100%;font-size:14px;opacity:0.9;z-index:99999}.panel.svelte-8ymctk.svelte-8ymctk{display:flex;position:relative;flex-direction:row;height:100%}.visibility-toggle.svelte-8ymctk.svelte-8ymctk{position:absolute;box-sizing:border-box;top:7px;border:1px solid #ccc;border-radius:5px;width:48px;height:48px;padding:8px;background:white;color:#555;box-shadow:0 0 5px rgba(0, 0, 0, 0.2)}.visibility-toggle.svelte-8ymctk.svelte-8ymctk:hover,.visibility-toggle.svelte-8ymctk.svelte-8ymctk:focus{background:#eee}.opener.svelte-8ymctk.svelte-8ymctk{right:10px}.closer.svelte-8ymctk.svelte-8ymctk{left:-326px}@keyframes svelte-8ymctk-rotateFromZero{from{transform:rotateZ(0deg)}to{transform:rotateZ(180deg)}}.icon.svelte-8ymctk.svelte-8ymctk{display:flex;height:100%;animation:svelte-8ymctk-rotateFromZero 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s 1\n      normal forwards}.closer.svelte-8ymctk .icon.svelte-8ymctk{animation-direction:reverse}.pane.svelte-8ymctk.svelte-8ymctk{flex-grow:2;overflow-x:hidden;overflow-y:scroll;background:#fefefe;padding:20px;border-left:1px solid #ccc;box-shadow:-1px 0 5px rgba(0, 0, 0, 0.2);box-sizing:border-box;width:280px}.secondary-pane.svelte-8ymctk.svelte-8ymctk{background:#fefefe;overflow-y:scroll}.debug-panel.svelte-8ymctk button,.debug-panel.svelte-8ymctk select{cursor:pointer;font-size:14px;font-family:monospace}.debug-panel.svelte-8ymctk select{background:#eee;border:1px solid #bbb;color:#555;padding:3px;border-radius:3px}.debug-panel.svelte-8ymctk section{margin-bottom:20px}.debug-panel.svelte-8ymctk .screen-reader-only{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}")}function Cs(e){let t,n,r,s,o,i,c,l,u,p=e[10]&&function(e){let t,n,r,s,o,i,c,l;return r=new Je({}),{c(){t=T("button"),n=T("span"),Se(r.$$.fragment),G(n,"class","icon svelte-8ymctk"),G(n,"aria-hidden","true"),G(t,"class","visibility-toggle closer svelte-8ymctk"),G(t,"title","Hide Debug Panel")},m(s,o){S(s,t,o),M(t,n),Ie(r,n,null),i=!0,c||(l=F(t,"click",e[9]),c=!0)},p:a,i(n){i||(Pe(r.$$.fragment,n),pe(()=>{o&&o.end(1),s=Me(t,e[14],{key:"toggle"}),s.start()}),i=!0)},o(n){Oe(r.$$.fragment,n),s&&s.invalidate(),o=Ee(t,e[13],{key:"toggle"}),i=!1},d(e){e&&I(t),Ce(r),e&&o&&o.end(),c=!1,l()}}}(e);r=new et({props:{panes:e[6],pane:e[2]}}),r.$on("change",e[8]);var d=e[6][e[2]].component;function f(e){return{props:{client:e[4],clientManager:e[0],ToggleVisibility:e[9]}}}d&&(i=new d(f(e)));let h=e[5]&&Ns(e);return{c(){t=T("div"),p&&p.c(),n=R(),Se(r.$$.fragment),s=R(),o=T("div"),i&&Se(i.$$.fragment),c=R(),h&&h.c(),G(o,"class","pane svelte-8ymctk"),G(o,"role","region"),G(o,"aria-label",e[2]),G(o,"tabindex","-1"),G(t,"class","panel svelte-8ymctk")},m(a,l){S(a,t,l),p&&p.m(t,null),M(t,n),Ie(r,t,null),M(t,s),M(t,o),i&&Ie(i,o,null),e[16](o),M(t,c),h&&h.m(t,null),u=!0},p(n,s){(e=n)[10]&&p.p(e,s);const a={};4&s&&(a.pane=e[2]),r.$set(a);const c={};if(16&s&&(c.client=e[4]),1&s&&(c.clientManager=e[0]),d!==(d=e[6][e[2]].component)){if(i){_e();const e=i;Oe(e.$$.fragment,1,0,()=>{Ce(e,1)}),we()}d?(i=new d(f(e)),Se(i.$$.fragment),Pe(i.$$.fragment,1),Ie(i,o,null)):i=null}else d&&i.$set(c);(!u||4&s)&&G(o,"aria-label",e[2]),e[5]?h?(h.p(e,s),32&s&&Pe(h,1)):(h=Ns(e),h.c(),Pe(h,1),h.m(t,null)):h&&(_e(),Oe(h,1,1,()=>{h=null}),we())},i(n){u||(Pe(p),Pe(r.$$.fragment,n),i&&Pe(i.$$.fragment,n),Pe(h),pe(()=>{l||(l=$e(t,Fe,{x:400,...e[12]},!0)),l.run(1)}),u=!0)},o(n){Oe(p),Oe(r.$$.fragment,n),i&&Oe(i.$$.fragment,n),Oe(h),l||(l=$e(t,Fe,{x:400,...e[12]},!1)),l.run(0),u=!1},d(n){n&&I(t),p&&p.d(),Ce(r),i&&Ce(i),e[16](null),h&&h.d(),n&&l&&l.end()}}}function Ts(e){let t,n,r=e[10]&&function(e){let t,n,r,s,o,i,c,l;return r=new Je({}),{c(){t=T("button"),n=T("span"),Se(r.$$.fragment),G(n,"class","icon svelte-8ymctk"),G(n,"aria-hidden","true"),G(t,"class","visibility-toggle opener svelte-8ymctk"),G(t,"title","Show Debug Panel")},m(s,o){S(s,t,o),M(t,n),Ie(r,n,null),i=!0,c||(l=F(t,"click",e[9]),c=!0)},p:a,i(n){i||(Pe(r.$$.fragment,n),pe(()=>{o&&o.end(1),s=Me(t,e[14],{key:"toggle"}),s.start()}),i=!0)},o(n){Oe(r.$$.fragment,n),s&&s.invalidate(),o=Ee(t,e[13],{key:"toggle"}),i=!1},d(e){e&&I(t),Ce(r),e&&o&&o.end(),c=!1,l()}}}(e);return{c(){r&&r.c(),t=B()},m(e,s){r&&r.m(e,s),S(e,t,s),n=!0},p(e,t){e[10]&&r.p(e,t)},i(e){n||(Pe(r),n=!0)},o(e){Oe(r),n=!1},d(e){r&&r.d(e),e&&I(t)}}}function Ns(e){let t,n,r;var s=e[5].component;function o(e){return{props:{metadata:e[5].metadata}}}return s&&(n=new s(o(e))),{c(){t=T("div"),n&&Se(n.$$.fragment),G(t,"class","secondary-pane svelte-8ymctk")},m(e,s){S(e,t,s),n&&Ie(n,t,null),r=!0},p(e,r){const i={};if(32&r&&(i.metadata=e[5].metadata),s!==(s=e[5].component)){if(n){_e();const e=n;Oe(e.$$.fragment,1,0,()=>{Ce(e,1)}),we()}s?(n=new s(o(e)),Se(n.$$.fragment),Pe(n.$$.fragment,1),Ie(n,t,null)):n=null}else s&&n.$set(i)},i(e){r||(n&&Pe(n.$$.fragment,e),r=!0)},o(e){n&&Oe(n.$$.fragment,e),r=!1},d(e){e&&I(t),n&&Ce(n)}}}function Ds(e){let t,n,r,s,o,i;const a=[Ts,Cs],c=[];function l(e,t){return e[3]?1:0}return n=l(e),r=c[n]=a[n](e),{c(){t=T("section"),r.c(),G(t,"aria-label","boardgame.io Debug Panel"),G(t,"class","debug-panel svelte-8ymctk")},m(r,a){S(r,t,a),c[n].m(t,null),s=!0,o||(i=F(window,"keypress",e[11]),o=!0)},p(e,s){let[o]=s,i=n;n=l(e),n===i?c[n].p(e,o):(_e(),Oe(c[i],1,1,()=>{c[i]=null}),we(),r=c[n],r?r.p(e,o):(r=c[n]=a[n](e),r.c()),Pe(r,1),r.m(t,null))},i(e){s||(Pe(r),s=!0)},o(e){Oe(r),s=!1},d(e){e&&I(t),c[n].d(),o=!1,i()}}}function Rs(e,t,n){let r,s,o,i=a,c=()=>(i(),i=v(u,e=>n(15,s=e)),u);e.$$.on_destroy.push(()=>i());let{clientManager:u}=t;c();const p={main:{label:"Main",shortcut:"m",component:rr},log:{label:"Log",shortcut:"l",component:us},info:{label:"Info",shortcut:"i",component:dr},ai:{label:"AI",shortcut:"a",component:Ss}},d=Re(!1),h=Re(null);let g;y(e,h,e=>n(5,o=e)),ne("hotkeys",{disableHotkeys:d}),ne("secondaryPane",{secondaryPane:h});let m="main";function b(){n(3,_=!_)}const x=s.client.debugOpt;let _=!x||!x.collapseOnLoad;const w=!x||!x.hideToggleButton,P={duration:150,easing:Be},[O,k]=function(e){var{fallback:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["fallback"]);const r=new Map,s=new Map;function o(e,r,s){return(o,i)=>(e.set(i.key,{rect:o.getBoundingClientRect()}),()=>{if(r.has(i.key)){const{rect:e}=r.get(i.key);return r.delete(i.key),function(e,t,r){const{delay:s=0,duration:o=e=>30*Math.sqrt(e),easing:i=Be}=l(l({},n),r),a=t.getBoundingClientRect(),c=e.left-a.left,u=e.top-a.top,p=e.width/a.width,d=e.height/a.height,h=Math.sqrt(c*c+u*u),v=getComputedStyle(t),y="none"===v.transform?"":v.transform,g=+v.opacity;return{delay:s,duration:f(o)?o(h):o,easing:i,css:(e,t)=>`\n\t\t\t\topacity: ${e*g};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${y} translate(${t*c}px,${t*u}px) scale(${e+(1-e)*p}, ${e+(1-e)*d});\n\t\t\t`}}(e,o,i)}return e.delete(i.key),t&&t(o,i,s)})}return[o(s,r,!1),o(r,s,!0)]}(P);return e.$$set=e=>{"clientManager"in e&&c(n(0,u=e.clientManager))},e.$$.update=()=>{32768&e.$$.dirty&&n(4,r=s.client)},[u,g,m,_,r,o,p,h,function(e){n(2,m=e.detail),g.focus()},b,w,function(e){"."!=e.key?_&&Object.entries(p).forEach(t=>{let[r,{shortcut:s}]=t;e.key==s&&n(2,m=r)}):b()},P,O,k,s,function(e){ie[e?"unshift":"push"](()=>{g=e,n(1,g)})}]}t.D=class extends Ne{constructor(e){super(),Te(this,e,Rs,Ds,h,{clientManager:0},Is)}}},3637(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.R=t.M=t.B=void 0,t.S=async function(e,t){const n=e.store.getState();let r=n.ctx.currentPlayer;n.ctx.activePlayers&&(r=Object.keys(n.ctx.activePlayers)[0]);const{action:s,metadata:o}=await t.play(n,r);if(s){const t={...s,payload:{...s.payload,metadata:o}};return e.store.dispatch(t),t}},t.a=async function(e){let{game:t,bots:n,state:s,depth:o}=e;void 0===o&&(o=1e4);const a=(0,r.C)({game:t});let c=null,l=0;for(;void 0===s.ctx.gameover&&l<o;){let e=s.ctx.currentPlayer;s.ctx.activePlayers&&(e=Object.keys(s.ctx.activePlayers)[0]);const t=n instanceof i?n:n[e],r=await t.play(s,e);if(!r.action)break;c=r.metadata,s=a(s,r.action),l++}return{state:s,metadata:c}},n(2791);var r=n(2591),s=n(9896),o=n(9458);class i{constructor(e){let{enumerate:t,seed:n}=e;this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt(e){let{key:t,range:n,initial:r}=e;this._opts[t]={range:n,value:r}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,n){return this.enumerateFn(e,t,n).map(e=>"payload"in e?e:"move"in e?(0,s.B)(e.move,e.args,n):"event"in e?(0,s.q)(e.event,e.args,n):void 0)}random(e){let t;if(void 0!==this.seed){const e=this.prngstate?"":this.seed,n=(0,o.a)(e,this.prngstate);t=n(),this.prngstate=n.state()}else t=Math.random();return e?Array.isArray(e)?e[Math.floor(t*e.length)]:Math.floor(t*e):t}}t.B=i,t.M=class extends i{constructor(e){let{enumerate:t,seed:n,objectives:s,game:o,iterations:i,playoutDepth:a,iterationCallback:c}=e;super({enumerate:t,seed:n}),void 0===s&&(s=()=>({})),this.objectives=s,this.iterationCallback=c||(()=>{}),this.reducer=(0,r.C)({game:o}),this.iterations=i,this.playoutDepth=a,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:"number"==typeof i?i:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:"number"==typeof a?a:50,range:{min:1,max:100}})}createNode(e){let{state:t,parentAction:n,parent:r,playerID:s}=e;const{G:o,ctx:i}=t;let a=[],c=[];if(void 0!==s)a=this.enumerate(o,i,s),c=this.objectives(o,i,s);else if(i.activePlayers)for(const e in i.activePlayers)a.push(...this.enumerate(o,i,e)),c.push(this.objectives(o,i,e));else a=this.enumerate(o,i,i.currentPlayer),c=this.objectives(o,i,i.currentPlayer);return{state:t,parent:r,parentAction:n,actions:a,objectives:c,children:[],visits:0,value:0}}select(e){if(e.actions.length>0)return e;if(0===e.children.length)return e;let t=null,n=0;for(const r of e.children){const s=r.visits+Number.EPSILON,o=r.value/s+Math.sqrt(2*Math.log(e.visits)/s);(null==t||o>n)&&(n=o,t=r)}return this.select(t)}expand(e){const t=e.actions;if(0===t.length||void 0!==e.state.ctx.gameover)return e;const n=this.random(t.length),r=t[n];e.actions.splice(n,1);const s=this.reducer(e.state,r),o=this.createNode({state:s,parentAction:r,parent:e});return e.children.push(o),o}playout(e){let{state:t}=e,n=this.getOpt("playoutDepth");"function"==typeof this.playoutDepth&&(n=this.playoutDepth(t.G,t.ctx));for(let e=0;e<n&&void 0===t.ctx.gameover;e++){const{G:e,ctx:n}=t;let r=n.currentPlayer;n.activePlayers&&(r=Object.keys(n.activePlayers)[0]);const s=this.enumerate(e,n,r),o=this.objectives(e,n,r),i=Object.keys(o).reduce((t,r)=>{const s=o[r];return s.checker(e,n)?t+s.weight:t},0);if(i>0)return{score:i};if(!s||0===s.length)return;const a=this.random(s.length);t=this.reducer(t,s[a])}return t.ctx.gameover}backpropagate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.visits++,void 0!==t.score&&(e.value+=t.score),!0===t.draw&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){const n=this.createNode({state:e,playerID:t});let r=this.getOpt("iterations");"function"==typeof this.iterations&&(r=this.iterations(e.G,e.ctx));const s=()=>{let e=null;for(const t of n.children)(null==e||t.visits>e.visits)&&(e=t);return{action:e&&e.parentAction,metadata:n}};return new Promise(e=>{const t=()=>{for(let e=0;e<25&&this.iterationCounter<r;e++){const e=this.select(n),t=this.expand(e),r=this.playout(t);this.backpropagate(t,r),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:r,metadata:n})};if(this.iterationCounter=0,this.getOpt("async")){const n=()=>{this.iterationCounter<r?(t(),setImmediate(n)):e(s())};n()}else{for(;this.iterationCounter<r;)t();e(s())}})}},t.R=class extends i{play(e,t){let{G:n,ctx:r}=e;const s=this.enumerate(n,r,t);return Promise.resolve({action:this.random(s)})}}},9949(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.C=function(e){return new g(e)};var r=n(5042),s=(n(4826),n(2960)),o=n(9896),i=n(2591),a=n(8630),c=n(7857);class l extends c.T{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const u=e=>new l(e),p=new class{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(e){this.clients.set(e,e),this.mountDebug(e),this.notifySubscribers()}unregister(e){if(this.clients.delete(e),this.currentClient===e){this.unmountDebug();for(const[e]of this.clients){if(this.debugPanel)break;this.mountDebug(e)}}this.notifySubscribers()}subscribe(e){const t=Symbol();return this.subscribers.set(t,e),e(this.getState()),()=>{this.subscribers.delete(t)}}switchPlayerID(e){if(this.currentClient.multiplayer)for(const[t]of this.clients)if(t.playerID===e&&!1!==t.debugOpt&&t.multiplayer===this.currentClient.multiplayer)return void this.switchToClient(t);this.currentClient.updatePlayerID(e),this.notifySubscribers()}switchToClient(e){e!==this.currentClient&&(this.unmountDebug(),this.mountDebug(e),this.notifySubscribers())}notifySubscribers(){const e=this.getState();this.subscribers.forEach(t=>{t(e)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(e=>!1!==e.debugOpt)}mountDebug(e){if(!1===e.debugOpt||null!==this.debugPanel||"undefined"==typeof document)return;let t,n=document.body;e.debugOpt&&!0!==e.debugOpt&&(t=e.debugOpt.impl||t,n=e.debugOpt.target||n),t&&(this.currentClient=e,this.debugPanel=new t({target:n,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}};function d(e,t,n){return n||null!=e||(e=t.getState().ctx.currentPlayer),e}function f(e,t,n,r,s,i){const a={};for(const c of t)a[c]=function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];const u=o.A[e](c,a,d(r,n,i),s);n.dispatch(u)};return a}const h=f.bind(null,"makeMove"),v=f.bind(null,"gameEvent"),y=f.bind(null,"plugin");class g{constructor(e){let{game:t,debug:n,numPlayers:c,multiplayer:l,matchID:f,playerID:h,credentials:v,enhancer:y}=e;this.game=(0,i.P)(t),this.playerID=h,this.matchID=f||"default",this.credentials=v,this.multiplayer=l,this.debugOpt=n,this.manager=p,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=(0,i.C)({game:this.game,isClient:void 0!==l}),this.initialState=null,l||(this.initialState=(0,a.I)({game:this.game,numPlayers:c})),this.reset=()=>{this.store.dispatch((0,o.r)(this.initialState))},this.undo=()=>{const e=(0,o.u)(d(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.redo=()=>{const e=(0,o.a)(d(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(e)},this.log=[];const g=(0,s.applyMiddleware)(i.T,()=>e=>t=>{const n=e(t);return this.notifySubscribers(),n},e=>t=>n=>{const r=e.getState(),s=t(n);return"clientOnly"in n||n.type===o.e||this.transport.sendAction(r,n),s},e=>t=>n=>{const r=t(n),s=e.getState();switch(n.type){case o.M:case o.G:case o.d:case o.c:{const e=s.deltalog;this.log=[...this.log,...e];break}case o.R:this.log=[];break;case o.b:case o.U:{let e=-1;this.log.length>0&&(e=this.log[this.log.length-1]._stateID);let t=n.deltalog||[];t=t.filter(t=>t._stateID>e),this.log=[...this.log,...t];break}case o.S:this.initialState=n.initialState,this.log=n.log||[]}return r});y=void 0!==y?(0,s.compose)(g,y):g,this.store=(0,s.createStore)(this.reducer,this.initialState,y),l||(l=u),this.transport=l({transportDataCallback:e=>this.receiveTransportData(e),gameKey:t,game:this.game,matchID:f,playerID:h,credentials:v,gameName:this.game.name,numPlayers:c}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=e=>{this.transport.sendChatMessage(this.matchID,{id:(0,r.nanoid)(7),sender:this.playerID,payload:e})}}receiveMatchData(e){this.matchData=e,this.notifySubscribers()}receiveChatMessage(e){this.chatMessages=[...this.chatMessages,e],this.notifySubscribers()}receiveTransportData(e){const[t]=e.args;if(t===this.matchID)switch(e.type){case"sync":{const[,t]=e.args,n=(0,o.s)(t);this.receiveMatchData(t.filteredMetadata),this.store.dispatch(n);break}case"update":{const[,t,n]=e.args,r=this.store.getState();if(t._stateID>=r._stateID){const e=(0,o.f)(t,n);this.store.dispatch(e)}break}case"patch":{const[,t,n,r,s]=e.args,i=this.store.getState()._stateID;if(t!==i)break;const a=(0,o.p)(t,n,r,s);this.store.dispatch(a),this.store.getState()._stateID===i&&this.transport.requestSync();break}case"matchData":{const[,t]=e.args;this.receiveMatchData(t);break}case"chat":{const[,t]=e.args;this.receiveChatMessage(t);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(e){const t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),!this._running&&this.multiplayer||e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(null!==this.gameStateOverride&&(e=this.gameStateOverride),null===e)return e;let t=!0;const n=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);return this.multiplayer&&!n&&(t=!1),this.multiplayer||null===this.playerID||void 0===this.playerID||n||(t=!1),void 0!==e.ctx.gameover&&(t=!1),this.multiplayer||(e={...e,G:this.game.playerView({G:e.G,ctx:e.ctx,playerID:this.playerID}),plugins:(0,o.P)(e,this)}),{...e,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=h(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=v(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=y(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateMatchID(e){this.matchID=e,this.createDispatchers(),this.transport.updateMatchID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.transport.updateCredentials(e),this.notifySubscribers()}}},6192(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.a=t.L=void 0;const n=(e,t)=>{if(!e||"string"!=typeof e)throw new Error(`Expected ${t} string, got "${e}".`)},r=e=>n(e,"game name"),s=e=>n(e,"match ID"),o=(e,t)=>{if(!e)throw new Error(`Expected body, got “${e}”.`);for(const n in t){const r=t[n],s=Array.isArray(r)?r:[r],o=e[n];if(!s.includes(typeof o)){const e=s.join("|");throw new TypeError(`Expected body.${n} to be of type ${e}, got “${o}”.`)}}};class i extends Error{constructor(e,t){super(e),this.details=t}}t.a=i,t.L=class{constructor(){let{server:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=e.replace(/\/$/,"")}async request(e,t){const n=await fetch(this.server+e,t);if(!n.ok){let e;try{e=await n.clone().json()}catch{try{e=await n.text()}catch(t){e=t.message}}throw new i(`HTTP status ${n.status}`,e)}return n.json()}async post(e,t){let n={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(n={...n,...t.init,headers:{...n.headers,...t.init.headers}}),this.request(e,n)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,n){r(e);let s="";if(t){const e=[],{isGameover:n,updatedBefore:r,updatedAfter:o}=t;void 0!==n&&e.push(`isGameover=${n}`),r&&e.push(`updatedBefore=${r}`),o&&e.push(`updatedAfter=${o}`),e.length>0&&(s="?"+e.join("&"))}return this.request(`/games/${e}${s}`,n)}async getMatch(e,t,n){return r(e),s(t),this.request(`/games/${e}/${t}`,n)}async createMatch(e,t,n){return r(e),o(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:n})}async joinMatch(e,t,n,i){return r(e),s(t),o(n,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:n,init:i})}async leaveMatch(e,t,n,i){r(e),s(t),o(n,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:n,init:i})}async updatePlayer(e,t,n,i){r(e),s(t),o(n,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:n,init:i})}async playAgain(e,t,n,i){return r(e),s(t),o(n,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:n,init:i})}}},4688(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return r.C}}),Object.defineProperty(t,"LobbyClient",{enumerable:!0,get:function(){return s.L}}),Object.defineProperty(t,"LobbyClientError",{enumerable:!0,get:function(){return s.a}});var r=n(9949),s=n(6192);n(5042),n(4826),n(9896),n(5878),n(9458),n(9001),n(7035),n(2591),n(1337),n(3637),n(2791),n(2960),n(8630),n(7857)},504(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Debug",{enumerable:!0,get:function(){return r.D}});var r=n(4826);n(9896),n(5878),n(9458),n(9001),n(7035),n(2591),n(1337),n(3637),n(2791)},9710(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.g=void 0;var r=n(9896),s=n(1337);const o=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:(0,r.P)(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]});function i(e,t){return void 0===e?e:e.map(e=>{if(null!==t&&+t===+e.action.payload.playerID)return e;if(!0!==e.redact)return e;const n={...e.action.payload,args:null},r={...e,action:{...e.action,payload:n}},{redact:s,...o}=r;return o})}t.g=e=>(t,n)=>{switch(n.type){case"patch":{const[r,a,c,l]=n.args,u=i(l.deltalog,t),p=o(e,t,l),d=l._stateID,f=o(e,t,c);return{type:"patch",args:[r,a,d,(0,s.createPatch)(f,p),u]}}case"update":{const[r,s]=n.args,a=i(s.deltalog,t);return{type:"update",args:[r,o(e,t,s),a]}}case"sync":{const[r,s]=n.args,a=o(e,t,s.state),c=i(s.log,t);return{type:"sync",args:[r,{...s,state:a,log:c}]}}default:return n}}},8630(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.I=function(e){let{game:t,numPlayers:n,setupData:o}=e;t=(0,r.P)(t),n||(n=2);let i={G:{},ctx:t.flow.ctx(n),plugins:{}};i=(0,s.z)(i,{game:t}),i=(0,s.E)(i,{game:t,playerID:void 0});const a=(0,s.j)(i);i.G=t.setup({...a,ctx:i.ctx},o);let c={...i,_undo:[],_redo:[],_stateID:0};return c=t.flow.init(c),[c]=(0,s.x)(c,{game:t}),t.disableUndo||(c._undo=[{G:c.G,ctx:c.ctx,plugins:c.plugins}]),c};var r=n(2591),s=n(9896)},2073(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M=void 0;var r=n(2591),s=n(9896),o=n(2960),i=n(568);const a=e=>Object.values(e.players).map(e=>{const{credentials:t,...n}=e;return n});t.M=class{constructor(e,t,n,s){this.game=(0,r.P)(e),this.storageAPI=t,this.transportAPI=n,this.subscribeCallback=()=>{},this.auth=s}subscribe(e){this.subscribeCallback=e}async onUpdate(e,t,n,a){if(!e||!e.payload)return{error:"missing action or action payload"};let c;if((0,i.i)(this.storageAPI)?({metadata:c}=this.storageAPI.fetch(n,{metadata:!0})):({metadata:c}=await this.storageAPI.fetch(n,{metadata:!0})),this.auth&&!await this.auth.authenticateCredentials({playerID:a,credentials:e.payload.credentials,metadata:c}))return{error:"unauthorized action"};const l=(e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}})(e),u=n;let p;if((0,i.i)(this.storageAPI)?({state:p}=this.storageAPI.fetch(u,{state:!0})):({state:p}=await this.storageAPI.fetch(u,{state:!0})),void 0===p)return(0,s.g)(`game not found, matchID=[${u}]`),{error:"game not found"};if(void 0!==p.ctx.gameover)return void(0,s.g)(`game over - matchID=[${u}] - playerID=[${a}] - action[${l.payload.type}]`);const d=(0,r.C)({game:this.game}),f=(0,o.applyMiddleware)(r.T),h=(0,o.createStore)(d,p,f);if(l.type==s.d||l.type==s.c){const e=null!==p.ctx.activePlayers,t=p.ctx.currentPlayer===a;if(!e&&!t||e&&(void 0===p.ctx.activePlayers[a]||Object.keys(p.ctx.activePlayers).length>1))return void(0,s.g)(`playerID=[${a}] cannot undo / redo right now`)}if(!this.game.flow.isPlayerActive(p.G,p.ctx,a))return void(0,s.g)(`player not active - playerID=[${a}] - action[${l.payload.type}]`);const v=l.type==s.M?this.game.flow.getMove(p.ctx,l.payload.type,a):null;if(l.type==s.M&&!v)return void(0,s.g)(`move not processed - canPlayerMakeMove=false - playerID=[${a}] - action[${l.payload.type}]`);if(p._stateID!==t&&!(v&&(0,r.I)(v)&&v.ignoreStaleStateID))return void(0,s.g)(`invalid stateID, was=[${t}], expected=[${p._stateID}] - playerID=[${a}] - action[${l.payload.type}]`);const y=h.getState();h.dispatch(l),p=h.getState(),this.subscribeCallback({state:p,action:l,matchID:n}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[n,t,y,p]}):this.transportAPI.sendAll({type:"update",args:[n,p]});const{deltalog:g,...m}=p;let b;if(!c||void 0!==c.gameover&&null!==c.gameover||(b={...c,updatedAt:Date.now()},void 0!==p.ctx.gameover&&(b.gameover=p.ctx.gameover)),(0,i.i)(this.storageAPI))this.storageAPI.setState(u,m,g),b&&this.storageAPI.setMetadata(u,b);else{const e=[this.storageAPI.setState(u,m,g)];b&&e.push(this.storageAPI.setMetadata(u,b)),await Promise.all(e)}}async onSync(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;const s=e,o={state:!0,metadata:!0,log:!0,initialState:!0},c=(0,i.i)(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:l,initialState:u,log:p,metadata:d}=c;if(this.auth&&null!=t&&!await this.auth.authenticateCredentials({playerID:t,credentials:n,metadata:d}))return{error:"unauthorized"};if(void 0===l){const t=(0,i.c)({game:this.game,unlisted:!0,numPlayers:r,setupData:void 0});if("setupDataError"in t)return{error:"game requires setupData"};u=l=t.initialState,d=t.metadata,this.subscribeCallback({state:l,matchID:e}),(0,i.i)(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:d}):await this.storageAPI.createMatch(s,{initialState:u,metadata:d})}const f={state:l,log:p,filteredMetadata:d?a(d):void 0,initialState:u};this.transportAPI.send({playerID:t,type:"sync",args:[e,f]})}async onConnectionChange(e,t,n,r){const o=e;if(null==t)return;let c;if((0,i.i)(this.storageAPI)?({metadata:c}=this.storageAPI.fetch(o,{metadata:!0})):({metadata:c}=await this.storageAPI.fetch(o,{metadata:!0})),void 0===c)return(0,s.g)(`metadata not found for matchID=[${o}]`),{error:"metadata not found"};if(void 0===c.players[t])return(0,s.g)(`Player not in the match, matchID=[${o}] playerID=[${t}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:t,credentials:n,metadata:c}))return{error:"unauthorized"};c.players[t].isConnected=r;const l=a(c);this.transportAPI.sendAll({type:"matchData",args:[e,l]}),(0,i.i)(this.storageAPI)?this.storageAPI.setMetadata(o,c):await this.storageAPI.setMetadata(o,c)}async onChatMessage(e,t,n){const r=e;if(this.auth){const{metadata:e}=await this.storageAPI.fetch(r,{metadata:!0});if(!t||"string"!=typeof t.sender)return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:t.sender,credentials:n,metadata:e}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[e,t]})}}},9843(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Local",{enumerable:!0,get:function(){return r.L}}),Object.defineProperty(t,"SocketIO",{enumerable:!0,get:function(){return r.S}});var r=n(5194);n(568),n(8630),n(2591),n(9896),n(5878),n(9458),n(9001),n(1337),n(2073),n(2960),n(7857),n(9710),n(8007)},9458(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.R=void 0,t.a=s;class n{constructor(e){const t=function(){let e=4022871197;return function(t){const n=t.toString();for(let t=0;t<n.length;t++){e+=n.charCodeAt(t);let r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}}();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){const e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){const s=new n(e),o=s.next.bind(s);return t&&r(t,s),o.state=()=>r(s,{}),o}class o{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const e=this.state,t=s(e.prngstate?"":e.seed,e.prngstate),n=t();return this.state={...e,prngstate:t.state()},n}api(){const e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={};for(const r in t){const s=t[r];n[r]=t=>void 0===t?Math.floor(e()*s)+1:Array.from({length:t}).map(()=>Math.floor(e()*s)+1)}return{...n,Die:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,n=arguments.length>1?arguments[1]:void 0;return void 0===n?Math.floor(e()*t)+1:Array.from({length:n}).map(()=>Math.floor(e()*t)+1)},Number:()=>e(),Shuffle:t=>{const n=[...t];let r=t.length,s=0;const o=Array.from({length:r});for(;r;){const t=Math.trunc(r*e());o[s++]=n[t],n[t]=n[--r]}return o},_private:this}}}t.R={name:"random",noClient:e=>{let{api:t}=e;return t._private.isUsed()},flush:e=>{let{api:t}=e;return t._private.getState()},api:e=>{let{data:t}=e;return new o(t).api()},setup:e=>{let{game:t}=e,{seed:n}=t;return void 0===n&&(n=o.seed()),{seed:n}},playerView:()=>{}}},2591(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.C=function(e){let{game:t,isClient:n}=e;return t=a(t),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,[c]=f(e);switch(a.type){case o.e:return c;case o.G:{if(c={...c,deltalog:[]},n)return c;if(void 0!==c.ctx.gameover)return(0,o.g)("cannot call event after game end"),h(c,s.GameOver);if(l(a)&&!t.flow.isPlayerActive(c.G,c.ctx,a.payload.playerID))return(0,o.g)(`disallowed event: ${a.payload.type}`),h(c,s.InactivePlayer);c=(0,o.E)(c,{game:t,isClient:!1,playerID:a.payload.playerID});let e,r=t.flow.processEvent(c,a);return[r,e]=d(r,c,{game:t,isClient:!1}),e||(r=u(r,{game:t,action:a}),{...r,_stateID:c._stateID+1})}case o.M:{const e=c={...c,deltalog:[]},r=t.flow.getMove(c.ctx,a.payload.type,a.payload.playerID||c.ctx.currentPlayer);if(null===r)return(0,o.g)(`disallowed move: ${a.payload.type}`),h(c,s.UnavailableMove);if(n&&!1===r.client)return c;if(void 0!==c.ctx.gameover)return(0,o.g)("cannot make move after game end"),h(c,s.GameOver);if(l(a)&&!t.flow.isPlayerActive(c.G,c.ctx,a.payload.playerID))return(0,o.g)(`disallowed move: ${a.payload.type}`),h(c,s.InactivePlayer);c=(0,o.E)(c,{game:t,isClient:n,playerID:a.payload.playerID});const i=t.processMove(c,a.payload);if(i===o.w)return(0,o.g)(`invalid move: ${a.payload.type} args: ${a.payload.args}`),h(c,s.InvalidMove);const f={...c,G:i};if(n&&(0,o.N)(f,{game:t}))return c;if(c=f,n){let n;return[c,n]=d(c,e,{game:t,isClient:!0}),n||{...c,_stateID:c._stateID+1}}let v;return c=p(c,a,r),c=t.flow.processMove(c,a.payload),[c,v]=d(c,e,{game:t}),v||(c=u(c,{game:t,action:a}),{...c,_stateID:c._stateID+1})}case o.R:case o.U:case o.S:return a.state;case o.d:{if(c={...c,deltalog:[]},t.disableUndo)return(0,o.g)("Undo is not enabled"),h(c,s.ActionDisabled);const{G:e,ctx:n,_undo:r,_redo:i,_stateID:u}=c;if(r.length<2)return(0,o.g)("No moves to undo"),h(c,s.ActionInvalid);const d=r[r.length-1],f=r[r.length-2];return l(a)&&a.payload.playerID!==d.playerID?((0,o.g)("Cannot undo other players' moves"),h(c,s.ActionInvalid)):d.moveType&&!((e,t,n)=>!function(e){return void 0!==e.undoable}(n)||(n.undoable instanceof Function?n.undoable({G:e,ctx:t}):n.undoable))(e,n,t.flow.getMove(f.ctx,d.moveType,d.playerID))?((0,o.g)("Move cannot be undone"),h(c,s.ActionInvalid)):(c=p(c,a),{...c,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:r.slice(0,-1),_redo:[d,...i]})}case o.c:{if(c={...c,deltalog:[]},t.disableUndo)return(0,o.g)("Redo is not enabled"),h(c,s.ActionDisabled);const{_undo:e,_redo:n,_stateID:r}=c;if(0===n.length)return(0,o.g)("No moves to redo"),h(c,s.ActionInvalid);const i=n[0];return l(a)&&a.payload.playerID!==i.playerID?((0,o.g)("Cannot redo other players' moves"),h(c,s.ActionInvalid)):(c=p(c,a),{...c,G:i.G,ctx:i.ctx,plugins:i.plugins,_stateID:r+1,_undo:[...e,i],_redo:n.slice(1)})}case o.t:return(0,o.v)(c,a,{game:t});case o.b:{const e=c,t=JSON.parse(JSON.stringify(e)),n=(0,i.applyPatch)(t,a.patch);return n.some(e=>null!==e)?((0,o.g)(`Patch ${JSON.stringify(a.patch)} apply failed`),h(e,r.PatchFailed,n)):t}default:return c}}},t.I=c,t.P=a,t.T=void 0;var r,s,o=n(9896),i=n(1337);function a(e){if(function(e){return void 0!==e.processMove}(e))return e;if(void 0===e.name&&(e.name="default"),void 0===e.deltaState&&(e.deltaState=!1),void 0===e.disableUndo&&(e.disableUndo=!1),void 0===e.setup&&(e.setup=()=>({})),void 0===e.moves&&(e.moves={}),void 0===e.playerView&&(e.playerView=e=>{let{G:t}=e;return t}),void 0===e.plugins&&(e.plugins=[]),e.plugins.forEach(e=>{if(void 0===e.name)throw new Error("Plugin missing name attribute");if(e.name.includes(" "))throw new Error(e.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=function(e){let{moves:t,phases:n,endIf:r,onEnd:s,turn:i,events:a,plugins:c}=e;void 0===t&&(t={}),void 0===a&&(a={}),void 0===c&&(c=[]),void 0===n&&(n={}),r||(r=()=>{}),s||(s=e=>{let{G:t}=e;return t}),i||(i={});const l={...n};""in l&&(0,o.g)("cannot specify phase with empty name"),l[""]={};const u={},p=new Set;let d=null;Object.keys(t).forEach(e=>p.add(e));const f=(e,t)=>{const n=(0,o.F)(e,t,c);return e=>{const t=(0,o.j)(e);return n({...t,G:e.G,ctx:e.ctx,playerID:e.playerID})}},h=e=>t=>{const n=(0,o.j)(t);return e({...n,G:t.G,ctx:t.ctx})},v={onEnd:f(s,o.h.GAME_ON_END),endIf:h(r)};for(const e in l){const t=l[e];if(!0===t.start&&(d=e),void 0!==t.moves)for(const n of Object.keys(t.moves))u[e+"."+n]=t.moves[n],p.add(n);void 0===t.endIf&&(t.endIf=()=>{}),void 0===t.onBegin&&(t.onBegin=e=>{let{G:t}=e;return t}),void 0===t.onEnd&&(t.onEnd=e=>{let{G:t}=e;return t}),void 0===t.turn&&(t.turn=i),void 0===t.turn.order&&(t.turn.order=o.T.DEFAULT),void 0===t.turn.onBegin&&(t.turn.onBegin=e=>{let{G:t}=e;return t}),void 0===t.turn.onEnd&&(t.turn.onEnd=e=>{let{G:t}=e;return t}),void 0===t.turn.endIf&&(t.turn.endIf=()=>!1),void 0===t.turn.onMove&&(t.turn.onMove=e=>{let{G:t}=e;return t}),void 0===t.turn.stages&&(t.turn.stages={}),(0,o.i)(t.turn,!0);for(const n in t.turn.stages){const r=t.turn.stages[n].moves||{};for(const t of Object.keys(r))u[e+"."+n+"."+t]=r[t],p.add(t)}if(t.wrapped={onBegin:f(t.onBegin,o.h.PHASE_ON_BEGIN),onEnd:f(t.onEnd,o.h.PHASE_ON_END),endIf:h(t.endIf)},t.turn.wrapped={onMove:f(t.turn.onMove,o.h.TURN_ON_MOVE),onBegin:f(t.turn.onBegin,o.h.TURN_ON_BEGIN),onEnd:f(t.turn.onEnd,o.h.TURN_ON_END),endIf:h(t.turn.endIf)},"function"!=typeof t.next){const{next:e}=t;t.next=()=>e||null}t.wrapped.next=h(t.next)}function y(e){return e.phase?l[e.phase]:l[""]}function g(e){return e}function m(e,t){const n=new Set,r=new Set;for(let s=0;s<t.length;s++){const{fn:o,arg:i,...a}=t[s];if(o===j){r.clear();const t=e.ctx.phase;if(n.has(t)){const t={...e.ctx,phase:null};return{...e,ctx:t}}n.add(t)}const c=[];if(e=o(e,{...a,arg:i,next:c}),o===A)break;const l=M(e);if(l){t.push({fn:A,arg:l,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}const u=E(e);if(u)t.push({fn:j,arg:u,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});else{if([g,O,k].includes(o)){const n=$(e);if(n){t.push({fn:S,arg:n,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}}t.push(...c)}}return e}function b(e,t){let{next:n}=t;return n.push({fn:x}),e}function x(e,t){let{next:n}=t,{G:r,ctx:s}=e;return r=y(s).wrapped.onBegin(e),n.push({fn:_}),{...e,G:r,ctx:s}}function _(e,t){let{currentPlayer:n}=t,{ctx:r}=e;const s=y(r);n?(r={...r,currentPlayer:n},s.turn.activePlayers&&(r=(0,o.l)(r,s.turn.activePlayers))):r=(0,o.I)(e,s.turn);const i=r.turn+1;r={...r,turn:i,numMoves:0,_prevActivePlayers:[]};const a=s.turn.wrapped.onBegin({...e,ctx:r});return{...e,G:a,ctx:r,_undo:[],_redo:[]}}function w(e,t){let{arg:n,next:r,phase:s}=t;const i=y({phase:s});let{ctx:a}=e;if(n&&n.next){if(!(n.next in l))return(0,o.g)("invalid phase: "+n.next),e;a={...a,phase:n.next}}else a={...a,phase:i.wrapped.next(e)||null};return e={...e,ctx:a},r.push({fn:x}),e}function P(e,t){let{arg:n,currentPlayer:r,next:s}=t,{G:i,ctx:a}=e;const c=y(a),{endPhase:l,ctx:u}=(0,o.n)(e,r,c.turn,n);return a=u,e={...e,G:i,ctx:a},l?s.push({fn:j,turn:a.turn,phase:a.phase}):s.push({fn:_,currentPlayer:a.currentPlayer}),e}function O(e,t){let{arg:n,playerID:r}=t;if("string"!=typeof n&&n!==o.k.NULL||(n={stage:n}),"object"!=typeof n)return e;(0,o.i)(n);let{ctx:s}=e,{activePlayers:i,_activePlayersMinMoves:a,_activePlayersMaxMoves:c,_activePlayersNumMoves:l}=s;return void 0!==n.stage&&(null===i&&(i={}),i[r]=n.stage,l[r]=0,n.minMoves&&(null===a&&(a={}),a[r]=n.minMoves),n.maxMoves&&(null===c&&(c={}),c[r]=n.maxMoves)),s={...s,activePlayers:i,_activePlayersMinMoves:a,_activePlayersMaxMoves:c,_activePlayersNumMoves:l},{...e,ctx:s}}function k(e,t){let{arg:n}=t;return{...e,ctx:(0,o.l)(e.ctx,n)}}function M(e){return v.endIf(e)}function E(e){return y(e.ctx).wrapped.endIf(e)}function $(e){const t=y(e.ctx),n=e.ctx.numMoves||0;return!!(t.turn.maxMoves&&n>=t.turn.maxMoves)||t.turn.wrapped.endIf(e)}function A(e,t){let{arg:n,phase:r}=t;e=j(e,{phase:r}),void 0===n&&(n=!0),e={...e,ctx:{...e.ctx,gameover:n}};const s=v.onEnd(e);return{...e,G:s}}function j(e,t){let{arg:n,next:r,turn:s,automatic:i}=t;e=S(e,{turn:s,force:!0,automatic:!0});const{phase:a,turn:c}=e.ctx;if(r&&r.push({fn:w,arg:n,phase:a}),null===a)return e;const l=y(e.ctx).wrapped.onEnd(e),u={...e.ctx,phase:null},p=(0,o.q)("endPhase",n),{_stateID:d}=e,f={action:p,_stateID:d,turn:c,phase:a};i&&(f.automatic=!0);const h=[...e.deltalog||[],f];return{...e,G:l,ctx:u,deltalog:h}}function S(e,t){let{arg:n,next:r,turn:s,force:i,automatic:a,playerID:c}=t;if(s!==e.ctx.turn)return e;const{currentPlayer:l,numMoves:u,phase:p,turn:d}=e.ctx,f=y(e.ctx),h=u||0;if(!i&&f.turn.minMoves&&h<f.turn.minMoves)return(0,o.m)(`cannot end turn before making ${f.turn.minMoves} moves`),e;const v=f.turn.wrapped.onEnd(e);r&&r.push({fn:P,arg:n,currentPlayer:l});let g={...e.ctx,activePlayers:null};if(n&&n.remove){c=c||l;const t=g.playOrder.filter(e=>e!=c),n=g.playOrderPos>t.length-1?0:g.playOrderPos;if(g={...g,playOrder:t,playOrderPos:n},0===t.length)return r.push({fn:j,turn:d,phase:p}),e}const m=(0,o.q)("endTurn",n),{_stateID:b}=e,x={action:m,_stateID:b,turn:d,phase:p};a&&(x.automatic=!0);const _=[...e.deltalog||[],x];return{...e,G:v,ctx:g,deltalog:_,_undo:[],_redo:[]}}function I(e,t){let{arg:n,next:r,automatic:s,playerID:i}=t;i=i||e.ctx.currentPlayer;let{ctx:a,_stateID:c}=e,{activePlayers:l,_activePlayersNumMoves:u,_activePlayersMinMoves:p,_activePlayersMaxMoves:d,phase:f,turn:h}=a;const v=null!==l&&i in l,g=y(a);if(!n&&v){const e=g.turn.stages[l[i]];e&&e.next&&(n=e.next)}if(r&&r.push({fn:O,arg:n,playerID:i}),!v)return e;const m=u[i]||0;if(p&&p[i]&&m<p[i])return(0,o.m)(`cannot end stage before making ${p[i]} moves`),e;l={...l},delete l[i],p&&(p={...p},delete p[i]),d&&(d={...d},delete d[i]),a=(0,o.o)({...a,activePlayers:l,_activePlayersMinMoves:p,_activePlayersMaxMoves:d});const b={action:(0,o.q)("endStage",n),_stateID:c,turn:h,phase:f};s&&(b.automatic=!0);const x=[...e.deltalog||[],b];return{...e,ctx:a,deltalog:x}}function C(e,n,r){const s=y(e),i=s.turn.stages,{activePlayers:a}=e;if(a&&void 0!==a[r]&&a[r]!==o.k.NULL&&void 0!==i[a[r]]&&void 0!==i[a[r]].moves){const e=i[a[r]].moves;if(n in e)return e[n]}else if(s.moves){if(n in s.moves)return s.moves[n]}else if(n in t)return t[n];return null}const T={endStage:function(e,t){return m(e,[{fn:I,playerID:t}])},setStage:function(e,t,n){return m(e,[{fn:I,arg:n,playerID:t}])},endTurn:function(e,t,n){return m(e,[{fn:S,turn:e.ctx.turn,phase:e.ctx.phase,arg:n}])},pass:function(e,t,n){return m(e,[{fn:S,turn:e.ctx.turn,phase:e.ctx.phase,force:!0,arg:n}])},endPhase:function(e){return m(e,[{fn:j,phase:e.ctx.phase,turn:e.ctx.turn}])},setPhase:function(e,t,n){return m(e,[{fn:j,phase:e.ctx.phase,turn:e.ctx.turn,arg:{next:n}}])},endGame:function(e,t,n){return m(e,[{fn:A,turn:e.ctx.turn,phase:e.ctx.phase,arg:n}])},setActivePlayers:function(e,t,n){return m(e,[{fn:k,arg:n}])}},N=[];return!1!==a.endTurn&&N.push("endTurn"),!1!==a.pass&&N.push("pass"),!1!==a.endPhase&&N.push("endPhase"),!1!==a.setPhase&&N.push("setPhase"),!1!==a.endGame&&N.push("endGame"),!1!==a.setActivePlayers&&N.push("setActivePlayers"),!1!==a.endStage&&N.push("endStage"),!1!==a.setStage&&N.push("setStage"),{ctx:e=>({numPlayers:e,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:e})].map((e,t)=>t+""),playOrderPos:0,phase:d,activePlayers:null}),init:e=>m(e,[{fn:b}]),isPlayerActive:function(e,t,n){return t.activePlayers?n in t.activePlayers:t.currentPlayer===n},eventHandlers:T,eventNames:Object.keys(T),enabledEventNames:N,moveMap:u,moveNames:[...p.values()],processMove:function(e,t){const{playerID:n,type:r}=t,{currentPlayer:s,activePlayers:o,_activePlayersMaxMoves:i}=e.ctx,a=C(e.ctx,r,n),c=!a||"function"==typeof a||!0!==a.noLimit;let{numMoves:l,_activePlayersNumMoves:u}=e.ctx;c&&(n===s&&l++,o&&u[n]++),e={...e,ctx:{...e.ctx,numMoves:l,_activePlayersNumMoves:u}},i&&u[n]>=i[n]&&(e=I(e,{playerID:n,automatic:!0}));const p=y(e.ctx).turn.wrapped.onMove({...e,playerID:n});return m(e={...e,G:p},[{fn:g}])},processEvent:function(e,t){const{type:n,playerID:r,args:s}=t.payload;return"function"!=typeof T[n]?e:T[n](e,r,...Array.isArray(s)?s:[s])},getMove:C}}(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(e=>e.name),processMove:(n,r)=>{let s=t.getMove(n.ctx,r.type,r.playerID);if(c(s)&&(s=s.move),s instanceof Function){const t=(0,o.F)(s,o.h.MOVE,e.plugins);let i=[];return void 0!==r.args&&(i=Array.isArray(r.args)?r.args:[r.args]),t({...(0,o.j)(n),G:n.G,ctx:n.ctx,playerID:r.playerID},...i)}return(0,o.g)(`invalid move object: ${r.type}`),n.G}}}function c(e){return e instanceof Object&&void 0!==e.move}!function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"}(r||(r={})),function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"}(s||(s={}));const l=e=>null!==e.payload.playerID&&void 0!==e.payload.playerID;function u(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return"MAKE_MOVE"===t.action.type&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function p(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},s=e.plugins.log.data.metadata;return void 0!==s&&(r.metadata=s),"object"==typeof n&&!0===n.redact?r.redact=!0:"object"==typeof n&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function d(e,t,n){const[r,i]=(0,o.x)(e,n);return i?[r,h(t,s.PluginActionInvalid,i)]:[r]}function f(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function h(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}t.T=e=>t=>n=>{const r=t(n);if(n.type===o.e)return r;{const[,t]=f(e.getState());return void 0!==t?(e.dispatch((0,o.y)()),{...r,transients:t}):r}}},5194(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.L=function(){let{bots:e,persist:t,storageKey:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=>{const{gameKey:s,game:o}=r;let i;const a=f.get(s);return a&&a.bots===e&&a.storageKey===n&&a.persist===t&&(i=a.master),i||(i=new p({game:o,bots:e,persist:t,storageKey:n}),f.set(s,{master:i,bots:e,persist:t,storageKey:n})),new d({master:i,...r})}},t.S=function(){let{server:e,socketOpts:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>new v({server:e,socketOpts:t,...n})};var r=n(568),s=n(2073),o=n(7857),i=n(9710),a=function(e){if("function"==typeof WeakMap){var t=new WeakMap;new WeakMap}return function(e){if(e&&e.__esModule)return e;var n,r,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(n=t){if(n.has(e))return n.get(e);n.set(e,s)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((r=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?n(s,t,r):s[t]=e[t]);return s}(e)}(n(8007));class c extends r.S{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(e,t){this.initial.set(e,t.initialState),this.setState(e,t.initialState),this.setMetadata(e,t.metadata)}setMetadata(e,t){this.metadata.set(e,t)}setState(e,t,n){if(n&&n.length>0){const t=this.log.get(e)||[];this.log.set(e,[...t,...n])}this.state.set(e,t)}fetch(e,t){const n={};return t.state&&(n.state=this.state.get(e)),t.metadata&&(n.metadata=this.metadata.get(e)),t.log&&(n.log=this.log.get(e)||[]),t.initialState&&(n.initialState=this.initial.get(e)),n}wipe(e){this.state.delete(e),this.metadata.delete(e)}listMatches(e){return[...this.metadata.entries()].filter(t=>{let[,n]=t;if(!e)return!0;if(void 0!==e.gameName&&n.gameName!==e.gameName)return!1;if(void 0!==e.where){if(void 0!==e.where.isGameover&&void 0!==n.gameover!==e.where.isGameover)return!1;if(void 0!==e.where.updatedBefore&&n.updatedAt>=e.where.updatedBefore)return!1;if(void 0!==e.where.updatedAfter&&n.updatedAt<=e.where.updatedAfter)return!1}return!0}).map(e=>{let[t]=e;return t})}}class l extends Map{constructor(e){super(),this.key=e,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(e=>this.set(...e))}sync(){const e=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(e))}set(e,t){return super.set(e,t),this.sync(),this}delete(e){const t=super.delete(e);return this.sync(),t}}class u extends c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bgio";super();const t=t=>new l(`${e}_${t}`);this.state=t("state"),this.initial=t("initial"),this.metadata=t("metadata"),this.log=t("log")}}class p extends s.M{constructor(e){let{game:t,bots:n,storageKey:r,persist:s}=e;const o={},a={};if(t&&t.ai&&n)for(const e in n){const r=n[e];a[e]=new r({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=e=>{let{playerID:t,...n}=e;const r=o[t];void 0!==r&&r(p(t,n))},p=(0,i.g)(t),d={send:l,sendAll:e=>{for(const t in o)l({playerID:t,...e})}};super(t,s?new u(r):new c,d),this.connect=(e,t)=>{o[e]=t},this.subscribe(e=>{let{state:t,matchID:r}=e;if(!n)return;const s=function(e,t){if(void 0!==e.ctx.gameover)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}(t,a);null!==s&&setTimeout(async()=>{const e=await a[s].play(t,s);await this.onUpdate(e.action,t._stateID,r,e.action.payload.playerID)},100)})}}class d extends o.T{constructor(e){let{master:t,...n}=e;super(n),this.master=t}sendChatMessage(e,t){const n=[e,t,this.credentials];this.master.onChatMessage(...n)}sendAction(e,t){this.master.onUpdate(t,e._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,e=>this.notifyClient(e)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(e){this.matchID=e,this.connect()}updatePlayerID(e){this.playerID=e,this.connect()}updateCredentials(e){this.credentials=e,this.connect()}}const f=new Map,h=a.default;class v extends o.T{constructor(e){let{socket:t,socketOpts:n,server:r,...s}=e;super(s),this.server=r,this.socket=t,this.socketOpts=n}sendAction(e,t){const n=[t,e._stateID,this.matchID,this.playerID];this.socket.emit("update",...n)}sendChatMessage(e,t){const n=[e,t,this.credentials];this.socket.emit("chat",...n)}connect(){if(!this.socket)if(this.server){let e=this.server;-1==e.search(/^https?:\/\//)&&(e="http://"+this.server),"/"!=e.slice(-1)&&(e+="/"),this.socket=h(e+this.gameName,this.socketOpts)}else this.socket=h("/"+this.gameName,this.socketOpts);this.socket.on("patch",(e,t,n,r,s)=>{this.notifyClient({type:"patch",args:[e,t,n,r,s]})}),this.socket.on("update",(e,t,n)=>{this.notifyClient({type:"update",args:[e,t,n]})}),this.socket.on("sync",(e,t)=>{this.notifyClient({type:"sync",args:[e,t]})}),this.socket.on("matchData",(e,t)=>{this.notifyClient({type:"matchData",args:[e,t]})}),this.socket.on("chat",(e,t)=>{this.notifyClient({type:"chat",args:[e,t]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const e=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...e)}}updateMatchID(e){this.matchID=e,this.requestSync()}updatePlayerID(e){this.playerID=e,this.requestSync()}updateCredentials(e){this.credentials=e,this.requestSync()}}},7857(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.T=void 0,t.T=class{constructor(e){let{transportDataCallback:t,gameName:n,playerID:r,matchID:s,credentials:o,numPlayers:i}=e;this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=s||"default",this.credentials=o,this.numPlayers=i||2}subscribeToConnectionStatus(e){this.connectionStatusCallback=e}setConnectionStatus(e){this.isConnected=e,this.connectionStatusCallback()}notifyClient(e){this.transportDataCallback(e)}}},9896(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.G=t.F=t.E=t.C=t.B=t.A=void 0,t.I=function(e,t){let{G:n,ctx:r}=e;const{numPlayers:s}=r,o={...R(e),G:n,ctx:r},i=t.order;let a=[...Array.from({length:s})].map((e,t)=>t+"");void 0!==i.playOrder&&(a=i.playOrder(o));const c=i.first(o),l=typeof c;"number"!==l&&T(`invalid value returned by turn.order.first — expected number got ${l} “${c}”.`);const u=L(a,c);return r={...r,currentPlayer:u,playOrderPos:c,playOrder:a},r=F(r,t.activePlayers||{}),r},t.f=t.e=t.d=t.c=t.b=t.a=t.U=t.T=t.S=t.R=t.P=t.N=t.M=void 0,t.g=T,t.h=void 0,t.i=B,t.k=t.j=void 0,t.l=F,t.m=function(e){C(`INFO: ${e}`)},t.n=function(e,t,n,r){const s=n.order;let{G:o,ctx:i}=e,a=i.playOrderPos,c=!1;if(r&&!0!==r)"object"!=typeof r&&T(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(e=>{switch(e){case"remove":t=L(i.playOrder,a);break;case"next":a=i.playOrder.indexOf(r.next),t=r.next;break;default:T(`invalid argument to endTurn: ${e}`)}});else{const n={...R(e),G:o,ctx:i},r=s.next(n),l=typeof r;void 0!==r&&"number"!==l&&T(`invalid value returned by turn.order.next — expected number or undefined got ${l} “${r}”.`),void 0===r?c=!0:(a=r,t=L(i.playOrder,a))}return i={...i,playOrderPos:a,currentPlayer:t},{endPhase:c,ctx:i}},t.o=function(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:o,_nextActivePlayers:i}=e;if(t&&0===Object.keys(t).length)if(i)e=F(e,i),({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:o}=e);else if(o.length>0){const e=o.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s}=o[e]),o=o.slice(0,e)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:o}},t.z=t.y=t.x=t.w=t.v=t.u=t.t=t.s=t.r=t.q=t.p=void 0;var r=o(n(5878)),s=n(9458);function o(e){return e&&e.__esModule?e:{default:e}}o(n(9001));const i=t.M="MAKE_MOVE",a=t.G="GAME_EVENT",c=t.c="REDO",l=t.R="RESET",u=t.S="SYNC",p=t.d="UNDO",d=t.U="UPDATE",f=t.b="PATCH",h=t.t="PLUGIN",v=t.e="STRIP_TRANSIENTS",y=(e,t,n,r)=>({type:i,payload:{type:e,args:t,playerID:n,credentials:r}});t.B=y;const g=(e,t,n,r)=>({type:a,payload:{type:e,args:t,playerID:n,credentials:r}});t.q=g;const m=(e,t,n,r)=>({type:a,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),b=e=>({type:u,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0});t.s=b;const x=(e,t,n,r)=>({type:f,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0});t.p=x;const _=(e,t)=>({type:d,state:e,deltalog:t,clientOnly:!0});t.f=_;const w=e=>({type:l,state:e,clientOnly:!0});t.r=w;const P=(e,t)=>({type:p,payload:{type:null,args:null,playerID:e,credentials:t}});t.u=P;const O=(e,t)=>({type:c,payload:{type:null,args:null,playerID:e,credentials:t}});t.a=O;const k=()=>({type:v});t.y=k,t.A=Object.freeze({__proto__:null,makeMove:y,gameEvent:g,automaticGameEvent:m,sync:b,patch:x,update:_,reset:w,undo:P,redo:O,plugin:(e,t,n,r)=>({type:h,payload:{type:e,args:t,playerID:n,credentials:r}}),stripTransients:k});const M=t.w="INVALID_MOVE",E={name:"plugin-immer",fnWrap:e=>function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];let i=!1;const a=(0,r.default)(t.G,n=>{const r=e({...t,G:n},...s);if(r!==M)return r;i=!0});return i?M:a}};var $,A;!function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"}($||(t.h=$={})),function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks — the turn is already ending.",e.MaxTurnEndings="Maximum number of turn endings exceeded for this update.\nThis likely means game code is triggering an infinite loop.",e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phase’s `onEnd` hook — the phase is already ending.\nIf you’re trying to dynamically choose the next phase when a phase ends, use the phase’s `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phase’s `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."}(A||(A={}));class j{constructor(e,t,n){this.flow=e,this.playerID=n,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=100*t.numPlayers}api(){var e=this;const t={_private:this};for(const n of this.flow.eventNames)t[n]=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];e.dispatch.push({type:n,args:r,phase:e.currentPhase,turn:e.currentTurn,calledFrom:e.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){const t=e,n=(e,n)=>{let{stack:r}=e;return{...t,plugins:{...t.plugins,events:{...t.plugins.events,data:{error:n+"\n"+r}}}}};e:for(let t=0;t<this.dispatch.length;t++){const r=this.dispatch[t],s=r.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return n(r.error,A.MaxTurnEndings);if(void 0===r.calledFrom)return n(r.error,A.CalledOutsideHook);if(e.ctx.gameover)break e;switch(r.type){case"endStage":case"setStage":case"setActivePlayers":switch(r.calledFrom){case $.TURN_ON_END:case $.PHASE_ON_END:return n(r.error,A.StageEventInOnEnd);case $.PHASE_ON_BEGIN:return n(r.error,A.StageEventInPhaseBegin);case $.TURN_ON_BEGIN:if("setActivePlayers"===r.type)break;return n(r.error,A.StageEventInTurnBegin)}if(s)continue e;break;case"endTurn":if(r.calledFrom===$.TURN_ON_END||r.calledFrom===$.PHASE_ON_END)return n(r.error,A.EndTurnInOnEnd);if(s)continue e;break;case"endPhase":case"setPhase":if(r.calledFrom===$.PHASE_ON_END)return n(r.error,A.PhaseEventInOnEnd);if(r.phase!==e.ctx.phase)continue e}const o=m(r.type,r.args,this.playerID);e=this.flow.processEvent(e,o)}return e}}const S={name:"events",noClient:e=>{let{api:t}=e;return t._private.isUsed()},isInvalid:e=>{let{data:t}=e;return t.error||!1},fnWrap:(e,t)=>function(n){const r=n.events;r&&r._private.updateTurnContext(n.ctx,t);for(var s=arguments.length,o=new Array(s>1?s-1:0),i=1;i<s;i++)o[i-1]=arguments[i];const a=e(n,...o);return r&&r._private.unsetCurrentMethod(),a},dangerouslyFlushRawState:e=>{let{state:t,api:n}=e;return n._private.update(t)},api:e=>{let{game:t,ctx:n,playerID:r}=e;return new j(t.flow,n,r).api()}},I={name:"plugin-serializable",fnWrap:e=>function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e(t,...r)}},C=()=>{};function T(e){!function(){console.error(...arguments)}("ERROR:",e)}const N=[E,s.R,{name:"log",flush:()=>({}),api:e=>{let{data:t}=e;return{setMetadata:e=>{t.metadata=e}}},setup:()=>({})},I],D=[...N,S];t.v=(e,t,n)=>(n.game.plugins.filter(e=>void 0!==e.action).filter(e=>e.name===t.payload.type).forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}},o=n.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[r]:{...s,data:o}}}}),e);const R=e=>{let{plugins:t}=e;return Object.entries(t||{}).reduce((e,t)=>{let[n,{api:r}]=t;return e[n]=r,e},{})};function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function F(e,t){let n={},r=[],s=null,o={},i={};if(Array.isArray(t)){const e={};t.forEach(t=>e[t]=U.NULL),n=e}else{if(B(t),t.next&&(s=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),void 0!==t.currentPlayer&&G(n,o,i,e.currentPlayer,t.currentPlayer),void 0!==t.others)for(let r=0;r<e.playOrder.length;r++){const s=e.playOrder[r];s!==e.currentPlayer&&G(n,o,i,s,t.others)}if(void 0!==t.all)for(let r=0;r<e.playOrder.length;r++)G(n,o,i,e.playOrder[r],t.all);if(t.value)for(const e in t.value)G(n,o,i,e,t.value[e]);if(t.minMoves)for(const e in n)void 0===o[e]&&(o[e]=t.minMoves);if(t.maxMoves)for(const e in n)void 0===i[e]&&(i[e]=t.maxMoves)}0===Object.keys(n).length&&(n=null),0===Object.keys(o).length&&(o=null),0===Object.keys(i).length&&(i=null);const a={};for(const e in n)a[e]=0;return{...e,activePlayers:n,_activePlayersMinMoves:o,_activePlayersMaxMoves:i,_activePlayersNumMoves:a,_prevActivePlayers:r,_nextActivePlayers:s}}function G(e,t,n,r,s){"object"==typeof s&&s!==U.NULL||(s={stage:s}),void 0!==s.stage&&(B(s),e[r]=s.stage,s.minMoves&&(t[r]=s.minMoves),s.maxMoves&&(n[r]=s.maxMoves))}function L(e,t){return e[t]+""}t.j=R,t.F=(e,t,n)=>[...N,...n,S].filter(e=>void 0!==e.fnWrap).reduce((e,n)=>{let{fnWrap:r}=n;return r(e,t)},e),t.z=(e,t)=>([...D,...t.game.plugins].filter(e=>void 0!==e.setup).forEach(n=>{const r=n.name,s=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:s}}}}),e),t.E=(e,t)=>([...D,...t.game.plugins].filter(e=>void 0!==e.api).forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}},o=n.api({G:e.G,ctx:e.ctx,data:s.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...s,api:o}}}}),e),t.N=(e,t)=>[...D,...t.game.plugins].filter(e=>void 0!==e.noClient).map(n=>{const r=n.name,s=e.plugins[r];return!!s&&n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:s.api,data:s.data})}).includes(!0),t.x=(e,t)=>{const n=((e,t)=>([...N,...t.game.plugins,S].reverse().forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}};if(n.flush){const r=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:s.api,data:s.data});e={...e,plugins:{...e.plugins,[n.name]:{data:r}}}}else if(n.dangerouslyFlushRawState){const o=(e=n.dangerouslyFlushRawState({state:e,game:t.game,api:s.api,data:s.data})).plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:o}}}}}),e))(e,t),r=((e,t)=>{const n=[...D,...t.game.plugins].filter(e=>void 0!==e.isInvalid).map(n=>{const{name:r}=n,s=e.plugins[r],o=n.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return!!o&&{plugin:r,message:o}}).find(e=>e);return n||!1})(n,t);if(!r)return[n];const{plugin:s,message:o}=r;return T(`${s} plugin declared action invalid:\n${o}`),[e,r]},t.P=(e,t)=>{let{G:n,ctx:r,plugins:s={}}=e,{game:o,playerID:i}=t;return[...D,...o.plugins].forEach(e=>{let{name:t,playerView:a}=e;if(!a)return;const{data:c}=s[t]||{data:{}},l=a({G:n,ctx:r,game:o,data:c,playerID:i});s={...s,[t]:{data:l}}}),s},t.T={DEFAULT:{first:e=>{let{ctx:t}=e;return 0===t.turn?t.playOrderPos:(t.playOrderPos+1)%t.playOrder.length},next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}},RESET:{first:()=>0,next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}},CONTINUE:{first:e=>{let{ctx:t}=e;return t.playOrderPos},next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}},ONCE:{first:()=>0,next:e=>{let{ctx:t}=e;if(t.playOrderPos<t.playOrder.length-1)return t.playOrderPos+1}},CUSTOM:e=>({playOrder:()=>e,first:()=>0,next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}}),CUSTOM_FROM:e=>({playOrder:t=>{let{G:n}=t;return n[e]},first:()=>0,next:e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.playOrder.length}})};const U=t.k={NULL:null};t.C={ALL:{all:U.NULL},ALL_ONCE:{all:U.NULL,minMoves:1,maxMoves:1},OTHERS:{others:U.NULL},OTHERS_ONCE:{others:U.NULL,minMoves:1,maxMoves:1}}},568(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.c=t.S=t.A=void 0,t.i=function(e){return e.type()===r.SYNC};var r,s=n(8630);!function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"}(r||(r={})),t.A=class{type(){return r.ASYNC}async createMatch(e,t){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.","\nUsing the deprecated createGame method instead."),this.createGame(e,t);console.error("The database connector does not implement a createMatch method.")}async listMatches(e){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.","\nUsing the deprecated listGames method instead."),this.listGames(e);console.error("The database connector does not implement a listMatches method.")}},t.S=class{type(){return r.SYNC}connect(){}createMatch(e,t){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.","\nUsing the deprecated createGame method instead."),this.createGame(e,t);console.error("The database connector does not implement a createMatch method.")}listMatches(e){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.","\nUsing the deprecated listGames method instead."),this.listGames(e);console.error("The database connector does not implement a listMatches method.")}},t.c=e=>{let{game:t,numPlayers:n,setupData:r,unlisted:o}=e;n&&"number"==typeof n||(n=2);const i=t.validateSetupData&&t.validateSetupData(r,n);if(void 0!==i)return{setupDataError:i};const a=(e=>{let{game:t,unlisted:n,setupData:r,numPlayers:s}=e;const o={gameName:t.name,unlisted:!!n,players:{},createdAt:Date.now(),updatedAt:Date.now()};void 0!==r&&(o.setupData=r);for(let e=0;e<s;e++)o.players[e]={id:e};return o})({game:t,numPlayers:n,setupData:r,unlisted:o});return{metadata:a,initialState:(0,s.I)({game:t,numPlayers:n,setupData:r})}}},4245(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4688),s=n(504),o=n(9843),i=n(7627),a=y(n(4913)),c=n(3883),l=y(n(3276)),u=y(n(4171)),p=y(n(7208)),d=y(n(7611)),f=y(n(380)),h=y(n(2146)),v=y(n(9965));function y(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.options=e,this.moveBuilder={targets:[],stepIndex:0,eliminatedMoves:[]},this.optimisticWinner=null,this.allClickable=new Set,this.game=(0,a.default)(JSON.parse(e.gameRules),e.gameName)}connect(){const{server:e,numPlayers:t,onClientUpdate:n,debug:i={collapseOnLoad:!0,impl:s.Debug},gameId:a,gameRules:c,boardgamePlayerID:l,clientToken:u,singlePlayer:p=!u}=this.options;try{const s=p?{game:this.game,numPlayers:t,debug:i}:{game:this.game,multiplayer:p?void 0:(0,o.SocketIO)({server:e,socketOpts:{transports:["websocket","polling"]}}),matchID:a,playerID:l,credentials:u,debug:i};return this.client=(0,r.Client)(s),n&&this.client.subscribe(n),this.client.start(),this}catch(e){console.error("Failed to join game:",e)}}getState(){let e,t,n;const r=this.client?.getState();return r&&(e={...r,G:(0,i.deserialize)(JSON.stringify(r.G),c.registry),originalG:r.G},n=e?.ctx?.gameover,t=n?[]:Object.entries((0,u.default)(e,this.client)).reduce((e,t)=>{let[n,r]=t;const s=e=>{this.client.moves[n]((0,f.default)(e))};return s.moveInstance=r.moveInstance,{...e,[n]:s}},{})),{state:e,gameover:n,moves:t}}doStep(e,t){const{state:n,moves:r}=this.getState(),{possibleMoveMeta:s,allClickable:o}=function(e,t,n,r){if(r)return{possibleMoveMeta:{},allClickable:new Set};const{eliminatedMoves:s,stepIndex:o}=n,i={},a=new Set;return Object.entries(t).filter(e=>{let[t]=e;return!s.includes(t)}).forEach(t=>{let[r,s]=t;const c=(0,p.default)(e,{...s.moveInstance.rule,moveName:r}),l={moveInstance:s.moveInstance,moveArguments:c.arguments},u=(0,v.default)(e,c,n.targets,l);l.moveArguments={...l.moveArguments,...u.arguments};const f=(0,d.default)(e,c,{},l).conditionsAreMet,y=(0,h.default)(e,c),g=y?.[o-1],m=y?.[o],b=y&&!!g&&!m,x=new Set(f&&m?.getClickable(l)||[]);i[r]={finishedOnLastStep:b,clickableForMove:x},x.forEach(e=>{a.add(e)})}),{possibleMoveMeta:i,allClickable:a}}(n,r,this.moveBuilder,t);this.allClickable=o;const a=Object.entries(s).filter(t=>{let[n,r]=t;return!r.finishedOnLastStep&&!r.clickableForMove.has(e)}).map(e=>{let[t]=e;return t}).concat(this.moveBuilder.eliminatedMoves);if(a.length===Object.keys(r).length)return void console.error("invalid move with target:",e?.rule);this.moveBuilder={eliminatedMoves:a,stepIndex:this.moveBuilder.stepIndex+1,targets:[...this.moveBuilder.targets,e]};const c=function(e,t,n,r){const s=Object.keys(t);if(1!==s.length)return null;const o=s[0];if(!t[o].finishedOnLastStep)return null;const i=r[o],a=i.moveInstance.rule;return{moveName:o,move:i,payload:(0,v.default)(e,a,n.targets,{moveInstance:i.moveInstance})}}(n,Object.fromEntries(Object.entries(s).filter(e=>{let[t]=e;return!a.includes(t)})),this.moveBuilder,r);c&&(this.optimisticWinner=function(e,t,n,r){const s=(0,l.default)(e,(0,f.default)(r),{moveInstance:n});return t.endIf?.({...e,G:JSON.parse((0,i.serialize)(s))})}(n,this.game,c.move.moveInstance,c.payload),c.move(c.payload),this.moveBuilder={targets:[],stepIndex:0,eliminatedMoves:[]}),this.options.onClientUpdate?.()}reset(){this.moveBuilder={targets:[],stepIndex:0,eliminatedMoves:[]},this.optimisticWinner=null,this.options.onClientUpdate?.()}undoStep(){this.moveBuilder.targets.length&&(this.moveBuilder={targets:this.moveBuilder.targets.slice(0,-1),stepIndex:Math.max(0,this.moveBuilder.stepIndex-1),eliminatedMoves:[]}),this.options.onClientUpdate?.()}},e.exports=t.default},784(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(7208))&&r.__esModule?r:{default:r};t.default=class{constructor(e,t){this.bank=t,this.rule=e,this.pool=[],this.remaining=+e.count||1}getOne(e,t,n){return this.getMultiple(e,1,t,n)[0]}getMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const o=[];if(this.remaining===1/0&&t===1/0)throw new Error(`Cannot get infinite pieces from slot with infinite remaining: ${this.rule.name}`);if(t!==1/0&&t>this.remaining)throw new Error(`Requested ${t} pieces but only ${this.remaining} available in slot: ${this.rule.name}`);const i=t===1/0?this.remaining:t;this.remaining!==1/0&&(this.remaining-=i);const a=Math.min(i,this.pool.length);o.push(...this.pool.splice(0,a));const c=i-a;if(c>0&&o.push(...Array.from(new Array(c)).map(()=>this.bank.createEntity(this.rule))),n.state){const t=(0,s.default)(e,n.state,r);o.forEach(e=>{e.state={...e.state,...t}})}return o}returnToBank(e){e.rule.state?e.state=e.rule.state:delete e.state,void 0!==this.remaining&&(this.remaining+=1),this.pool.push(e)}},e.exports=t.default},6103(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(7309)),s=c(n(7612)),o=c(n(7611)),i=n(3883),a=c(n(784));function c(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.currentEntityId=0,this.tracker={},this.slots=e.map(e=>new a.default(e,this))}createEntity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=new i.registry[e.type||"Entity"]({bank:this,fromBank:!0,...t},e,this.currentEntityId++);return this.track(n),n}track(e){this.tracker[e.entityId]=e}locate(e){return this.tracker[e]}findAll(e,t,n){if(!t.conditions)throw new Error(`Cannot find entity with no conditions. Rule: ${JSON.stringify(t)}`);return(0,s.default)(Object.values(this.tracker),r=>(0,o.default)(e,t,{target:r},n).conditionsAreMet)}findOne(e,t,n){return this.findAll(e,t,n)[0]}find(e,t,n){return t.matchMultiple?this.findAll(e,t,n):this.findOne(e,t,n)}findParent(e){return(0,r.default)(this.tracker,t=>t.entities?.includes(e)||t.spaces?.includes(e))}getOne(e,t,n){const r=this.getSlot(e,t,n);return r||console.error(`No matching slot for ${JSON.stringify(t)}`),r.getOne(e,{state:t.state},n)}getMultiple(e,t,n,r){const s=this.getSlots(e,t,r);return s.length||console.error(`No matching slots for ${JSON.stringify(t)}`),s.reduce((r,s)=>[...r,...s.getMultiple(e,n,{state:t.state})],[])}getSlot(e,t,n){return this.slots.find(r=>(0,o.default)(e,t,{target:r},n).conditionsAreMet)}getSlots(e,t,n){return this.slots.filter(r=>(0,o.default)(e,t,{target:r},n).conditionsAreMet)}returnToBank(e,t){this.findParent(t).remove(t),this.getSlot(e,t.rule).returnToBank(t),delete this.tracker[t.entityId]}},e.exports=t.default},2606(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(1325))&&r.__esModule?r:{default:r};class o extends s.default{}t.default=o,e.exports=t.default},2130(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"Is"===e.conditionType?new r.default(e):"Not"===e.conditionType?new s.default(e):"Or"===e.conditionType?new o.default(e):"Some"===e.conditionType?new i.default(e):"Contains"===e.conditionType?new c.default(e):"ContainsSame"===e.conditionType?new l.default(e):"Every"===e.conditionType?new a.default(e):"InLine"===e.conditionType?new u.default(e):"HasLine"===e.conditionType?new p.default(e):"IsFull"===e.conditionType?new d.default(e):"Would"===e.conditionType?new f.default(e):"NoPossibleMoves"===e.conditionType?new h.default(e):"Evaluate"===e.conditionType?new v.default(e):"Position"===e.conditionType?new y.default(e):void 0};var r=g(n(7350)),s=g(n(8801)),o=g(n(9299)),i=g(n(218)),a=g(n(5163)),c=g(n(7823)),l=g(n(3546)),u=g(n(4372)),p=g(n(1839)),d=g(n(7278)),f=g(n(441)),h=g(n(2726)),v=g(n(8401)),y=g(n(6017));function g(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},4881(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(7208))&&r.__esModule?r:{default:r};t.default=class{constructor(e){this.rule=e}check(e,t,n){const r={...t},o={...n};r.target&&(o.originalTarget=r.target);const i=(0,s.default)(e,this.rule,o);return void 0!==i.target&&(r.target=i.target),void 0===this.rule.target||r.target?this.checkCondition(e,i,r,o):{conditionIsMet:!1}}isMet(){return this.check(...arguments).conditionIsMet}},e.exports=t.default},7823(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(n(1505));var r=o(n(4881)),s=o(n(7611));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){const{target:o}=n;if(o){const n=o.entities??o.spaces,i=n?.filter(n=>(0,s.default)(e,t,{target:n},r).conditionsAreMet)??[];return{matches:i,conditionIsMet:!!i.length}}return{matches:[],conditionIsMet:!1}}}t.default=i,e.exports=t.default},3546(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(4383)),s=i(n(2130)),o=i(n(4881));function i(e){return e&&e.__esModule?e:{default:e}}class a extends o.default{checkCondition(e,t,n){let{targets:o}=n;if(1===o.length&&o[0].entities?.length)return{conditionIsMet:!0};const[i,...a]=o;return{conditionIsMet:i.entities.some(n=>{const o=(0,s.default)({conditionType:"Contains",conditions:[{conditionType:"Is",matcher:(0,r.default)(n.rule,t.properties)}]});return a.every(t=>o.isMet(e,{target:t}))})}}}t.default=a,e.exports=t.default},8401(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(n(1505));var r=o(n(4881)),s=o(n(8123));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){const o={...r};n?.target&&(o.target=n.target);const i=(0,s.default)(e,t,o);return{result:i,conditionIsMet:!!i}}}t.default=i,e.exports=t.default},5163(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(7611));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){let{target:o}=n;const i=o.map(n=>{const o={...r,loopTarget:n};return(0,s.default)(e,t,void 0,o)});return{conditionIsMet:i.every(e=>e.conditionsAreMet),results:i}}}t.default=i,e.exports=t.default},1839(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(1138));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){const{matches:o}=(0,s.default)(e,n.target,t.sequence,r);return{matches:o,conditionIsMet:!!o.length}}}t.default=i,e.exports=t.default},4372(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(1138));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){const{G:o}=e,{target:i}=n,a=o.bank.findParent(n.target),{matches:c}=(0,s.default)(e,a,t.sequence,r),l=c.filter(e=>e.some(e=>e===i));return{matches:l,conditionIsMet:!!l.length}}}t.default=i,e.exports=t.default},7350(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(6413));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){let{target:o}=n;return this.rule.entity&&o!==t.entity?{target:o,conditionIsMet:!1}:{target:o,conditionIsMet:(0,s.default)(e,t.matcher,o,r)}}}t.default=i,e.exports=t.default},7278(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(4881))&&r.__esModule?r:{default:r};class o extends s.default{checkCondition(e,t,n,r){return{conditionIsMet:n.target.spaces.every(e=>e.entities.length)}}}t.default=o,e.exports=t.default},2726(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(4881)),s=i(n(3538)),o=i(n(4171));function i(e){return e&&e.__esModule?e:{default:e}}class a extends r.default{checkCondition(e,t,n,r){return{conditionIsMet:!(0,s.default)(e,(0,o.default)(e,r))}}}t.default=a,e.exports=t.default},8801(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(7611));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){return{conditionIsMet:!(0,s.default)(e,t,n,r).conditionsAreMet}}}t.default=i,e.exports=t.default},9299(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(2742));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){const o=(0,s.default)(e,t,n,r);return console.log("result",o),{conditionIsMet:!!o}}}t.default=i,e.exports=t.default},6017(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(4881))&&r.__esModule?r:{default:r};class o extends s.default{checkCondition(e,t,n){let{target:r}=n;const s=e.G.bank.findParent(r);let o;return"First"===t.position&&(o=0===s.entities.indexOf(r)),{conditionIsMet:o}}}t.default=o,e.exports=t.default},218(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4881)),s=o(n(7611));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{checkCondition(e,t,n,r){let{target:o}=n;const i=o.find(n=>{const o={...r,loopTarget:n};return(0,s.default)(e,t,void 0,o).conditionsAreMet});return{conditionIsMet:!!i,result:i}}}t.default=i,e.exports=t.default},441(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(4881)),s=i(n(7611)),o=i(n(3276));function i(e){return e&&e.__esModule?e:{default:e}}const a={PlaceNew:["destination"],RemoveEntity:["entity"],MoveEntity:["entity","destination"],TakeFrom:["source","destination"],SetState:["entity","state"]};class c extends r.default{checkCondition(e,t,n,r){let{target:i,targets:c=[i]}=n;const u={arguments:c.reduce((e,t,n)=>({...e,[a[r.moveInstance.rule.type][n]]:t}),{})},p=(0,o.default)(e,u,r);let d={};i?d={target:p.bank.locate(i.entityId)}:c&&(d={targets:c.map(e=>p.bank.locate(e.entityId))});const f=(0,s.default)({...e,G:p},t,d,r),h=f.conditionsAreMet;return{results:h?l(f.results,t=>e.G.bank.locate(t)):f.results,conditionIsMet:h}}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if("object"!=typeof e||null===e)return e;if(n.has(e))return e;if(n.add(e),void 0!==e.entityId)return t(e.entityId);if(Array.isArray(e))return e.map(e=>l(e,t,n));{const r={};for(const s in e)e.hasOwnProperty(s)&&(r[s]=l(e[s],t,n));return r}}t.default=c,e.exports=t.default},4511(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=class{constructor(e,t,n){if(!e?.fromBank)throw new Error(`Do not create entities directly. Go through the Bank. rule: ${JSON.stringify(t)}`);this.rule=t,this.entityId=n,this.state={},this.rule.stateGroups&&Object.entries(this.rule.stateGroups).forEach(t=>{let[n,r]=t;const s=e?.initialStateGroups?.[n]??Object.keys(r)[0];Object.assign(this.state,r[s])}),this.rule.state&&Object.assign(this.state,this.rule.state)}get attributes(){return{...this.rule,...this,...this.state}}},e.exports=t.default},6677(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=(0,s.default)(e,u);return t.sharedBoard||(t.sharedBoard=t.entities),t.turn||(t.turn={minMoves:1,maxMoves:1}),function(e){e.entities=[...i,...e.entities||[]]}(t),a(t,t.entities),t.phases&&Object.entries(t.phases).forEach(e=>{a(e,t.entities)}),e.numPlayers&&(e.minPlayers=e.maxPlayers=e.numPlayers),t},o(n(8055));var r=o(n(7309)),s=o(n(6730));function o(e){return e&&e.__esModule?e:{default:e}}const i=[{type:"Space",count:"Infinity"},{type:"Board",name:"sharedBoard"},{name:"playerMarker",perPlayer:!0,count:"Infinity"}];function a(e,t){if(e.sharedBoard){const t=e.sharedBoard.map(e=>({entity:e,destination:{name:"sharedBoard"}}));e.initialPlacements||(e.initialPlacements=[]),e.initialPlacements.unshift(...t)}if(e.personalBoard){t.push({type:"Board",name:"personalBoard",perPlayer:!0});const n=e.personalBoard.map(e=>({entity:e,destination:{name:"personalBoard"}}));e.initialPlacements||(e.initialPlacements=[]),e.initialPlacements.unshift(...n)}if(e.initialPlacements){const n=e.initialPlacements.map(e=>{const{state:n,...s}=e.entity,o=(0,r.default)(t,s);return"personalBoard"===e.destination.name?{type:"ForEach",arguments:{targets:{type:"ctxPath",path:["playOrder"]}},move:{type:"PlaceNew",entity:{state:n,conditions:[{conditionType:"Is",matcher:{...s,...o.perPlayer?{player:{type:"contextPath",path:["loopTarget"]}}:{}}}]},arguments:{destination:{conditions:[{conditionType:"Is",matcher:{...e.destination,player:{type:"contextPath",path:["loopTarget"]}}}]}}}}:{type:"PlaceNew",entity:{state:n,conditions:[{conditionType:"Is",matcher:s}]},arguments:{destination:{conditions:[{conditionType:"Is",matcher:e.destination}]}}}});e.initialMoves||(e.initialMoves=[]),e.initialMoves.unshift(...n),delete e.initialPlacements}}const c=[["thatMatches","conditions"],["entityType","type"],["moveType","type"],["endConditions","endIf"]],l=[["isCurrentPlayer",{conditionType:"Is",matcher:{player:{type:"ctxPath",path:["currentPlayer"]}}}],["isEmpty",{conditionType:"Not",conditions:[{conditionType:"Contains"}]}],["ownerOfFirstResultEntity",{type:"contextPath",path:["results",0,"matches",0,0,"entities",0,"attributes","player"]}]],u=[{test:e=>e&&"object"==typeof e,replace:e=>(c.forEach(t=>{let[n,r]=t;e.hasOwnProperty(n)&&(e[r]=e[n],delete e[n])}),e)},{test:e=>"string"==typeof e,replace:e=>{for(let t=0,n=l.length;t<n;t++)if(e===l[t][0])return l[t][1];return e}},{test:e=>e?.conditions,replace:e=>(Array.isArray(e.conditions)||(e.conditions=[e.conditions]),e)},{test:e=>e?.conditions,replace:e=>{for(let t=0,n=e.conditions.length;t<n;t++)e.conditions[t].conditionType||(e.conditions[t]={conditionType:"Is",matcher:e.conditions[t]});return e}},{test:e=>"string"==typeof e?.target,replace:e=>({...e,target:{conditions:[{conditionType:"Is",matcher:{name:e.target}}]}})}];e.exports=t.default},4913(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n={name:t},c=(0,i.default)(e);return n.setup=e=>{const{ctx:t}=e,i={_meta:{passedPlayers:[],previousPayloads:{}}},a=function(e,t){return e.reduce((e,n)=>{const r={...n};if(r.perPlayer&&(delete r.perPlayer,r.variants?r.variants=new Array(t.numPlayers).fill().reduce((e,t,n)=>[...e,...r.variants.map(e=>({...e,player:`${n}`}))],[]):r.variants=new Array(t.numPlayers).fill().map((e,t)=>({player:`${t}`}))),r.variants){const t=r.variants;return delete r.variants,[...e,...t.map(e=>({...r,...e}))]}return[...e,r]},[])}(c.entities,t);return i.bank=new o.default(a),i.sharedBoard=i.bank.getOne(e,{conditions:[{conditionType:"Is",matcher:{name:"sharedBoard"}}]}),c.personalBoard&&(i.personalBoards=e.ctx.playOrder.map(t=>i.bank.getOne(e,{conditions:[{conditionType:"Is",matcher:{name:"personalBoard",player:t}}]}))),c.initialMoves?.forEach(t=>{(0,s.default)(t,n).moveInstance.doMove({...e,G:i})}),JSON.parse((0,r.serialize)(i))},c.moves&&(n.moves=f(c.moves,n)),c.turn&&(n.turn=p(c.turn,n)),c.phases&&(n.phases=Object.entries(c.phases).reduce((e,t)=>{let[r,s]=t;return{...e,[r]:d(s,n)}},{})),c.endIf&&(n.endIf=e=>{const t=(0,l.default)(e);return(0,a.default)(t,c.endIf)}),e.DEBUG_DISABLE_SECRET_STATE||(n.playerView=e=>{const{G:t,playerID:n}=(0,l.default)(e);return Object.values(t.bank.tracker).forEach(e=>{"All"!==e.rule.contentsHiddenFrom&&("Others"!==e.rule.contentsHiddenFrom||n===e.rule.player&&null!=n)||(e.spaces&&(e.spaces=e.rule.hideLength?[]:e.spaces.map(()=>t.bank.createEntity())),e.entities&&(e.entities=e.rule.hideLength?[]:e.entities.map(()=>t.bank.createEntity())))}),JSON.parse((0,r.serialize)(t))}),n};var r=n(7627),s=u(n(510)),o=u(n(6103)),i=u(n(6677)),a=u(n(236)),c=u(n(2796)),l=u(n(3358));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){const n={...e};return n.onBegin=n=>{const s=(0,l.default)(n),o=e.stages?.[s.ctx.activePlayers?.[s.ctx.currentPlayer]];return s.G._meta.passedPlayers=s.G._meta.passedPlayers.filter(e=>e!==s.ctx.currentPlayer),(0,c.default)(s,e.initialMoves,{game:t}),(0,c.default)(s,o?.initialMoves,{game:t}),JSON.parse((0,r.serialize)(s.G))},e.stages&&Object.entries(e.stages).forEach(e=>{let[r,s]=e;s.moves&&(n.stages[r].moves=f(s.moves,t))}),"RotateFirst"===e.order?.playOrder&&(e.order.first=()=>0,e.order.next=e=>{let{ctx:t}=e;return(t.playOrderPos+1)%t.numPlayers},n.order.playOrder=e=>{let{ctx:t,G:n}=e;return n._meta.isAfterFirstPhase?[...t.playOrder.slice(1),t.playOrder[0]]:t.playOrder}),n}function d(e,t){const n={...e};return e.turn&&(n.turn=p(e.turn,t)),e.moves&&(n.moves=f(e.moves,t)),n.onBegin=n=>{const s=(0,l.default)(n);return(0,c.default)(s,e.initialMoves,{game:t}),s.G._meta.currentPhaseHasBeenSetUp=!0,s.G._meta.nextPhase=e.next,JSON.parse((0,r.serialize)(s.G))},e.endIf&&(n.endIf=t=>{const n=(0,l.default)(t);if(n.G._meta.currentPhaseHasBeenSetUp){const t=(0,a.default)(n,e.endIf);if(t)return t}}),n.onEnd=e=>{let{G:t}=e;t._meta.currentPhaseHasBeenSetUp=!1,t._meta.isAfterFirstPhase=!0},n}function f(e,t){return Object.entries(e).reduce((e,n)=>{let[r,o]=n;return{...e,[r]:(0,s.default)({...o,name:r},t)}},{})}e.exports=t.default},8243(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e){e.events.endTurn()}}t.default=o,e.exports=t.default},3459(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r},o=n(510);class i extends s.default{do(e,t,n,r){let{arguments:{targets:s}}=n;s.forEach(n=>{const s={...r,loopTarget:n};(0,o.getMoveInstance)(t.move).doMove(e,void 0,s)})}}t.default=i,e.exports=t.default},5885(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e,t,n){let{arguments:{entity:r,destination:s}}=n;Array.isArray(r)?r.forEach(n=>{e.G.bank.findParent(n)?.remove(n),s.placeEntity(n,t.position)}):(e.G.bank.findParent(r)?.remove(r),s.placeEntity(r,t.position))}}t.default=o,e.exports=t.default},510(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=b(e),a=function(a,c){const l=(0,i.default)(a),{G:u}=l,p=function(e,t){if(e){const n=(0,r.deserialize)(JSON.stringify(e),o.registry);return n.arguments=Object.entries(n.arguments).reduce((e,n)=>{let[r,s]=n;return{...e,[r]:"number"==typeof s?t.bank.locate(s):s}},{}),n}return e}(c,u),d={moveInstance:n,game:t},f=n.doMove(l,p,d);if(d.moveConditionResults=[f],f!==s.INVALID_MOVE&&e.then)for(let t of e.then){const e=b(t).doMove(l,{},{...d});d.moveConditionResults.push(e)}return JSON.parse((0,r.serialize)(u))};return a.moveInstance=n,a},t.getMoveInstance=b;var r=n(7627),s=n(4039),o=n(3883),i=m(n(3358)),a=m(n(5885)),c=m(n(2414)),l=m(n(6642)),u=m(n(4888)),p=m(n(9421)),d=m(n(2790)),f=m(n(8243)),h=m(n(3409)),v=m(n(3459)),y=m(n(5953)),g=m(n(2763));function m(e){return e&&e.__esModule?e:{default:e}}function b(e){switch(e.type){case"MoveEntity":return new a.default(e);case"PlaceNew":return new l.default(e);case"RemoveEntity":return new c.default(e);case"TakeFrom":return new u.default(e);case"SetState":return new p.default(e);case"ForEach":return new v.default(e);case"Pass":return new y.default(e);case"Shuffle":return new g.default(e);case"SetActivePlayers":return new d.default(e);case"EndTurn":return new f.default(e);case"PassTurn":return new h.default(e)}}},6973(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4039),s=i(n(7611)),o=i(n(7208));function i(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.rule=this.transformRule(e)}checkValidity(e,t,n){const r=Object.entries(this.rule.arguments??{});if(!r.every(e=>{let[n]=e;const r=t.arguments[n];return void 0!==r&&(!Array.isArray(r)||r.length)}))return!1;const o={};for(let i=0,a=r.length;i<a;i++){const[a,c]=r[i],l=t.arguments[a],u=Array.isArray(l)?l:[l],p=[];for(let r=0,o=u.length;r<o;r++){const o=u[r],i=(0,s.default)(e,c,{target:o},{...n,moveArguments:t.arguments});if(p.push(i),!i.conditionsAreMet)break}const d=p.at(-1).conditionsAreMet;if(o[a]={results:p,conditionsAreMet:d},!d)break}const i=(0,s.default)(e,{conditions:this.rule.conditions},void 0,{...n,moveArguments:t.arguments});return{argumentResults:o,moveResults:i,conditionsAreMet:i.conditionsAreMet&&Object.values(o).every(e=>e.conditionsAreMet)}}isValid(e,t,n){return this.checkValidity(e,t,n).conditionsAreMet}doMove(e,t,n){let{skipCheck:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=(0,o.default)(e,this.rule,n),a={...t,arguments:Object.entries(i.arguments??{}).reduce((e,n)=>{let[r,s]=n;return{...e,[r]:t?.arguments?.[r]??s}},{})};let c;return i.name&&(e.G._meta.previousPayloads[i.name]=a),s||(c=this.checkValidity(e,a,n)),s||c.conditionsAreMet?(this.do(e,i,a,n),n&&(n.previousArguments=a.arguments),{conditionResults:c}):r.INVALID_MOVE}transformRule(e){const t=e.arguments;for(let e in t){const n=t[e];n.playerChoice||(n.resolveAsEntity=!0)}return e}},e.exports=t.default},3409(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e){e.G._meta.passedPlayers.length<e.ctx.numPlayers&&(e.G._meta.passedPlayers.push(e.ctx.currentPlayer),e.events.pass())}}t.default=o,e.exports=t.default},5953(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e){e.events.endTurn()}}t.default=o,e.exports=t.default},6642(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e,t,n,r){let{arguments:{destination:s}}=n;(t.matchMultiple?e.G.bank.getMultiple(e,{...t.entity,conditions:[...t.entity?.conditions||[],...t.conditions||[]]},t.count,r):[e.G.bank.getOne(e,{...t.entity,conditions:[...t.entity?.conditions||[],...t.conditions||[]]},r)]).forEach(e=>{s.placeEntity(e,t.position)})}}t.default=o,e.exports=t.default},2414(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e,t,n){let{arguments:{entity:r}}=n;e.G.bank.returnToBank(e,r)}}t.default=o,e.exports=t.default},2790(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(6973)),s=o(n(2796));function o(e){return e&&e.__esModule?e:{default:e}}class i extends r.default{do(e,t,n,r){e.events.setActivePlayers(t.options);const o=e.ctx.phase,i=t.options.currentPlayer?.stage,a=r.game.phases?.[o]??r.game,c=a?.turn?.stages?.[i];(0,s.default)(e,c?.initialMoves,{...r,stageName:i})}}t.default=i,e.exports=t.default},9421(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e,t,n){let{arguments:{entity:r,state:s}}=n;console.log("entity",r),console.log("state",s),r.state={...r.state,[s.property]:s.value}}}t.default=o,e.exports=t.default},2763(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e,t,n){let{arguments:{target:r}}=n;r.entities=e.random.Shuffle(r.entities)}}t.default=o,e.exports=t.default},4888(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(6973))&&r.__esModule?r:{default:r};class o extends s.default{do(e,t,n){let{arguments:{source:r,destination:s}}=n;s.placeEntity(r.takeOne(t.arguments.source.position))}}t.default=o,e.exports=t.default},7913(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1013)),s=o(n(9209));function o(e){return e&&e.__esModule?e:{default:e}}class i extends s.default{getSpacesCount(){return this.rule.width*this.rule.height}getRows(){return(0,r.default)(this.spaces,this.rule.width)}getCoordinates(e){const{width:t}=this.rule;return[e%t,Math.floor(e/t)]}getIndex(e){let[t,n]=e;const{width:r}=this.rule;return n*r+t}getSpace(e){return this.spaces[this.getIndex(e)]}getRelativeCoordinates(e,t){let[n,r]=e,[s,o]=t;const i=[n+s,r+o];return this.areCoordinatesValid(i)?i:null}areCoordinatesValid(e){let[t,n]=e;return t>=0&&n>=0&&t<this.rule.width&&n<this.rule.height}}t.default=i,e.exports=t.default},9209(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(4511))&&r.__esModule?r:{default:r};class o extends s.default{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];super(e,...n),this.spaces=this.makeSpaces(e.bank)}makeSpaces(e){return Array(this.getSpacesCount()).fill().map((t,n)=>e.createEntity({type:"Space",index:n}))}getEmptySpaces(){return this.spaces.filter(e=>e.isEmpty())}getSpace(e){return this.spaces[e]}getEntities(e){return this.getSpace(e).entities}placeEntity(e,t){this.getSpace(e).placeEntity(t)}}t.default=o,e.exports=t.default},1325(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(4511))&&r.__esModule?r:{default:r};class o extends s.default{constructor(){super(...arguments),this.entities=[]}placeEntity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Last";"Last"===t?this.entities.push(e):"First"===t&&this.entities.unshift(e)}remove(e){this.entities.splice(this.entities.indexOf(e),1)}takeOne(){if("First"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"First"))return this.entities.splice(0,1)[0]}isEmpty(){return 0===this.entities.length}}t.default=o,e.exports=t.default},3883(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registry=void 0;var r=u(n(2606)),s=u(n(9209)),o=u(n(1325)),i=u(n(7913)),a=u(n(6103)),c=u(n(784)),l=u(n(4511));function u(e){return e&&e.__esModule?e:{default:e}}t.registry={Board:r.default,SpaceGroup:s.default,Space:o.default,Grid:i.default,Bank:a.default,BankSlot:c.default,Entity:l.default}},3538(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.values(t).some(t=>{const{moveInstance:n}=t,r={moveInstance:n},o=(0,s.default)(e,n.rule,r).arguments??{};if(0===Object.keys(o).length)return n.isValid(e,{arguments:{}},r);const i=function(e){const t=Object.keys(e),n={},r={};t.forEach(e=>{n[e]=[],r[e]=0}),t.forEach(s=>{a(e[s]).forEach(e=>{t.includes(e)&&e!==s&&(n[e].push(s),r[s]++)})});const s=t.filter(e=>0===r[e]),o=[];for(;s.length>0;){const e=s.shift();o.push(e),n[e].forEach(e=>{r[e]--,0===r[e]&&s.push(e)})}return o.length===t.length?o:t}(o);return c(e,n,o,i,r)})};var r=i(n(1331)),s=i(n(7208)),o=i(n(4198));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(!e||"object"!=typeof e)return t;"contextPath"===e.type&&Array.isArray(e.path)&&"moveArguments"===e.path[0]&&e.path[1]&&t.add(e.path[1]);for(const n of Object.values(e))a(n,t);return t}function c(e,t,n,s,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(a===s.length){const n={arguments:l};return t.isValid(e,n,i)}const u=s[a],p=n[u],d={...i,moveArguments:l},f=(0,r.default)(p)?(0,o.default)(e,{...p,matchMultiple:!0},d,u):p,h=Array.isArray(f)?f:void 0!==f?[f]:[];return 0!==h.length&&h.some(r=>c(e,t,n,s,i,a+1,{...l,[u]:r}))}e.exports=t.default},7611(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){const{conditions:o=[]}=t,i=[];let a;for(const t of o){const o=(0,s.default)(t).check(e,n,r);if(!o.conditionIsMet){a=t;break}i.push(o)}return{results:i,failedAt:a,conditionsAreMet:i.length===o.length}};var r,s=(r=n(2130))&&r.__esModule?r:{default:r};e.exports=t.default},9965(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){const o=(0,s.default)(e,t,r).map(e=>e.argName);return{arguments:n.reduce((e,t,n)=>({...e,[o[n]]:t}),{})}};var r,s=(r=n(2146))&&r.__esModule?r:{default:r};e.exports=t.default},3358(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{...e,G:(0,r.deserialize)(JSON.stringify(e.G),s.registry)}};var r=n(7627),s=n(3883);e.exports=t.default},2796(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return t?.length?(t.forEach(t=>{(0,s.default)(t,n.game).moveInstance.doMove(e,void 0,n)}),e.G):e.G};var r,s=(r=n(510))&&r.__esModule?r:{default:r};e.exports=t.default},6413(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){return(0,r.default)(function(e,t,n){const r={...t};return delete r.state,delete r.stateGroups,(0,s.default)(e,r,n)}(e,t,o))(function(e){return{...e.rule,...e.state}}(n))};var r=o(n(1505)),s=o(n(7208));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2742(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){let o,{conditions:i=[]}=t;for(const t of i){const i=(0,s.default)(t).check(e,n,r);if(i.conditionIsMet){o={...i,conditionRule:t};break}}return o};var r,s=(r=n(2130))&&r.__esModule?r:{default:r};e.exports=t.default},4171(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let{game:n,playerID:r,stageName:s}=t;const o=e.ctx.phase,i=s??e.ctx.activePlayers?.[r??e.ctx.currentPlayer],a=n.phases?.[o]??n;return(a.turn?.stages?.[i]??a).moves??{}},e.exports=t.default},236(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let o;for(const n of t){const t=(0,r.default)(e,n);if(t.conditionsAreMet){o={scenario:n,conditionResults:t};break}}return o?.scenario?.result?(0,s.default)(e,o.scenario.result,{results:o.conditionResults.results}):o};var r=o(n(7611)),s=o(n(7208));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2146(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return n[t.type].filter(e=>t.arguments[e].playerChoice).map(n=>({argName:n,getClickable:"state"===n?()=>t.arguments[n].possibleValues.map(e=>({abstract:!0,...t.arguments[n],value:e})):r=>e.G.bank.findAll(e,t.arguments[n],r)}))};const n={PlaceNew:["destination"],RemoveEntity:["entity"],MoveEntity:["entity","destination"],TakeFrom:["source","destination"],SetState:["entity","state"]};e.exports=t.default},6648(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){let r=t;for(const t of n){if(void 0===r)return r;if(t?.flatten){if(!Array.isArray(r))return;r=r.flat(),t.map&&(r=r.map(n=>e(n,t.map)))}else r=r[t]}return r},e.exports=t.default},1138(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){const s=function(e,t){const n={moveInstance:t.moveInstance?.id,moveArguments:t.moveArguments};return JSON.stringify({pattern:e,context:n})}(n,r);let u=i.get(t);u||(u=new Map,i.set(t,u));const p=function(e){return(e.entities||[]).map(e=>{const t=e.entities||[];return 0===t.length?"empty":t.map(e=>{const t=Object.keys(e).sort(),n={};return t.forEach(t=>{n[t]=e[t]}),JSON.stringify(n)}).sort().join("|")}).join(",")}(t),d=u.get(s);if(d&&d.stateKey===p)return d.result;const f=[],h=n.reduce((e,t)=>e+(t.minCount||t.count||1),0);for(const[s,i]of o){const o=c(t,s,i);for(const[c,u]of o){const o=l(t,c,u,s,i);if(o.length<h)continue;const p=a(e,o,n,h,r);if(f.push(...p),0===p.length||n.length>1){const t=a(e,o,n,h,r,!0);f.push(...t)}}}const v={matches:f,conditionIsMet:!!f.length};return u.set(s,{stateKey:p,result:v}),v},s(n(1505));var r=s(n(7611));function s(e){return e&&e.__esModule?e:{default:e}}const o=[[1,0],[0,1],[1,1],[-1,1]],i=new WeakMap;function a(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const i=[],a=t.length;let c=0;for(;c<=a-r;){const r=u(e,t,c,n,s,o);r?(i.push(r),c++):c++}return i}function c(e,t,n){const{width:r,height:s}=e.attributes,o=[];if(1===t&&0===n)for(let e=0;e<s;e++)o.push([0,e]);else if(0===t&&1===n)for(let e=0;e<r;e++)o.push([e,0]);else if(1===t&&1===n){for(let e=0;e<r;e++)o.push([e,0]);for(let e=1;e<s;e++)o.push([0,e])}else if(-1===t&&1===n){for(let e=0;e<r;e++)o.push([e,0]);for(let e=1;e<s;e++)o.push([r-1,e])}return o}function l(e,t,n,r,s){const o=[];let[i,a]=[t,n];for(;e.areCoordinatesValid([i,a]);)o.push(e.getSpace([i,a])),i+=r,a+=s;return o}function u(e,t,n,r,s){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=n;const a=[],c=t.length;for(const n of r){const{count:r,minCount:l,maxCount:u,conditions:d}=n;let f,h;void 0!==r?f=h=r:void 0!==l||void 0!==u?(f=l||0,h=u||1/0):f=h=1;let v=0;const y=[];for(;v<h&&i<c;){const n=o?t[c-1-i]:t[i];if(!p(e,n,d,y,s))break;y.push(n),v++,i++}if(v<f)return null;a.push(...y)}return a.length>0?a:null}function p(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0;return!n||0===n.length||(0,r.default)(e,{conditions:n},{target:t,targets:[t,...s]},o).conditionsAreMet}e.exports=t.default},6730(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return JSON.parse(JSON.stringify(e),(e,n)=>{let r=n;for(const e of t)e.test(r)&&(r=e.replace(r));return r})},e.exports=t.default},380(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e?.arguments){const t={...e};return t.arguments=Object.entries(t.arguments).reduce((e,t)=>{let[n,r]=t;return{...e,[n]:r.abstract?r:r.entityId}},{}),JSON.parse((0,r.serialize)(t,{deduplicateInstances:!1}))}return e};var r=n(7627);e.exports=t.default},4198(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){return!o.includes(r)&&(0,s.default)(t)?e.G.bank.find(e,t,n):t};var r,s=(r=n(1331))&&r.__esModule?r:{default:r};const o=["state"];e.exports=t.default},8123(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const r=(0,o.default)(e,t.arguments,n);return i.evaluate(t.expression,r)};var r,s=n(2016),o=(r=n(7208))&&r.__esModule?r:{default:r};const i=new s.Parser;i.functions.sum=e=>e.reduce((e,t)=>e+t,0),e.exports=t.default},7208(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var r=c(n(1331)),s=c(n(4383)),o=c(n(6648)),i=c(n(8123)),a=c(n(4198));function c(e){return e&&e.__esModule?e:{default:e}}const l=["conditions","move","then","mapping"];function u(e,t,n,c){if(!(0,r.default)(t)&&!Array.isArray(t))return t;let d=Array.isArray(t)?[...t]:{...t};Object.entries(t).forEach(t=>{let[r,s]=t;l.includes(r)||(d[r]=u(e,s,n,r))});const f=function(e,t,n){if("expression"===t?.type)return(0,i.default)(e,{...t,arguments:u(e,t.arguments,n,"arguments")},n);if("count"===t?.type)return e.G.bank.findAll(e,t,n).length;if("contextPath"===t?.type)return(0,o.default)(n,t.path);if("ctxPath"===t?.type)return(0,o.default)(e.ctx,t.path);if("gamePath"===t?.type)return(0,o.default)(e.G,t.path);if("RelativePath"===t?.type){const r=u(e,t.target,n,"target");return(0,o.default)(r.attributes,t.path)??null}if("Parent"===t?.type){const r=t.target?u(e,t.target,n,"target"):n.originalTarget;return e.G.bank.findParent(r)??null}if("map"===t?.type)return p(e,t.targets,t.mapping,n).map(e=>e.value);if("mapMax"===t?.type){const r=p(e,t.targets,t.mapping,n);let s;const o=[];for(let e=0,t=r.length;e<t;e++){const{target:t,value:n}=r[e];void 0===s||n>s?(s=n,o.length=0,o.push(t)):n===s&&o.push(t)}return o}if("Pick"!==t?.type){if("Coordinates"===t?.type){const r=t.target?u(e,t.target,n,"target"):n.originalTarget;return e.G.bank.findParent(r).getCoordinates(r.rule.index)}if("relativeCoordinates"===t?.type){const r=t.target?u(e,t.target,n,"target"):n.originalTarget,s=e.G.bank.findParent(r),o=s.getCoordinates(r.rule.index),i=s.getRelativeCoordinates(o,u(e,t.location,n,"location"));return(i&&s.spaces[s.getIndex(i)])??null}return t}{const r=u(e,t.target,n,"target");if(void 0!==r){console.log("target",r),console.log("target.attributes",r.attributes);const o=(0,s.default)(u(e,r.attributes,n,"attributes"),t.properties);return console.log("x",o),o}console.log("8888target",r)}}(e,d,n);return f?.resolveAsEntity||"target"===c||"targets"===c?(0,a.default)(e,f,n,c):f}function p(e,t,n,r){return t.resolveAsEntity=!0,u(e,t,r)?.map(t=>({target:t,value:u(e,n,{...r,loopTarget:t})}))??[]}e.exports=t.default},3276(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const o=(0,r.deserialize)((0,r.serialize)(e.G),s.registry),i={...e,G:o},a={...t,arguments:{}};return Object.entries(t.arguments).forEach(e=>{let[t,n]=e;a.arguments[t]=n.abstract?n:o.bank.locate("number"==typeof n?n:n.entityId)}),n.moveInstance.doMove(i,a,n,{skipCheck:!0}),o};var r=n(7627),s=n(3883);e.exports=t.default},7833(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,s=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(s=r))}),t.splice(s,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(736)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736(e,t,n){e.exports=function(e){function t(e){let n,s,o,i=null;function a(...e){if(!a.enabled)return;const r=a,s=Number(new Date),o=s-(n||s);r.diff=o,r.prev=n,r.curr=s,n=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,s)=>{if("%%"===n)return"%";i++;const o=t.formatters[s];if("function"==typeof o){const t=e[i];n=o.call(r,t),e.splice(i,1),i--}return n}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(s!==t.namespaces&&(s=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function s(e,t){let n=0,r=0,s=-1,o=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(s=r,o=n,r++):(n++,r++);else{if(-1===s)return!1;r=s+1,o++,n=o}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of n)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const n of t.skips)if(s(e,n))return!1;for(const n of t.names)if(s(e,n))return!0;return!1},t.humanize=n(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},6477(e,t){function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(e){return!!e&&!!e[J]}function s(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Y}(e)||Array.isArray(e)||!!e[H]||!!(null===(t=e.constructor)||void 0===t?void 0:t[H])||p(e)||d(e))}function o(e,t,n){void 0===n&&(n=!1),0===i(e)?(n?Object.keys:X)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function i(e){var t=e[J];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:p(e)?2:d(e)?3:0}function a(e,t){return 2===i(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){return 2===i(e)?e.get(t):e[t]}function l(e,t,n){var r=i(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){return z&&e instanceof Map}function d(e){return q&&e instanceof Set}function f(e){return e.i||e.u}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Q(e);delete t[J];for(var n=X(t),r=0;r<n.length;r++){var s=n[r],o=t[s];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Object.getPrototypeOf(e),t)}function v(e,t){return void 0===t&&(t=!1),g(e)||r(e)||!s(e)||(i(e)>1&&(e.set=e.add=e.clear=e.delete=y),Object.freeze(e),t&&o(e,function(e,t){return v(t,!0)},!0)),e}function y(){n(2)}function g(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function m(e){var t=Z[e];return t||n(18,e),t}function b(e,t){Z[e]||(Z[e]=t)}function x(){return L}function _(e,t){t&&(m("Patches"),e.o=[],e.v=[],e.s=t)}function w(e){P(e),e.p.forEach(k),e.p=null}function P(e){e===L&&(L=e.l)}function O(e){return L={p:[],l:L,h:e,_:!0,m:0}}function k(e){var t=e[J];0===t.t||1===t.t?t.j():t.O=!0}function M(e,t){t.m=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.S||m("ES5").P(t,e,o),o?(r[J].g&&(w(t),n(4)),s(e)&&(e=E(t,e),t.l||A(t,e)),t.o&&m("Patches").M(r[J].u,e,t.o,t.v)):e=E(t,r,[]),w(t),t.o&&t.s(t.o,t.v),e!==W?e:void 0}function E(e,t,n){if(g(t))return t;var r=t[J];if(!r)return o(t,function(s,o){return $(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.g)return A(e,r.u,!0),r.u;if(!r.R){r.R=!0,r.A.m--;var s=4===r.t||5===r.t?r.i=h(r.k):r.i,i=s,a=!1;3===r.t&&(i=new Set(s),s.clear(),a=!0),o(i,function(t,o){return $(e,r,s,t,o,n,a)}),A(e,s,!1),n&&e.o&&m("Patches").F(r,n,e.o,e.v)}return r.i}function $(e,t,n,o,i,c,u){if(r(i)){var p=E(e,i,c&&t&&3!==t.t&&!a(t.N,o)?c.concat(o):void 0);if(l(n,o,p),!r(p))return;e._=!1}else u&&n.add(i);if(s(i)&&!g(i)){if(!e.h.D&&e.m<1)return;E(e,i),t&&t.A.l||A(e,i)}}function A(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e._&&v(t,n)}function j(e,t){var n=e[J];return(n?f(n):e)[t]}function S(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function I(e){e.g||(e.g=!0,e.l&&I(e.l))}function C(e){e.i||(e.i=h(e.u))}function T(e,t,n){var r=p(t)?m("MapSet").K(t,n):d(t)?m("MapSet").$(t,n):e.S?function(e,t){var n=Array.isArray(e),r={t:n?1:0,A:t?t.A:x(),g:!1,R:!1,N:{},l:t,u:e,k:null,i:null,j:null,C:!1},s=r,o=ee;n&&(s=[r],o=te);var i=Proxy.revocable(s,o),a=i.revoke,c=i.proxy;return r.k=c,r.j=a,c}(t,n):m("ES5").I(t,n);return(n?n.A:x()).p.push(r),r}function N(e){return r(e)||n(22,e),function e(t){if(!s(t))return t;var n,r=t[J],a=i(t);if(r){if(!r.g&&(r.t<4||!m("ES5").J(r)))return r.u;r.R=!0,n=D(t,a),r.R=!1}else n=D(t,a);return o(n,function(t,s){r&&c(r.u,t)===s||l(n,t,e(s))}),3===a?new Set(n):n}(e)}function D(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}function R(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){return ee.get(this[J],e)},set:function(t){ee.set(this[J],e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][J];if(!r.g)switch(r.t){case 5:s(r)&&I(r);break;case 4:n(r)&&I(r)}}}function n(e){for(var t=e.u,n=e.k,r=X(n),s=r.length-1;s>=0;s--){var o=r[s];if(o!==J){var i=t[o];if(void 0===i&&!a(t,o))return!0;var c=n[o],l=c&&c[J];if(l?l.u!==i:!u(c,i))return!0}}var p=!!t[J];return r.length!==X(t).length+(p?0:1)}function s(e){var t=e.k;if(t.length!==e.u.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};b("ES5",{I:function(t,n){var r=Array.isArray(t),s=function(t,n){if(t){for(var r=Array(n.length),s=0;s<n.length;s++)Object.defineProperty(r,""+s,e(s,!0));return r}var o=Q(n);delete o[J];for(var i=X(o),a=0;a<i.length;a++){var c=i[a];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={t:r?5:4,A:n?n.A:x(),g:!1,R:!1,N:{},l:n,u:t,k:s,i:null,O:!1,C:!1};return Object.defineProperty(s,J,{value:o,writable:!0}),s},P:function(e,n,i){i?r(n)&&n[J].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var n=t[J];if(n){var r=n.u,i=n.k,c=n.N,l=n.t;if(4===l)o(i,function(t){t!==J&&(void 0!==r[t]||a(r,t)?c[t]||e(i[t]):(c[t]=!0,I(n)))}),o(r,function(e){void 0!==i[e]||a(i,e)||(c[e]=!1,I(n))});else if(5===l){if(s(n)&&(I(n),c.length=!0),i.length<r.length)for(var u=i.length;u<r.length;u++)c[u]=!1;else for(var p=r.length;p<i.length;p++)c[p]=!0;for(var d=Math.min(i.length,r.length),f=0;f<d;f++)i.hasOwnProperty(f)||(c[f]=!0),void 0===c[f]&&e(i[f])}}}}(e.p[0]),t(e.p))},J:function(e){return 4===e.t?n(e):s(e)}})}function B(){function e(t){if(!s(t))return t;if(Array.isArray(t))return t.map(e);if(p(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(d(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return a(t,H)&&(n[H]=t[H]),n}function t(t){return r(t)?e(t):t}var l="add";b("Patches",{W:function(t,r){return r.forEach(function(r){for(var s=r.path,o=r.op,a=t,u=0;u<s.length-1;u++){var p=i(a),d=s[u];"string"!=typeof d&&"number"!=typeof d&&(d=""+d),0!==p&&1!==p||"__proto__"!==d&&"constructor"!==d||n(24),"function"==typeof a&&"prototype"===d&&n(24),"object"!=typeof(a=c(a,d))&&n(15,s.join("/"))}var f=i(a),h=e(r.value),v=s[s.length-1];switch(o){case"replace":switch(f){case 2:return a.set(v,h);case 3:n(16);default:return a[v]=h}case l:switch(f){case 1:return"-"===v?a.push(h):a.splice(v,0,h);case 2:return a.set(v,h);case 3:return a.add(h);default:return a[v]=h}case"remove":switch(f){case 1:return a.splice(v,1);case 2:return a.delete(v);case 3:return a.delete(r.value);default:return delete a[v]}default:n(17,o)}}),t},F:function(e,n,r,s){switch(e.t){case 0:case 4:case 2:return function(e,n,r,s){var i=e.u,u=e.i;o(e.N,function(e,o){var p=c(i,e),d=c(u,e),f=o?a(i,e)?"replace":l:"remove";if(p!==d||"replace"!==f){var h=n.concat(e);r.push("remove"===f?{op:f,path:h}:{op:f,path:h,value:d}),s.push(f===l?{op:"remove",path:h}:"remove"===f?{op:l,path:h,value:t(p)}:{op:"replace",path:h,value:t(p)})}})}(e,n,r,s);case 5:case 1:return function(e,n,r,s){var o=e.u,i=e.N,a=e.i;if(a.length<o.length){var c=[a,o];o=c[0],a=c[1];var u=[s,r];r=u[0],s=u[1]}for(var p=0;p<o.length;p++)if(i[p]&&a[p]!==o[p]){var d=n.concat([p]);r.push({op:"replace",path:d,value:t(a[p])}),s.push({op:"replace",path:d,value:t(o[p])})}for(var f=o.length;f<a.length;f++){var h=n.concat([f]);r.push({op:l,path:h,value:t(a[f])})}o.length<a.length&&s.push({op:"replace",path:n.concat(["length"]),value:o.length})}(e,n,r,s);case 3:return function(e,t,n,r){var s=e.u,o=e.i,i=0;s.forEach(function(e){if(!o.has(e)){var s=t.concat([i]);n.push({op:"remove",path:s,value:e}),r.unshift({op:l,path:s,value:e})}i++}),i=0,o.forEach(function(e){if(!s.has(e)){var o=t.concat([i]);n.push({op:l,path:o,value:e}),r.unshift({op:"remove",path:o,value:e})}i++})}(e,n,r,s)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===W?void 0:t}),r.push({op:"replace",path:[],value:e})}})}function F(){function e(e,t){function n(){this.constructor=e}a(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.i||(e.N=new Map,e.i=new Map(e.u))}function r(e){e.i||(e.i=new Set,e.u.forEach(function(t){if(s(t)){var n=T(e.A.h,t,e);e.p.set(t,n),e.i.add(n)}else e.i.add(t)}))}function i(e){e.O&&n(3,JSON.stringify(f(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},c=function(){function n(e,t){return this[J]={t:2,l:t,A:t?t.A:x(),g:!1,R:!1,i:void 0,N:void 0,u:e,k:this,C:!1,O:!1},this}e(n,Map);var r=n.prototype;return Object.defineProperty(r,"size",{get:function(){return f(this[J]).size}}),r.has=function(e){return f(this[J]).has(e)},r.set=function(e,n){var r=this[J];return i(r),f(r).has(e)&&f(r).get(e)===n||(t(r),I(r),r.N.set(e,!0),r.i.set(e,n),r.N.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var n=this[J];return i(n),t(n),I(n),n.u.has(e)?n.N.set(e,!1):n.N.delete(e),n.i.delete(e),!0},r.clear=function(){var e=this[J];i(e),f(e).size&&(t(e),I(e),e.N=new Map,o(e.u,function(t){e.N.set(t,!1)}),e.i.clear())},r.forEach=function(e,t){var n=this;f(this[J]).forEach(function(r,s){e.call(t,n.get(s),s,n)})},r.get=function(e){var n=this[J];i(n);var r=f(n).get(e);if(n.R||!s(r))return r;if(r!==n.u.get(e))return r;var o=T(n.A.h,r,n);return t(n),n.i.set(e,o),o},r.keys=function(){return f(this[J]).keys()},r.values=function(){var e,t=this,n=this.keys();return(e={})[K]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,n=this.keys();return(e={})[K]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},r[K]=function(){return this.entries()},n}(),l=function(){function t(e,t){return this[J]={t:3,l:t,A:t?t.A:x(),g:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return f(this[J]).size}}),n.has=function(e){var t=this[J];return i(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},n.add=function(e){var t=this[J];return i(t),this.has(e)||(r(t),I(t),t.i.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[J];return i(t),r(t),I(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},n.clear=function(){var e=this[J];i(e),f(e).size&&(r(e),I(e),e.i.clear())},n.values=function(){var e=this[J];return i(e),r(e),e.i.values()},n.entries=function(){var e=this[J];return i(e),r(e),e.i.entries()},n.keys=function(){return this.values()},n[K]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();b("MapSet",{K:function(e,t){return new c(e,t)},$:function(e,t){return new l(e,t)}})}var G;Object.defineProperty(t,"__esModule",{value:!0});var L,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),z="undefined"!=typeof Map,q="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,W=U?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),H=U?Symbol.for("immer-draftable"):"__$immer_draftable",J=U?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Y=""+Object.prototype.constructor,X="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Q=Object.getOwnPropertyDescriptors||function(e){var t={};return X(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Z={},ee={get:function(e,t){if(t===J)return e;var n=f(e);if(!a(n,t))return function(e,t,n){var r,s=S(t,n);return s?"value"in s?s.value:null===(r=s.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.R||!s(r)?r:r===j(e.u,t)?(C(e),e.i[t]=T(e.A.h,r,e)):r},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,n){var r=S(f(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.g){var s=j(f(e),t),o=null==s?void 0:s[J];if(o&&o.u===n)return e.i[t]=n,e.N[t]=!1,!0;if(u(n,s)&&(void 0!==n||a(e.u,t)))return!0;C(e),I(e)}return e.i[t]===n&&(void 0!==n||t in e.i)||Number.isNaN(n)&&Number.isNaN(e.i[t])||(e.i[t]=n,e.N[t]=!0),!0},deleteProperty:function(e,t){return void 0!==j(e.u,t)||t in e.u?(e.N[t]=!1,C(e),I(e)):delete e.N[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var n=f(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){n(12)}},te={};o(ee,function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),te.deleteProperty=function(e,t){return te.set.call(this,e,t,void 0)},te.set=function(e,t,n){return ee.set.call(this,e[0],t,n,e[0])};var ne=function(){function e(e){var t=this;this.S=V,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var i=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,s=Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return a.produce(e,function(e){var n;return(n=r).call.apply(n,[t,e].concat(s))})}}var c;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),s(e)){var l=O(t),u=T(t,e,void 0),p=!0;try{c=r(u),p=!1}finally{p?w(l):P(l)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then(function(e){return _(l,o),M(e,l)},function(e){throw w(l),e}):(_(l,o),M(c,l))}if(!e||"object"!=typeof e){if(void 0===(c=r(e))&&(c=e),c===W&&(c=void 0),t.D&&v(c,!0),o){var d=[],f=[];m("Patches").M(e,c,d,f),o(d,f)}return c}n(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,s=Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(s))})};var r,s,o=t.produce(e,n,function(e,t){r=e,s=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,s]}):[o,r,s]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){s(e)||n(8),r(e)&&(e=N(e));var t=O(this),o=T(this,e,void 0);return o[J].C=!0,P(t),o},t.finishDraft=function(e,t){var n=(e&&e[J]).A;return _(n,t),M(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!V&&n(20),this.S=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var s=t[n];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}n>-1&&(t=t.slice(n+1));var o=m("Patches").W;return r(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}(),re=new ne,se=re.produce,oe=re.produceWithPatches.bind(re),ie=re.setAutoFreeze.bind(re),ae=re.setUseProxies.bind(re),ce=re.applyPatches.bind(re),le=re.createDraft.bind(re),ue=re.finishDraft.bind(re);t.Immer=ne,t.applyPatches=ce,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=le,t.current=N,t.default=se,t.enableAllPlugins=function(){R(),F(),B()},t.enableES5=R,t.enableMapSet=F,t.enablePatches=B,t.finishDraft=ue,t.freeze=v,t.immerable=H,t.isDraft=r,t.isDraftable=s,t.nothing=W,t.original=function(e){return r(e)||n(23,e),e[J].u},t.produce=se,t.produceWithPatches=oe,t.setAutoFreeze=ie,t.setUseProxies=ae},5878(e,t,n){"use strict";e.exports=n(6477)},9001(e){var t,n,r=Function.prototype,s=Object.prototype,o=r.toString,i=s.hasOwnProperty,a=o.call(Object),c=s.toString,l=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=l(e);if(null===t)return!0;var n=i.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==a}},5580(e,t,n){var r=n(6110)(n(9325),"DataView");e.exports=r},1549(e,t,n){var r=n(2032),s=n(3862),o=n(6721),i=n(2749),a=n(5749);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=i,c.prototype.set=a,e.exports=c},79(e,t,n){var r=n(3702),s=n(80),o=n(4739),i=n(8655),a=n(1175);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=i,c.prototype.set=a,e.exports=c},604(e,t,n){var r=n(6110)(n(9325),"Map");e.exports=r},3661(e,t,n){var r=n(3040),s=n(7670),o=n(289),i=n(4509),a=n(2949);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=i,c.prototype.set=a,e.exports=c},2804(e,t,n){var r=n(6110)(n(9325),"Promise");e.exports=r},6545(e,t,n){var r=n(6110)(n(9325),"Set");e.exports=r},8859(e,t,n){var r=n(3661),s=n(1380),o=n(1459);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=s,i.prototype.has=o,e.exports=i},7217(e,t,n){var r=n(79),s=n(1420),o=n(938),i=n(3605),a=n(9817),c=n(945);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=s,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=c,e.exports=l},1873(e,t,n){var r=n(9325).Symbol;e.exports=r},7828(e,t,n){var r=n(9325).Uint8Array;e.exports=r},8303(e,t,n){var r=n(6110)(n(9325),"WeakMap");e.exports=r},1033(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},3729(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},9770(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,s=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[s++]=i)}return o}},695(e,t,n){var r=n(8096),s=n(2428),o=n(6449),i=n(3656),a=n(361),c=n(7167),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&s(e),p=!n&&!u&&i(e),d=!n&&!u&&!p&&c(e),f=n||u||p||d,h=f?r(e.length,String):[],v=h.length;for(var y in e)!t&&!l.call(e,y)||f&&("length"==y||p&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||h.push(y);return h}},4932(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}},4528(e){e.exports=function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}},4248(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},6547(e,t,n){var r=n(3360),s=n(5288),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];o.call(e,t)&&s(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},6025(e,t,n){var r=n(5288);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},4733(e,t,n){var r=n(1791),s=n(5950);e.exports=function(e,t){return e&&r(t,s(t),e)}},3838(e,t,n){var r=n(1791),s=n(7241);e.exports=function(e,t){return e&&r(t,s(t),e)}},3360(e,t,n){var r=n(3243);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9999(e,t,n){var r=n(7217),s=n(3729),o=n(6547),i=n(4733),a=n(3838),c=n(3290),l=n(3007),u=n(2271),p=n(8948),d=n(2),f=n(3349),h=n(5861),v=n(6189),y=n(7199),g=n(5529),m=n(6449),b=n(3656),x=n(7730),_=n(3805),w=n(8440),P=n(5950),O=n(7241),k="[object Arguments]",M="[object Function]",E="[object Object]",$={};$[k]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object DataView]"]=$["[object Boolean]"]=$["[object Date]"]=$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Map]"]=$["[object Number]"]=$[E]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object Symbol]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Error]"]=$[M]=$["[object WeakMap]"]=!1,e.exports=function e(t,n,A,j,S,I){var C,T=1&n,N=2&n,D=4&n;if(A&&(C=S?A(t,j,S,I):A(t)),void 0!==C)return C;if(!_(t))return t;var R=m(t);if(R){if(C=v(t),!T)return l(t,C)}else{var B=h(t),F=B==M||"[object GeneratorFunction]"==B;if(b(t))return c(t,T);if(B==E||B==k||F&&!S){if(C=N||F?{}:g(t),!T)return N?p(t,a(C,t)):u(t,i(C,t))}else{if(!$[B])return S?t:{};C=y(t,B,T)}}I||(I=new r);var G=I.get(t);if(G)return G;I.set(t,C),w(t)?t.forEach(function(r){C.add(e(r,n,A,r,t,I))}):x(t)&&t.forEach(function(r,s){C.set(s,e(r,n,A,s,t,I))});var L=R?void 0:(D?N?f:d:N?O:P)(t);return s(L||t,function(r,s){L&&(r=t[s=r]),o(C,s,e(r,n,A,s,t,I))}),C}},9344(e,t,n){var r=n(3805),s=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(s)return s(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},909(e,t,n){var r=n(641),s=n(8329)(r);e.exports=s},6574(e,t,n){var r=n(909);e.exports=function(e,t){var n=[];return r(e,function(e,r,s){t(e,r,s)&&n.push(e)}),n}},2523(e){e.exports=function(e,t,n,r){for(var s=e.length,o=n+(r?1:-1);r?o--:++o<s;)if(t(e[o],o,e))return o;return-1}},3120(e,t,n){var r=n(4528),s=n(5891);e.exports=function e(t,n,o,i,a){var c=-1,l=t.length;for(o||(o=s),a||(a=[]);++c<l;){var u=t[c];n>0&&o(u)?n>1?e(u,n-1,o,i,a):r(a,u):i||(a[a.length]=u)}return a}},6649(e,t,n){var r=n(3221)();e.exports=r},641(e,t,n){var r=n(6649),s=n(5950);e.exports=function(e,t){return e&&r(e,t,s)}},7422(e,t,n){var r=n(1769),s=n(7797);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[s(t[n++])];return n&&n==o?e:void 0}},2199(e,t,n){var r=n(4528),s=n(6449);e.exports=function(e,t,n){var o=t(e);return s(e)?o:r(o,n(e))}},2552(e,t,n){var r=n(1873),s=n(659),o=n(9350),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?s(e):o(e)}},8077(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},7534(e,t,n){var r=n(2552),s=n(346);e.exports=function(e){return s(e)&&"[object Arguments]"==r(e)}},270(e,t,n){var r=n(7068),s=n(346);e.exports=function e(t,n,o,i,a){return t===n||(null==t||null==n||!s(t)&&!s(n)?t!=t&&n!=n:r(t,n,o,i,e,a))}},7068(e,t,n){var r=n(7217),s=n(5911),o=n(1986),i=n(689),a=n(5861),c=n(6449),l=n(3656),u=n(7167),p="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,y,g){var m=c(e),b=c(t),x=m?d:a(e),_=b?d:a(t),w=(x=x==p?f:x)==f,P=(_=_==p?f:_)==f,O=x==_;if(O&&l(e)){if(!l(t))return!1;m=!0,w=!1}if(O&&!w)return g||(g=new r),m||u(e)?s(e,t,n,v,y,g):o(e,t,x,n,v,y,g);if(!(1&n)){var k=w&&h.call(e,"__wrapped__"),M=P&&h.call(t,"__wrapped__");if(k||M){var E=k?e.value():e,$=M?t.value():t;return g||(g=new r),y(E,$,n,v,g)}}return!!O&&(g||(g=new r),i(e,t,n,v,y,g))}},9172(e,t,n){var r=n(5861),s=n(346);e.exports=function(e){return s(e)&&"[object Map]"==r(e)}},1799(e,t,n){var r=n(7217),s=n(270);e.exports=function(e,t,n,o){var i=n.length,a=i,c=!o;if(null==e)return!a;for(e=Object(e);i--;){var l=n[i];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var u=(l=n[i])[0],p=e[u],d=l[1];if(c&&l[2]){if(void 0===p&&!(u in e))return!1}else{var f=new r;if(o)var h=o(p,d,u,e,t,f);if(!(void 0===h?s(d,p,3,o,f):h))return!1}}return!0}},5083(e,t,n){var r=n(1882),s=n(7296),o=n(3805),i=n(7473),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(r(e)?d:a).test(i(e))}},6038(e,t,n){var r=n(5861),s=n(346);e.exports=function(e){return s(e)&&"[object Set]"==r(e)}},4901(e,t,n){var r=n(2552),s=n(294),o=n(346),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!i[r(e)]}},5389(e,t,n){var r=n(3663),s=n(7978),o=n(3488),i=n(6449),a=n(583);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?s(e[0],e[1]):r(e):a(e)}},8984(e,t,n){var r=n(5527),s=n(3650),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return s(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2903(e,t,n){var r=n(3805),s=n(5527),o=n(181),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=s(e),n=[];for(var a in e)("constructor"!=a||!t&&i.call(e,a))&&n.push(a);return n}},3663(e,t,n){var r=n(1799),s=n(776),o=n(7197);e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},7978(e,t,n){var r=n(270),s=n(8156),o=n(631),i=n(8586),a=n(756),c=n(7197),l=n(7797);e.exports=function(e,t){return i(e)&&a(t)?c(l(e),t):function(n){var i=s(n,e);return void 0===i&&i===t?o(n,e):r(t,i,3)}}},6001(e,t,n){var r=n(7420),s=n(631);e.exports=function(e,t){return r(e,t,function(t,n){return s(e,n)})}},7420(e,t,n){var r=n(7422),s=n(3170),o=n(1769);e.exports=function(e,t,n){for(var i=-1,a=t.length,c={};++i<a;){var l=t[i],u=r(e,l);n(u,l)&&s(c,o(l,e),u)}return c}},7237(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7255(e,t,n){var r=n(7422);e.exports=function(e){return function(t){return r(t,e)}}},3170(e,t,n){var r=n(6547),s=n(1769),o=n(361),i=n(3805),a=n(7797);e.exports=function(e,t,n,c){if(!i(e))return e;for(var l=-1,u=(t=s(t,e)).length,p=u-1,d=e;null!=d&&++l<u;){var f=a(t[l]),h=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(l!=p){var v=d[f];void 0===(h=c?c(v,f,d):void 0)&&(h=i(v)?v:o(t[l+1])?[]:{})}r(d,f,h),d=d[f]}return e}},9570(e,t,n){var r=n(7334),s=n(3243),o=n(3488),i=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},5160(e){e.exports=function(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(s);++r<s;)o[r]=e[r+t];return o}},8096(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},7556(e,t,n){var r=n(1873),s=n(4932),o=n(6449),i=n(4394),a=r?r.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return s(t,e)+"";if(i(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},4128(e,t,n){var r=n(1800),s=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e}},7301(e){e.exports=function(e){return function(t){return e(t)}}},9219(e){e.exports=function(e,t){return e.has(t)}},1769(e,t,n){var r=n(6449),s=n(8586),o=n(1802),i=n(3222);e.exports=function(e,t){return r(e)?e:s(e,t)?[e]:o(i(e))}},9653(e,t,n){var r=n(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},3290(e,t,n){e=n.nmd(e);var r=n(9325),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,i=o&&o.exports===s?r.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},6169(e,t,n){var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3201(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},3736(e,t,n){var r=n(1873),s=r?r.prototype:void 0,o=s?s.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},1961(e,t,n){var r=n(9653);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},3007(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},1791(e,t,n){var r=n(6547),s=n(3360);e.exports=function(e,t,n,o){var i=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var l=t[a],u=o?o(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),i?s(n,l,u):r(n,l,u)}return n}},2271(e,t,n){var r=n(1791),s=n(4664);e.exports=function(e,t){return r(e,s(e),t)}},8948(e,t,n){var r=n(1791),s=n(6375);e.exports=function(e,t){return r(e,s(e),t)}},5481(e,t,n){var r=n(9325)["__core-js_shared__"];e.exports=r},8329(e,t,n){var r=n(4894);e.exports=function(e,t){return function(n,s){if(null==n)return n;if(!r(n))return e(n,s);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==s(a[i],i,a););return n}}},3221(e){e.exports=function(e){return function(t,n,r){for(var s=-1,o=Object(t),i=r(t),a=i.length;a--;){var c=i[e?a:++s];if(!1===n(o[c],c,o))break}return t}}},2006(e,t,n){var r=n(5389),s=n(4894),o=n(5950);e.exports=function(e){return function(t,n,i){var a=Object(t);if(!s(t)){var c=r(n,3);t=o(t),n=function(e){return c(a[e],e,a)}}var l=e(t,n,i);return l>-1?a[c?t[l]:l]:void 0}}},3243(e,t,n){var r=n(6110),s=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=s},5911(e,t,n){var r=n(8859),s=n(4248),o=n(9219);e.exports=function(e,t,n,i,a,c){var l=1&n,u=e.length,p=t.length;if(u!=p&&!(l&&p>u))return!1;var d=c.get(e),f=c.get(t);if(d&&f)return d==t&&f==e;var h=-1,v=!0,y=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++h<u;){var g=e[h],m=t[h];if(i)var b=l?i(m,g,h,t,e,c):i(g,m,h,e,t,c);if(void 0!==b){if(b)continue;v=!1;break}if(y){if(!s(t,function(e,t){if(!o(y,t)&&(g===e||a(g,e,n,i,c)))return y.push(t)})){v=!1;break}}else if(g!==m&&!a(g,m,n,i,c)){v=!1;break}}return c.delete(e),c.delete(t),v}},1986(e,t,n){var r=n(1873),s=n(7828),o=n(5288),i=n(5911),a=n(317),c=n(4247),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,p,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var h=1&r;if(f||(f=c),e.size!=t.size&&!h)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var y=i(f(e),f(t),r,l,p,d);return d.delete(e),y;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},689(e,t,n){var r=n(2),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,i,a){var c=1&n,l=r(e),u=l.length;if(u!=r(t).length&&!c)return!1;for(var p=u;p--;){var d=l[p];if(!(c?d in t:s.call(t,d)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var v=!0;a.set(e,t),a.set(t,e);for(var y=c;++p<u;){var g=e[d=l[p]],m=t[d];if(o)var b=c?o(m,g,d,t,e,a):o(g,m,d,e,t,a);if(!(void 0===b?g===m||i(g,m,n,o,a):b)){v=!1;break}y||(y="constructor"==d)}if(v&&!y){var x=e.constructor,_=t.constructor;x==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(v=!1)}return a.delete(e),a.delete(t),v}},8816(e,t,n){var r=n(5970),s=n(6757),o=n(2865);e.exports=function(e){return o(s(e,void 0,r),e+"")}},4840(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},2(e,t,n){var r=n(2199),s=n(4664),o=n(5950);e.exports=function(e){return r(e,o,s)}},3349(e,t,n){var r=n(2199),s=n(6375),o=n(7241);e.exports=function(e){return r(e,o,s)}},2651(e,t,n){var r=n(4218);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},776(e,t,n){var r=n(756),s=n(5950);e.exports=function(e){for(var t=s(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},6110(e,t,n){var r=n(5083),s=n(392);e.exports=function(e,t){var n=s(e,t);return r(n)?n:void 0}},8879(e,t,n){var r=n(4335)(Object.getPrototypeOf,Object);e.exports=r},659(e,t,n){var r=n(1873),s=Object.prototype,o=s.hasOwnProperty,i=s.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var s=i.call(e);return r&&(t?e[a]=n:delete e[a]),s}},4664(e,t,n){var r=n(9770),s=n(3345),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(e){return null==e?[]:(e=Object(e),r(i(e),function(t){return o.call(e,t)}))}:s;e.exports=a},6375(e,t,n){var r=n(4528),s=n(8879),o=n(4664),i=n(3345),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=s(e);return t}:i;e.exports=a},5861(e,t,n){var r=n(5580),s=n(604),o=n(2804),i=n(6545),a=n(8303),c=n(2552),l=n(7473),u="[object Map]",p="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",v=l(r),y=l(s),g=l(o),m=l(i),b=l(a),x=c;(r&&x(new r(new ArrayBuffer(1)))!=h||s&&x(new s)!=u||o&&x(o.resolve())!=p||i&&x(new i)!=d||a&&x(new a)!=f)&&(x=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return h;case y:return u;case g:return p;case m:return d;case b:return f}return t}),e.exports=x},392(e){e.exports=function(e,t){return null==e?void 0:e[t]}},9326(e,t,n){var r=n(1769),s=n(2428),o=n(6449),i=n(361),a=n(294),c=n(7797);e.exports=function(e,t,n){for(var l=-1,u=(t=r(t,e)).length,p=!1;++l<u;){var d=c(t[l]);if(!(p=null!=e&&n(e,d)))break;e=e[d]}return p||++l!=u?p:!!(u=null==e?0:e.length)&&a(u)&&i(d,u)&&(o(e)||s(e))}},2032(e,t,n){var r=n(1042);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},3862(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6721(e,t,n){var r=n(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0}},2749(e,t,n){var r=n(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:s.call(t,e)}},5749(e,t,n){var r=n(1042);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6189(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},7199(e,t,n){var r=n(9653),s=n(6169),o=n(3201),i=n(3736),a=n(1961);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return s(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Symbol]":return i(e)}}},5529(e,t,n){var r=n(9344),s=n(8879),o=n(5527);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(s(e))}},5891(e,t,n){var r=n(1873),s=n(2428),o=n(6449),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||s(e)||!!(i&&e&&e[i])}},361(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},6800(e,t,n){var r=n(5288),s=n(4894),o=n(361),i=n(3805);e.exports=function(e,t,n){if(!i(n))return!1;var a=typeof t;return!!("number"==a?s(n)&&o(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},8586(e,t,n){var r=n(6449),s=n(4394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!s(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}},4218(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7296(e,t,n){var r,s=n(5481),o=(r=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5527(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},756(e,t,n){var r=n(3805);e.exports=function(e){return e==e&&!r(e)}},3702(e){e.exports=function(){this.__data__=[],this.size=0}},80(e,t,n){var r=n(6025),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():s.call(t,n,1),--this.size,0))}},4739(e,t,n){var r=n(6025);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},8655(e,t,n){var r=n(6025);e.exports=function(e){return r(this.__data__,e)>-1}},1175(e,t,n){var r=n(6025);e.exports=function(e,t){var n=this.__data__,s=r(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}},3040(e,t,n){var r=n(1549),s=n(79),o=n(604);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||s),string:new r}}},7670(e,t,n){var r=n(2651);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},289(e,t,n){var r=n(2651);e.exports=function(e){return r(this,e).get(e)}},4509(e,t,n){var r=n(2651);e.exports=function(e){return r(this,e).has(e)}},2949(e,t,n){var r=n(2651);e.exports=function(e,t){var n=r(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}},317(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},7197(e){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},2224(e,t,n){var r=n(104);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},1042(e,t,n){var r=n(6110)(Object,"create");e.exports=r},3650(e,t,n){var r=n(4335)(Object.keys,Object);e.exports=r},181(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},6009(e,t,n){e=n.nmd(e);var r=n(4840),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,i=o&&o.exports===s&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a},9350(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4335(e){e.exports=function(e,t){return function(n){return e(t(n))}}},6757(e,t,n){var r=n(1033),s=Math.max;e.exports=function(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,a=s(o.length-t,0),c=Array(a);++i<a;)c[i]=o[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=o[i];return l[t]=n(c),r(e,this,l)}}},9325(e,t,n){var r=n(4840),s="object"==typeof self&&self&&self.Object===Object&&self,o=r||s||Function("return this")();e.exports=o},1380(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1459(e){e.exports=function(e){return this.__data__.has(e)}},4247(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},2865(e,t,n){var r=n(9570),s=n(1811)(r);e.exports=s},1811(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var s=t(),o=16-(s-r);if(r=s,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},1420(e,t,n){var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},938(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},3605(e){e.exports=function(e){return this.__data__.get(e)}},9817(e){e.exports=function(e){return this.__data__.has(e)}},945(e,t,n){var r=n(79),s=n(604),o=n(3661);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!s||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(e,t),this.size=n.size,this}},1802(e,t,n){var r=n(2224),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,function(e,n,r,s){t.push(r?s.replace(o,"$1"):n||e)}),t});e.exports=i},7797(e,t,n){var r=n(4394);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7473(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},1800(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},1013(e,t,n){var r=n(5160),s=n(6800),o=n(1489),i=Math.ceil,a=Math.max;e.exports=function(e,t,n){t=(n?s(e,t,n):void 0===t)?1:a(o(t),0);var c=null==e?0:e.length;if(!c||t<1)return[];for(var l=0,u=0,p=Array(i(c/t));l<c;)p[u++]=r(e,l,l+=t);return p}},8055(e,t,n){var r=n(9999);e.exports=function(e){return r(e,5)}},7334(e){e.exports=function(e){return function(){return e}}},5288(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},7612(e,t,n){var r=n(9770),s=n(6574),o=n(5389),i=n(6449);e.exports=function(e,t){return(i(e)?r:s)(e,o(t,3))}},7309(e,t,n){var r=n(2006)(n(4713));e.exports=r},4713(e,t,n){var r=n(2523),s=n(5389),o=n(1489),i=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var c=null==n?0:o(n);return c<0&&(c=i(a+c,0)),r(e,s(t,3),c)}},5970(e,t,n){var r=n(3120);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},8156(e,t,n){var r=n(7422);e.exports=function(e,t,n){var s=null==e?void 0:r(e,t);return void 0===s?n:s}},631(e,t,n){var r=n(8077),s=n(9326);e.exports=function(e,t){return null!=e&&s(e,t,r)}},3488(e){e.exports=function(e){return e}},2428(e,t,n){var r=n(7534),s=n(346),o=Object.prototype,i=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return s(e)&&i.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},6449(e){var t=Array.isArray;e.exports=t},4894(e,t,n){var r=n(1882),s=n(294);e.exports=function(e){return null!=e&&s(e.length)&&!r(e)}},3656(e,t,n){e=n.nmd(e);var r=n(9325),s=n(9935),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||s;e.exports=c},1882(e,t,n){var r=n(2552),s=n(3805);e.exports=function(e){if(!s(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},294(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7730(e,t,n){var r=n(9172),s=n(7301),o=n(6009),i=o&&o.isMap,a=i?s(i):r;e.exports=a},3805(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346(e){e.exports=function(e){return null!=e&&"object"==typeof e}},1331(e,t,n){var r=n(2552),s=n(8879),o=n(346),i=Function.prototype,a=Object.prototype,c=i.toString,l=a.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=s(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},8440(e,t,n){var r=n(6038),s=n(7301),o=n(6009),i=o&&o.isSet,a=i?s(i):r;e.exports=a},4394(e,t,n){var r=n(2552),s=n(346);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==r(e)}},7167(e,t,n){var r=n(4901),s=n(7301),o=n(6009),i=o&&o.isTypedArray,a=i?s(i):r;e.exports=a},5950(e,t,n){var r=n(695),s=n(8984),o=n(4894);e.exports=function(e){return o(e)?r(e):s(e)}},7241(e,t,n){var r=n(695),s=n(2903),o=n(4894);e.exports=function(e){return o(e)?r(e,!0):s(e)}},1505(e,t,n){var r=n(9999),s=n(3663);e.exports=function(e){return s(r(e,1))}},104(e,t,n){var r=n(3661);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var i=e.apply(this,r);return n.cache=o.set(s,i)||o,i};return n.cache=new(s.Cache||r),n}s.Cache=r,e.exports=s},4383(e,t,n){var r=n(6001),s=n(8816)(function(e,t){return null==e?{}:r(e,t)});e.exports=s},583(e,t,n){var r=n(7237),s=n(7255),o=n(8586),i=n(7797);e.exports=function(e){return o(e)?r(i(e)):s(e)}},3345(e){e.exports=function(){return[]}},9935(e){e.exports=function(){return!1}},7400(e,t,n){var r=n(9374),s=1/0;e.exports=function(e){return e?(e=r(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},1489(e,t,n){var r=n(7400);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},9374(e,t,n){var r=n(4128),s=n(3805),o=n(4394),i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):i.test(e)?NaN:+e}},3222(e,t,n){var r=n(7556);e.exports=function(e){return null==e?"":r(e)}},6585(e){var t=1e3,n=60*t,r=60*n,s=24*r,o=7*s;function i(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=s?i(c,l,s,"day"):l>=r?i(c,l,r,"hour"):l>=n?i(c,l,n,"minute"):l>=t?i(c,l,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=s?Math.round(e/s)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2960(e,t,n){"use strict";n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:()=>a,applyMiddleware:()=>h,bindActionCreators:()=>d,combineReducers:()=>u,compose:()=>f,createStore:()=>c,legacy_createStore:()=>l});var r=n(9379);function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"==typeof Symbol&&Symbol.observable||"@@observable",i=function(){return Math.random().toString(36).substring(7).split("").join(".")},a={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function c(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(c)(e,t)}if("function"!=typeof e)throw new Error(s(2));var i=e,l=t,u=[],p=u,d=!1;function f(){p===u&&(p=u.slice())}function h(){if(d)throw new Error(s(3));return l}function v(e){if("function"!=typeof e)throw new Error(s(4));if(d)throw new Error(s(5));var t=!0;return f(),p.push(e),function(){if(t){if(d)throw new Error(s(6));t=!1,f();var n=p.indexOf(e);p.splice(n,1),u=null}}}function y(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if(d)throw new Error(s(9));try{d=!0,l=i(l,e)}finally{d=!1}for(var t=u=p,n=0;n<t.length;n++)(0,t[n])();return e}return y({type:a.INIT}),(r={dispatch:y,subscribe:v,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error(s(10));i=e,y({type:a.REPLACE})}})[o]=function(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[o]=function(){return this},e},r}var l=c;function u(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];"function"==typeof e[o]&&(n[o]=e[o])}var i,c=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:a.INIT}))throw new Error(s(12));if(void 0===n(void 0,{type:a.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))})}(n)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var r=!1,o={},a=0;a<c.length;a++){var l=c[a],u=n[l],p=e[l],d=u(p,t);if(void 0===d)throw t&&t.type,new Error(s(14));o[l]=d,r=r||d!==p}return(r=r||c.length!==Object.keys(e).length)?o:e}}function p(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return p(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=p(o,t))}return n}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),o=function(){throw new Error(s(15))},i={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=t.map(function(e){return e(i)});return o=f.apply(void 0,a)(n.dispatch),(0,r.A)((0,r.A)({},n),{},{dispatch:o})}}}},6178(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diffAny=t.diffObjects=t.diffArrays=t.intersection=t.subtract=t.isDestructive=void 0;var r=n(2417);function s(e,t){var n={};for(var s in e)r.hasOwnProperty.call(e,s)&&void 0!==e[s]&&(n[s]=1);for(var o in t)r.hasOwnProperty.call(t,o)&&void 0!==t[o]&&delete n[o];return Object.keys(n)}function o(e){for(var t=e.length,n={},s=0;s<t;s++){var o=e[s];for(var i in o)r.hasOwnProperty.call(o,i)&&void 0!==o[i]&&(n[i]=(n[i]||0)+1)}for(var i in n)n[i]<t&&delete n[i];return Object.keys(n)}function i(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function a(e,t,n,r){void 0===r&&(r=l);var s={"0,0":{operations:[],cost:0}},o=isNaN(e.length)||e.length<=0?0:e.length,a=isNaN(t.length)||t.length<=0?0:t.length;return function o(a,c){var l="".concat(a,",").concat(c),u=s[l];if(void 0===u){if(a>0&&c>0&&!r(e[a-1],t[c-1],n.add(String(a-1))).length)u=o(a-1,c-1);else{var p=[];if(a>0){var d=o(a-1,c),f={op:"remove",index:a-1};p.push(i(d,f))}if(c>0){var h=o(a,c-1),v={op:"add",index:a-1,value:t[c-1]};p.push(i(h,v))}if(a>0&&c>0){var y=o(a-1,c-1),g={op:"replace",index:a-1,original:e[a-1],value:t[c-1]};p.push(i(y,g))}u=p.sort(function(e,t){return e.cost-t.cost})[0]}s[l]=u}return u}(o,a).operations.reduce(function(e,t){var s=e[0],i=e[1];if(function(e){return"add"===e.op}(t)){var a=t.index+1+i,c=a<o+i?String(a):"-",l={op:t.op,path:n.add(c).toString(),value:t.value};return[s.concat(l),i+1]}if(function(e){return"remove"===e.op}(t))return l={op:t.op,path:n.add(String(t.index+i)).toString()},[s.concat(l),i-1];var u=n.add(String(t.index+i)),p=r(t.original,t.value,u);return[s.concat.apply(s,p),i]},[[],0])[0]}function c(e,t,n,r){void 0===r&&(r=l);var i=[];return s(e,t).forEach(function(e){i.push({op:"remove",path:n.add(e).toString()})}),s(t,e).forEach(function(e){i.push({op:"add",path:n.add(e).toString(),value:t[e]})}),o([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}function l(e,t,n,s){if(void 0===s&&(s=l),e===t)return[];var o=(0,r.objectType)(e),i=(0,r.objectType)(t);return"array"==o&&"array"==i?a(e,t,n,s):"object"==o&&"object"==i?c(e,t,n,s):[{op:"replace",path:n.toString(),value:t}]}t.isDestructive=function(e){var t=e.op;return"remove"===t||"replace"===t||"copy"===t||"move"===t},t.subtract=s,t.intersection=o,t.diffArrays=a,t.diffObjects=c,t.diffAny=l},1337(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTests=t.createPatch=t.applyPatch=t.Pointer=void 0;var r=n(9704);Object.defineProperty(t,"Pointer",{enumerable:!0,get:function(){return r.Pointer}});var s=n(7855),o=n(6178);function i(e,t){var n=r.Pointer.fromJSON(t).evaluate(e);if(void 0!==n)return{op:"test",path:t,value:n.value}}t.applyPatch=function(e,t){return t.map(function(t){return(0,s.apply)(e,t)})},t.createPatch=function(e,t,n){var s=new r.Pointer;return(n?function(e){return function t(n,r,s){var i=e(n,r,s);return Array.isArray(i)?i:(0,o.diffAny)(n,r,s,t)}}(n):o.diffAny)(e,t,s)},t.createTests=function(e,t){var n=new Array;return t.filter(o.isDestructive).forEach(function(t){var r=i(e,t.path);if(r&&n.push(r),"from"in t){var s=i(e,t.from);s&&n.push(s)}}),n}},7855(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.InvalidOperationError=t.test=t.copy=t.move=t.replace=t.remove=t.add=t.TestError=t.MissingError=void 0;var o=n(9704),i=n(2417),a=n(6178),c=function(e){function t(t){var n=e.call(this,"Value required at path: ".concat(t))||this;return n.path=t,n.name="MissingError",n}return s(t,e),t}(Error);t.MissingError=c;var l=function(e){function t(t,n){var r=e.call(this,"Test failed: ".concat(t," != ").concat(n))||this;return r.actual=t,r.expected=n,r.name="TestError",r}return s(t,e),t}(Error);function u(e,t,n){if(Array.isArray(e))if("-"==t)e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function p(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function d(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.parent?new c(t.path):(u(n.parent,n.key,(0,i.clone)(t.value)),null)}function f(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===n.value?new c(t.path):(p(n.parent,n.key),null)}function h(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);if(null===n.parent)return new c(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new c(t.path)}else if(void 0===n.value)return new c(t.path);return n.parent[n.key]=(0,i.clone)(t.value),null}function v(e,t){var n=o.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new c(t.from);var r=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new c(t.path):(p(n.parent,n.key),u(r.parent,r.key,n.value),null)}function y(e,t){var n=o.Pointer.fromJSON(t.from).evaluate(e);if(void 0===n.value)return new c(t.from);var r=o.Pointer.fromJSON(t.path).evaluate(e);return void 0===r.parent?new c(t.path):(u(r.parent,r.key,(0,i.clone)(n.value)),null)}function g(e,t){var n=o.Pointer.fromJSON(t.path).evaluate(e);return(0,a.diffAny)(n.value,t.value,new o.Pointer).length?new l(n.value,t.value):null}t.TestError=l,t.add=d,t.remove=f,t.replace=h,t.move=v,t.copy=y,t.test=g;var m=function(e){function t(t){var n=e.call(this,"Invalid operation: ".concat(t.op))||this;return n.operation=t,n.name="InvalidOperationError",n}return s(t,e),t}(Error);t.InvalidOperationError=m,t.apply=function(e,t){switch(t.op){case"add":return d(e,t);case"remove":return f(e,t);case"replace":return h(e,t);case"move":return v(e,t);case"copy":return y(e,t);case"test":return g(e,t)}return new m(t)}},9704(e,t){"use strict";function n(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function r(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=t.escapeToken=t.unescapeToken=void 0,t.unescapeToken=n,t.escapeToken=r;var s=function(){function e(e){void 0===e&&(e=[""]),this.tokens=e}return e.fromJSON=function(t){var r=t.split("/").map(n);if(""!==r[0])throw new Error("Invalid JSON Pointer: ".concat(t));return new e(r)},e.prototype.toString=function(){return this.tokens.map(r).join("/")},e.prototype.evaluate=function(e){for(var t=null,n="",r=e,s=1,o=this.tokens.length;s<o;s++)t=r,"__proto__"!=(n=this.tokens[s])&&"constructor"!=n&&"prototype"!=n&&(r=(t||{})[n]);return{parent:t,key:n,value:r}},e.prototype.get=function(e){return this.evaluate(e).value},e.prototype.set=function(e,t){var n=this.evaluate(e);n.parent&&(n.parent[n.key]=t)},e.prototype.push=function(e){this.tokens.push(e)},e.prototype.add=function(t){return new e(this.tokens.concat(String(t)))},e}();t.Pointer=s},2417(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.objectType=t.hasOwnProperty=void 0,t.hasOwnProperty=Object.prototype.hasOwnProperty,t.objectType=function(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":typeof e},t.clone=function e(n){if(null==(r=n)||"object"!=typeof r)return n;var r;if(n.constructor==Array){for(var s=n.length,o=new Array(s),i=0;i<s;i++)o[i]=e(n[i]);return o}if(n.constructor==Date)return new Date(+n);var a={};for(var c in n)t.hasOwnProperty.call(n,c)&&(a[c]=e(n[c]));return a}},2791(e,t,n){!function(e){"use strict";if(!e.setImmediate){var t,n,r,s,o,i=1,a={},c=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?t=function(e){process.nextTick(function(){d(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),t=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){d(e.data)},t=function(e){r.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,t=function(e){var t=l.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):t=function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var s={callback:e,args:n};return a[i]=s,t(i),i++},u.clearImmediate=p}function p(e){delete a[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=a[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)},7627(e,t,n){"use strict";function r(e,t){const{duplicates:n,circular:r}=o(e),s=[...n],i=new Map(s.map(e=>[e,null])),a=!1!==t?.deduplicateInstances;return JSON.stringify(e,(e,t)=>{if("object"==typeof t&&null!==t&&!Array.isArray(t)){const e=i.get(t),n=r.has(t);if("number"==typeof e&&n)return{_instanceReference:e};if(a&&"number"==typeof e)return{_instanceReference:e};const o={...t};if(null===e){const e=s.indexOf(t);i.set(t,e),o._instanceReferenceId=e}else a||"number"!=typeof e||(o._instanceReference=e);return t.constructor&&t.constructor!==Object&&t.constructor!==Array&&(o._constructorName=t.constructor.name),o}if(Number.isNaN(t))return"Wacksonan";if(Object.is(t,-0))return"Wacksonegativezero";switch(t){case 1/0:return"Wacksonfinity";case-1/0:return"Wacksonegativinfinity";case void 0:return"Wacksondefined";default:return t}},t?.space)}function s(e,t){const n=JSON.parse(e,(e,t)=>{switch(t){case"Wacksonfinity":return 1/0;case"Wacksonegativinfinity":return-1/0;case"Wacksondefined":return;case"Wacksonan":return NaN;case"Wacksonegativezero":return-0;default:return t}}),r=new Map;return o(n,e=>{if(null!=e._instanceReferenceId){const t=e._instanceReferenceId;delete e._instanceReferenceId,r.set(t,e)}if(t&&e._constructorName){const n=t[e._constructorName];if(!n)throw new Error(`Constructor ${e._constructorName} is not in registry`);Object.setPrototypeOf(e,n.prototype),delete e._constructorName}}),o(n,(e,t,n)=>{if(null!=e?._instanceReference){const s=r.get(e._instanceReference);if(!s)throw new Error(`Unknown _instanceReference: ${e._instanceReference}`);t[n]=s}}),n}function o(e,t,n=new WeakSet,r=null,s=null,i=new Set,a=new Set,c=new WeakSet){if("object"!=typeof e||null===e)return{duplicates:i,circular:a};if(n.has(e))return i.add(e),void(c.has(e)&&a.add(e));if(n.add(e),c.add(e),t?.(e,r,s),Array.isArray(e))for(let r=0;r<e.length;r++)o(e[r],t,n,e,r,i,a,c);else for(const r of Object.keys(e))o(e[r],t,n,e,r,i,a,c);return c.delete(e),{duplicates:i,circular:a}}n.r(t),n.d(t,{deserialize:()=>s,serialize:()=>r})},4110(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasCORS=void 0;let n=!1;try{n="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}t.hasCORS=n},8661(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},1015(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),o=e.indexOf("]");-1!=s&&-1!=o&&(e=e.substring(0,s)+e.substring(s,o).replace(/:/g,";")+e.substring(o,e.length));let i=n.exec(e||""),a={},c=14;for(;c--;)a[r[c]]=i[c]||"";return-1!=s&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,a.query),a};const n=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]},4624(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBinaryType=t.globalThisShim=t.nextTick=void 0,t.createCookieJar=function(){},t.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),t.globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),t.defaultBinaryType="arraybuffer"},4956(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebTransport=t.WebSocket=t.NodeWebSocket=t.XHR=t.NodeXHR=t.Fetch=t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.SocketWithUpgrade=t.SocketWithoutUpgrade=t.Socket=void 0;const r=n(8223);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return r.Socket}});var s=n(8223);Object.defineProperty(t,"SocketWithoutUpgrade",{enumerable:!0,get:function(){return s.SocketWithoutUpgrade}}),Object.defineProperty(t,"SocketWithUpgrade",{enumerable:!0,get:function(){return s.SocketWithUpgrade}}),t.protocol=r.Socket.protocol;var o=n(4689);Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return o.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return o.TransportError}});var i=n(9419);Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return i.transports}});var a=n(5374);Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return a.installTimerFunctions}});var c=n(1015);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return c.parse}});var l=n(4624);Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return l.nextTick}});var u=n(8209);Object.defineProperty(t,"Fetch",{enumerable:!0,get:function(){return u.Fetch}});var p=n(2071);Object.defineProperty(t,"NodeXHR",{enumerable:!0,get:function(){return p.XHR}});var d=n(2071);Object.defineProperty(t,"XHR",{enumerable:!0,get:function(){return d.XHR}});var f=n(8716);Object.defineProperty(t,"NodeWebSocket",{enumerable:!0,get:function(){return f.WS}});var h=n(8716);Object.defineProperty(t,"WebSocket",{enumerable:!0,get:function(){return h.WS}});var v=n(4480);Object.defineProperty(t,"WebTransport",{enumerable:!0,get:function(){return v.WT}})},8223(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.SocketWithUpgrade=t.SocketWithoutUpgrade=void 0;const s=n(9419),o=n(5374),i=n(8661),a=n(1015),c=n(4454),l=n(6376),u=n(4624),p=(0,r(n(7833)).default)("engine.io-client:socket"),d="function"==typeof addEventListener&&"function"==typeof removeEventListener,f=[];d&&addEventListener("offline",()=>{p("closing %d connection(s) because the network was lost",f.length),f.forEach(e=>e())},!1);class h extends c.Emitter{constructor(e,t){if(super(),this.binaryType=u.defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=(0,a.parse)(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=(0,a.parse)(t.host).host);(0,o.installTimerFunctions)(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=(0,i.decode)(this.opts.query)),d&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(p("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},f.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=(0,u.createCookieJar)()),this._open()}createTransport(e){p('creating transport "%s"',e);const t=Object.assign({},this.opts.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return p("options: %j",n),new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){p("setting transport %s",e.name),this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){p("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(p('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else p('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();p("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=(0,o.byteLength)(n)),t>0&&e>this._maxPayload)return p("only send %d out of %d packets",t,this.writeBuffer.length),this.writeBuffer.slice(0,t);e+=2}return p("payload size is %d (max: %d)",e,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(p("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,(0,u.nextTick)(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),p("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(p("socket error %j",e),h.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return p("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(p('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),d&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=f.indexOf(this._offlineEventListener);-1!==e&&(p("removing listener for the 'offline' event"),f.splice(e,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}t.SocketWithoutUpgrade=h,h.protocol=l.protocol;class v extends h{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade){p("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){p('probing transport "%s"',e);let t=this.createTransport(e),n=!1;h.priorWebsocketSuccess=!1;const r=()=>{n||(p('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",r=>{if(!n)if("pong"===r.type&&"probe"===r.data){if(p('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;h.priorWebsocketSuccess="websocket"===t.name,p('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||"closed"!==this.readyState&&(p("changing transport and sending upgrade packet"),l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{p('probe transport "%s" failed',e);const n=new Error("probe error");n.transport=t.name,this.emitReserved("upgradeError",n)}}))};function s(){n||(n=!0,l(),t.close(),t=null)}const o=n=>{const r=new Error("probe error: "+n);r.transport=t.name,s(),p('probe transport "%s" failed because of error: %s',e,n),this.emitReserved("upgradeError",r)};function i(){o("transport closed")}function a(){o("socket closed")}function c(e){t&&e.name!==t.name&&(p('"%s" works - aborting "%s"',e.name,t.name),s())}const l=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",i),this.off("close",a),this.off("upgrading",c)};t.once("open",r),t.once("error",o),t.once("close",i),this.once("close",a),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}t.SocketWithUpgrade=v,t.Socket=class extends v{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(e=>s.transports[e]).filter(e=>!!e)),super(e,n)}}},4689(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=t.TransportError=void 0;const s=n(6376),o=n(4454),i=n(5374),a=n(8661),c=(0,r(n(7833)).default)("engine.io-client:transport");class l extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}t.TransportError=l;class u extends o.Emitter{constructor(e){super(),this.writable=!1,(0,i.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new l(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):c("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=(0,s.decodePacket)(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&443!==Number(this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=(0,a.encode)(e);return t.length?"?"+t:""}}t.Transport=u},9419(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transports=void 0;const r=n(2071),s=n(8716),o=n(4480);t.transports={websocket:s.WS,webtransport:o.WT,polling:r.XHR}},8209(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fetch=void 0;const r=n(528);class s extends r.Polling{doPoll(){this._fetch().then(e=>{if(!e.ok)return this.onError("fetch read error",e.status,e);e.text().then(e=>this.onData(e))}).catch(e=>{this.onError("fetch read error",e)})}doWrite(e,t){this._fetch(e).then(e=>{if(!e.ok)return this.onError("fetch write error",e.status,e);t()}).catch(e=>{this.onError("fetch write error",e)})}_fetch(e){var t;const n=void 0!==e,r=new Headers(this.opts.extraHeaders);return n&&r.set("content-type","text/plain;charset=UTF-8"),null===(t=this.socket._cookieJar)||void 0===t||t.appendCookies(r),fetch(this.uri(),{method:n?"POST":"GET",body:n?e:null,headers:r,credentials:this.opts.withCredentials?"include":"omit"}).then(e=>{var t;return null===(t=this.socket._cookieJar)||void 0===t||t.parseCookies(e.headers.getSetCookie()),e})}}t.Fetch=s},2071(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.XHR=t.Request=t.BaseXHR=void 0;const s=n(528),o=n(4454),i=n(5374),a=n(4624),c=n(4110),l=(0,r(n(7833)).default)("engine.io-client:polling");function u(){}class p extends s.Polling{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){l("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}t.BaseXHR=p;class d extends o.Emitter{constructor(e,t,n){super(),this.createRequest=e,(0,i.installTimerFunctions)(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=(0,i.pick)(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{l("xhr open %s: %s",this._method,this._uri),n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof n.status?n.status:0)},0))},l("xhr data %s",this._data),n.send(this._data)}catch(e){return void this.setTimeoutFn(()=>{this._onError(e)},0)}"undefined"!=typeof document&&(this._index=d.requestsCount++,d.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=u,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(t.Request=d,d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",f);else if("function"==typeof addEventListener){const e="onpagehide"in a.globalThisShim?"pagehide":"unload";addEventListener(e,f,!1)}function f(){for(let e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}const h=function(){const e=v({xdomain:!1});return e&&null!==e.responseType}();function v(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||c.hasCORS))return new XMLHttpRequest}catch(e){}if(!t)try{return new(a.globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}t.XHR=class extends p{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=h&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new d(v,this.uri(),e)}}},528(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Polling=void 0;const s=n(4689),o=n(5374),i=n(6376),a=(0,r(n(7833)).default)("engine.io-client:polling");class c extends s.Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{a("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){a("pre-pause polling complete"),--e||t()})),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",function(){a("pre-pause writing complete"),--e||t()}))}else t()}_poll(){a("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){a("polling got data %s",e),(0,i.decodePayload)(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this._poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,i.encodePayload)(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.randomString)()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}t.Polling=c},8716(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WS=t.BaseWS=void 0;const s=n(4689),o=n(5374),i=n(6376),a=n(4624),c=(0,r(n(7833)).default)("engine.io-client:websocket"),l="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class u extends s.Transport{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=l?{}:(0,o.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;(0,i.encodePacket)(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(e){c("websocket closed before onclose event")}r&&(0,a.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.randomString)()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}t.BaseWS=u;const p=a.globalThisShim.WebSocket||a.globalThisShim.MozWebSocket;t.WS=class extends u{createSocket(e,t,n){return l?new p(e,t,n):t?new p(e,t):new p(e)}doWrite(e,t){this.ws.send(t)}}},4480(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WT=void 0;const s=n(4689),o=n(4624),i=n(6376),a=(0,r(n(7833)).default)("engine.io-client:webtransport");class c extends s.Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{a("transport closed gracefully"),this.onClose()}).catch(e=>{a("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=(0,i.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=(0,i.createPacketEncoderStream)();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const s=()=>{n.read().then(({done:e,value:t})=>{e?a("session is closed"):(a("received chunk: %o",t),this.onPacket(t),s())}).catch(e=>{a("an error occurred while reading: %s",e)})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&(0,o.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}t.WT=c},5374(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pick=function(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})},t.installTimerFunctions=function(e,t){t.useNativeTimers?(e.setTimeoutFn=s.bind(r.globalThisShim),e.clearTimeoutFn=o.bind(r.globalThisShim)):(e.setTimeoutFn=r.globalThisShim.setTimeout.bind(r.globalThisShim),e.clearTimeoutFn=r.globalThisShim.clearTimeout.bind(r.globalThisShim))},t.byteLength=function(e){return"string"==typeof e?function(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))},t.randomString=function(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)};const r=n(4624),s=r.globalThisShim.setTimeout,o=r.globalThisShim.clearTimeout},2046(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_PACKET=t.PACKET_TYPES_REVERSE=t.PACKET_TYPES=void 0;const n=Object.create(null);t.PACKET_TYPES=n,n.open="0",n.close="1",n.ping="2",n.pong="3",n.message="4",n.upgrade="5",n.noop="6";const r=Object.create(null);t.PACKET_TYPES_REVERSE=r,Object.keys(n).forEach(e=>{r[n[e]]=e}),t.ERROR_PACKET={type:"error",data:"parser error"}},2745(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)r[n.charCodeAt(e)]=e;t.encode=e=>{let t,r=new Uint8Array(e),s=r.length,o="";for(t=0;t<s;t+=3)o+=n[r[t]>>2],o+=n[(3&r[t])<<4|r[t+1]>>4],o+=n[(15&r[t+1])<<2|r[t+2]>>6],o+=n[63&r[t+2]];return s%3==2?o=o.substring(0,o.length-1)+"=":s%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=e=>{let t,n,s,o,i,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const u=new ArrayBuffer(a),p=new Uint8Array(u);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],s=r[e.charCodeAt(t+1)],o=r[e.charCodeAt(t+2)],i=r[e.charCodeAt(t+3)],p[l++]=n<<2|s>>4,p[l++]=(15&s)<<4|o>>2,p[l++]=(3&o)<<6|63&i;return u}},2662(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePacket=void 0;const r=n(2046),s=n(2745),o="function"==typeof ArrayBuffer;t.decodePacket=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:i(e.substring(1),t)}:r.PACKET_TYPES_REVERSE[n]?e.length>1?{type:r.PACKET_TYPES_REVERSE[n],data:e.substring(1)}:{type:r.PACKET_TYPES_REVERSE[n]}:r.ERROR_PACKET};const i=(e,t)=>{if(o){const n=(0,s.decode)(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer},2686(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodePacket=void 0,t.encodePacketToBinary=function(e,t){return s&&e.data instanceof Blob?e.data.arrayBuffer().then(l).then(t):o&&(e.data instanceof ArrayBuffer||i(e.data))?t(l(e.data)):void a(e,!1,e=>{u||(u=new TextEncoder),t(u.encode(e))})};const r=n(2046),s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,i=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,a=({type:e,data:t},n,a)=>s&&t instanceof Blob?n?a(t):c(t,a):o&&(t instanceof ArrayBuffer||i(t))?n?a(t):c(new Blob([t]),a):a(r.PACKET_TYPES[e]+(t||""));t.encodePacket=a;const c=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function l(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let u},6376(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=void 0,t.createPacketEncoderStream=function(){return new TransformStream({transform(e,t){(0,r.encodePacketToBinary)(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})},t.createPacketDecoderStream=function(e,t){a||(a=new TextDecoder);const n=[];let r=0,i=-1,u=!1;return new TransformStream({transform(p,d){for(n.push(p);;){if(0===r){if(c(n)<1)break;const e=l(n,1);u=!(128&~e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(c(n)<2)break;const e=l(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(c(n)<8)break;const e=l(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){d.enqueue(o.ERROR_PACKET);break}i=s*Math.pow(2,32)+t.getUint32(4),r=3}else{if(c(n)<i)break;const e=l(n,i);d.enqueue((0,s.decodePacket)(u?e:a.decode(e),t)),r=0}if(0===i||i>e){d.enqueue(o.ERROR_PACKET);break}}}})};const r=n(2686);Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return r.encodePacket}});const s=n(2662);Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return s.decodePacket}});const o=n(2046),i=String.fromCharCode(30);let a;function c(e){return e.reduce((e,t)=>e+t.length,0)}function l(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}t.encodePayload=(e,t)=>{const n=e.length,s=new Array(n);let o=0;e.forEach((e,a)=>{(0,r.encodePacket)(e,!1,e=>{s[a]=e,++o===n&&t(s.join(i))})})},t.decodePayload=(e,t)=>{const n=e.split(i),r=[];for(let e=0;e<n.length;e++){const o=(0,s.decodePacket)(n[e],t);if(r.push(o),"error"===o.type)break}return r},t.protocol=4},7035(e,t){"use strict";const{parse:n,stringify:r}=JSON,{keys:s}=Object,o=String,i="string",a={},c="object",l=(e,t)=>t,u=e=>e instanceof o?o(e):e,p=(e,t)=>typeof t===i?new o(t):t,d=(e,t,n,r)=>{const i=[];for(let l=s(n),{length:u}=l,p=0;p<u;p++){const s=l[p],u=n[s];if(u instanceof o){const o=e[u];typeof o!==c||t.has(o)?n[s]=r.call(n,s,o):(t.add(o),n[s]=a,i.push({k:s,a:[e,t,o,r]}))}else n[s]!==a&&(n[s]=r.call(n,s,u))}for(let{length:e}=i,t=0;t<e;t++){const{k:e,a:s}=i[t];n[e]=r.call(n,e,d.apply(null,s))}return n},f=(e,t,n)=>{const r=o(t.push(n)-1);return e.set(n,r),r},h=(e,t)=>{const r=n(e,p).map(u),s=r[0],o=t||l,i=typeof s===c&&s?d(r,new Set,s,o):s;return o.call({"":i},"",i)};t.parse=h;const v=(e,t,n)=>{const s=t&&typeof t===c?(e,n)=>""===e||-1<t.indexOf(e)?n:void 0:t||l,o=new Map,a=[],u=[];let p=+f(o,a,s.call({"":e},"",e)),d=!p;for(;p<a.length;)d=!0,u[p]=r(a[p++],h,n);return"["+u.join(",")+"]";function h(e,t){if(d)return d=!d,t;const n=s.call(this,e,t);switch(typeof n){case c:if(null===n)return n;case i:return o.get(n)||f(o,a,n)}return n}};t.stringify=v,t.toJSON=e=>n(v(e)),t.fromJSON=e=>h(r(e))},5042(e){e.exports={nanoid:(e=21)=>{let t="",n=0|e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(n=t)=>{let r="",s=0|n;for(;s--;)r+=e[Math.random()*e.length|0];return r}}},7743(e,t){"use strict";function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Backoff=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},8007(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebTransport=t.WebSocket=t.NodeWebSocket=t.XHR=t.NodeXHR=t.Fetch=t.Socket=t.Manager=t.protocol=void 0,t.io=l,t.connect=l,t.default=l;const s=n(6894),o=n(3776);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return o.Manager}});const i=n(6214);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i.Socket}});const a=(0,r(n(7833)).default)("socket.io-client"),c={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=(0,s.url)(e,t.path||"/socket.io"),r=n.source,i=n.id,l=n.path,u=c[i]&&l in c[i].nsps;let p;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(a("ignoring socket cache for %s",r),p=new o.Manager(r,t)):(c[i]||(a("new io instance for %s",r),c[i]=new o.Manager(r,t)),p=c[i]),n.query&&!t.query&&(t.query=n.queryKey),p.socket(n.path,t)}Object.assign(l,{Manager:o.Manager,Socket:i.Socket,io:l,connect:l});var u=n(4627);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return u.protocol}});var p=n(4956);Object.defineProperty(t,"Fetch",{enumerable:!0,get:function(){return p.Fetch}}),Object.defineProperty(t,"NodeXHR",{enumerable:!0,get:function(){return p.NodeXHR}}),Object.defineProperty(t,"XHR",{enumerable:!0,get:function(){return p.XHR}}),Object.defineProperty(t,"NodeWebSocket",{enumerable:!0,get:function(){return p.NodeWebSocket}}),Object.defineProperty(t,"WebSocket",{enumerable:!0,get:function(){return p.WebSocket}}),Object.defineProperty(t,"WebTransport",{enumerable:!0,get:function(){return p.WebTransport}}),e.exports=l},3776(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const a=n(4956),c=n(6214),l=o(n(4627)),u=n(5942),p=n(7743),d=n(4454),f=(0,i(n(7833)).default)("socket.io-client:manager");class h extends d.Emitter{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,(0,a.installTimerFunctions)(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new p.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||l;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=(0,u.on)(t,"open",function(){n.onopen(),e&&e()}),s=t=>{f("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=(0,u.on)(t,"error",s);if(!1!==this._timeout){const e=this._timeout;f("connect attempt will timeout after %d",e);const n=this.setTimeoutFn(()=>{f("connect attempt timed out after %d",e),r(),s(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push((0,u.on)(e,"ping",this.onping.bind(this)),(0,u.on)(e,"data",this.ondata.bind(this)),(0,u.on)(e,"error",this.onerror.bind(this)),(0,u.on)(e,"close",this.onclose.bind(this)),(0,u.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){(0,a.nextTick)(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){f("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new c.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return void f("socket %s is still active, skipping close",e);this._close()}_packet(e){f("writing packet %j",e);const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){f("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;f("closed due to %s",e),this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(f("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(f("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=h},5942(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}}},6214(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const s=n(4627),o=n(5942),i=n(4454),a=(0,r(n(7833)).default)("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class l extends i.Emitter{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[(0,o.on)(e,"open",this.onopen.bind(this)),(0,o.on)(e,"packet",this.onpacket.bind(this)),(0,o.on)(e,"error",this.onerror.bind(this)),(0,o.on)(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(c.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:s.PacketType.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++;a("emitting packet with ack id %d",e);const n=t.pop();this._registerAckCallback(e,n),i.id=e}const l=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,u=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!l?a("discard packet as the transport is not currently writable"):u?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(a("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));a("event with ack id %d has timed out after %d ms",e,r),t.call(this,new Error("operation has timed out"))},r),o=(...e)=>{this.io.clearTimeoutFn(s),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,r)=>{const s=(e,t)=>e?r(e):n(t);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>n!==this._queue[0]?a("packet [%d] already acknowledged",n.id):(null!==e?n.tryCount>this._opts.retries&&(a("packet [%d] is discarded after %d tries",n.id,n.tryCount),this._queue.shift(),t&&t(e)):(a("packet [%d] was successfully sent",n.id),this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(a("draining queue"),!this.connected||0===this._queue.length)return;const t=this._queue[0];!t.pending||e?(t.pending=!0,t.tryCount++,a("sending packet [%d] (try n°%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)):a("packet [%d] has already been sent and is waiting for an ack",t.id)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:s.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){a("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case s.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case s.PacketType.EVENT:case s.PacketType.BINARY_EVENT:this.onevent(e);break;case s.PacketType.ACK:case s.PacketType.BINARY_ACK:this.onack(e);break;case s.PacketType.DISCONNECT:this.ondisconnect();break;case s.PacketType.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];a("emitting event %j",t),null!=e.id&&(a("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,a("sending ack %j",r),t.packet({type:s.PacketType.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(delete this.acks[e.id],a("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)):a("bad ack %s",e.id)}onconnect(e,t){a("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:s.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}t.Socket=l},6894(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.url=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),o("parse %s",e),r=(0,s.parse)(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r};const s=n(4956),o=(0,r(n(7833)).default)("socket.io-client:url")},4926(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deconstructPacket=function(e){const t=[],n=e.data,r=e;return r.data=s(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),delete e.attachments,e};const r=n(9133);function s(e,t){if(!e)return e;if((0,r.isBinary)(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=s(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=s(e[r],t));return n}return e}function o(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=o(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=o(e[n],t));return e}},4627(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0,t.isPacketValid=function(e){return"string"==typeof e.nsp&&(void 0===(t=e.id)||p(t))&&function(e,t){switch(e){case c.CONNECT:return void 0===t||d(t);case c.DISCONNECT:return void 0===t;case c.EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===a.indexOf(t[0]));case c.ACK:return Array.isArray(t);case c.CONNECT_ERROR:return"string"==typeof t||d(t);default:return!1}}(e.type,e.data);var t};const r=n(4454),s=n(4926),o=n(9133),i=(0,n(7833).default)("socket.io-parser"),a=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var c;t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(c||(t.PacketType=c={})),t.Encoder=class{constructor(e){this.replacer=e}encode(e){return i("encoding packet %j",e),e.type!==c.EVENT&&e.type!==c.ACK||!(0,o.hasBinary)(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===c.EVENT?c.BINARY_EVENT:c.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==c.BINARY_EVENT&&e.type!==c.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),i("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=(0,s.deconstructPacket)(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}};class l extends r.Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===c.BINARY_EVENT;n||t.type===c.BINARY_ACK?(t.type=n?c.EVENT:c.ACK,this.reconstructor=new u(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!(0,o.isBinary)(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===c[n.type])throw new Error("unknown packet type "+n.type);if(n.type===c.BINARY_EVENT||n.type===c.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(r,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!l.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return i("decoded %s as %j",e,n),n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case c.CONNECT:return d(t);case c.DISCONNECT:return void 0===t;case c.CONNECT_ERROR:return"string"==typeof t||d(t);case c.EVENT:case c.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===a.indexOf(t[0]));case c.ACK:case c.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=l;class u{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=(0,s.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const p=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function d(e){return"[object Object]"===Object.prototype.toString.call(e)}},9133(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBinary=i,t.hasBinary=function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if(i(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1};const n="function"==typeof ArrayBuffer,r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function i(e){return n&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||s&&e instanceof Blob||o&&e instanceof File}},4467(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(9922);function s(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9379(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(4467);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},2327(e,t,n){"use strict";n.d(t,{A:()=>s});var r=n(2284);function s(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=(0,r.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},9922(e,t,n){"use strict";n.d(t,{A:()=>o});var r=n(2284),s=n(2327);function o(e){var t=(0,s.A)(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},2284(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},4454(e,t,n){"use strict";function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}n.r(t),n.d(t,{Emitter:()=>r}),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<r.length;s++)if((n=r[s])===t||n.fn===t){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var s=(n=n.slice(0)).length;r<s;++r)n[r].apply(this,t)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},2016(e,t,n){"use strict";n.r(t),n.d(t,{Expression:()=>j,Parser:()=>Le,default:()=>qe});var r="INUMBER",s="IOP1",o="IOP2",i="IOP3",a="IVAR",c="IVARNAME",l="IFUNCALL",u="IFUNDEF",p="IEXPR",d="IEXPREVAL",f="IMEMBER",h="IENDSTATEMENT",v="IARRAY";function y(e,t){this.type=e,this.value=null!=t?t:0}function g(e){return new y(s,e)}function m(e){return new y(o,e)}function b(e){return new y(i,e)}function x(e,t,n,l,u){for(var d,h,g,m,b=[],_=[],w=0;w<e.length;w++){var P=e[w],O=P.type;if(O===r||O===c)Array.isArray(P.value)?b.push.apply(b,x(P.value.map(function(e){return new y(r,e)}).concat(new y(v,P.value.length)),t,n,l,u)):b.push(P);else if(O===a&&u.hasOwnProperty(P.value))P=new y(r,u[P.value]),b.push(P);else if(O===o&&b.length>1)h=b.pop(),d=b.pop(),m=n[P.value],P=new y(r,m(d.value,h.value)),b.push(P);else if(O===i&&b.length>2)g=b.pop(),h=b.pop(),d=b.pop(),"?"===P.value?b.push(d.value?h.value:g.value):(m=l[P.value],P=new y(r,m(d.value,h.value,g.value)),b.push(P));else if(O===s&&b.length>0)d=b.pop(),m=t[P.value],P=new y(r,m(d.value)),b.push(P);else if(O===p){for(;b.length>0;)_.push(b.shift());_.push(new y(p,x(P.value,t,n,l,u)))}else if(O===f&&b.length>0)d=b.pop(),b.push(new y(r,d.value[P.value]));else{for(;b.length>0;)_.push(b.shift());_.push(P)}}for(;b.length>0;)_.push(b.shift());return _}function _(e,t,n){for(var r=[],c=0;c<e.length;c++){var l=e[c],u=l.type;if(u===a&&l.value===t)for(var d=0;d<n.tokens.length;d++){var f,h=n.tokens[d];f=h.type===s?g(h.value):h.type===o?m(h.value):h.type===i?b(h.value):new y(h.type,h.value),r.push(f)}else u===p?r.push(new y(p,_(l.value,t,n))):r.push(l)}return r}function w(e,t,n){var y,g,m,b,x,_,M=[];if(O(e))return k(e,n);for(var E=e.length,$=0;$<E;$++){var A=e[$],j=A.type;if(j===r||j===c)M.push(A.value);else if(j===o)g=M.pop(),y=M.pop(),"and"===A.value?M.push(!!y&&!!w(g,t,n)):"or"===A.value?M.push(!!y||!!w(g,t,n)):"="===A.value?(b=t.binaryOps[A.value],M.push(b(y,w(g,t,n),n))):(b=t.binaryOps[A.value],M.push(b(k(y,n),k(g,n))));else if(j===i)m=M.pop(),g=M.pop(),y=M.pop(),"?"===A.value?M.push(w(y?g:m,t,n)):(b=t.ternaryOps[A.value],M.push(b(k(y,n),k(g,n),k(m,n))));else if(j===a)if(A.value in t.functions)M.push(t.functions[A.value]);else if(A.value in t.unaryOps&&t.parser.isOperatorEnabled(A.value))M.push(t.unaryOps[A.value]);else{var S=n[A.value];if(void 0===S)throw new Error("undefined variable: "+A.value);M.push(S)}else if(j===s)y=M.pop(),b=t.unaryOps[A.value],M.push(b(k(y,n)));else if(j===l){for(_=A.value,x=[];_-- >0;)x.unshift(k(M.pop(),n));if(!(b=M.pop()).apply||!b.call)throw new Error(b+" is not a function");M.push(b.apply(void 0,x))}else if(j===u)M.push(function(){for(var e=M.pop(),r=[],s=A.value;s-- >0;)r.unshift(M.pop());var o=M.pop(),i=function(){for(var s=Object.assign({},n),o=0,i=r.length;o<i;o++)s[r[o]]=arguments[o];return w(e,t,s)};return Object.defineProperty(i,"name",{value:o,writable:!1}),n[o]=i,i}());else if(j===p)M.push(P(A,t));else if(j===d)M.push(A);else if(j===f)y=M.pop(),M.push(y[A.value]);else if(j===h)M.pop();else{if(j!==v)throw new Error("invalid Expression");for(_=A.value,x=[];_-- >0;)x.unshift(M.pop());M.push(x)}}if(M.length>1)throw new Error("invalid Expression (parity)");return 0===M[0]?0:k(M[0],n)}function P(e,t,n){return O(e)?e:{type:d,value:function(n){return w(e.value,t,n)}}}function O(e){return e&&e.type===d}function k(e,t){return O(e)?e.value(t):e}function M(e,t){for(var n,d,y,g,m,b,x=[],_=0;_<e.length;_++){var w=e[_],P=w.type;if(P===r)"number"==typeof w.value&&w.value<0?x.push("("+w.value+")"):Array.isArray(w.value)?x.push("["+w.value.map(E).join(", ")+"]"):x.push(E(w.value));else if(P===o)d=x.pop(),n=x.pop(),g=w.value,t?"^"===g?x.push("Math.pow("+n+", "+d+")"):"and"===g?x.push("(!!"+n+" && !!"+d+")"):"or"===g?x.push("(!!"+n+" || !!"+d+")"):"||"===g?x.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+d+")))"):"=="===g?x.push("("+n+" === "+d+")"):"!="===g?x.push("("+n+" !== "+d+")"):"["===g?x.push(n+"[("+d+") | 0]"):x.push("("+n+" "+g+" "+d+")"):"["===g?x.push(n+"["+d+"]"):x.push("("+n+" "+g+" "+d+")");else if(P===i){if(y=x.pop(),d=x.pop(),n=x.pop(),"?"!==(g=w.value))throw new Error("invalid Expression");x.push("("+n+" ? "+d+" : "+y+")")}else if(P===a||P===c)x.push(w.value);else if(P===s)n=x.pop(),"-"===(g=w.value)||"+"===g?x.push("("+g+n+")"):t?"not"===g?x.push("(!"+n+")"):"!"===g?x.push("fac("+n+")"):x.push(g+"("+n+")"):"!"===g?x.push("("+n+"!)"):x.push("("+g+" "+n+")");else if(P===l){for(b=w.value,m=[];b-- >0;)m.unshift(x.pop());g=x.pop(),x.push(g+"("+m.join(", ")+")")}else if(P===u){for(d=x.pop(),b=w.value,m=[];b-- >0;)m.unshift(x.pop());n=x.pop(),t?x.push("("+n+" = function("+m.join(", ")+") { return "+d+" })"):x.push("("+n+"("+m.join(", ")+") = "+d+")")}else if(P===f)n=x.pop(),x.push(n+"."+w.value);else if(P===v){for(b=w.value,m=[];b-- >0;)m.unshift(x.pop());x.push("["+m.join(", ")+"]")}else if(P===p)x.push("("+M(w.value,t)+")");else if(P!==h)throw new Error("invalid Expression")}return x.length>1&&(x=t?[x.join(",")]:[x.join(";")]),String(x[0])}function E(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function $(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function A(e,t,n){for(var r=!!(n=n||{}).withMembers,s=null,o=0;o<e.length;o++){var i=e[o];i.type===a||i.type===c?r||$(t,i.value)?null!==s?($(t,s)||t.push(s),s=i.value):s=i.value:t.push(i.value):i.type===f&&r&&null!==s?s+="."+i.value:i.type===p?A(i.value,t,n):null!==s&&($(t,s)||t.push(s),s=null)}null===s||$(t,s)||t.push(s)}function j(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}y.prototype.toString=function(){switch(this.type){case r:case s:case o:case i:case a:case c:case h:return this.value;case l:return"CALL "+this.value;case u:return"DEF "+this.value;case v:return"ARRAY "+this.value;case f:return"."+this.value;default:return"Invalid Instruction"}},j.prototype.simplify=function(e){return e=e||{},new j(x(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},j.prototype.substitute=function(e,t){return t instanceof j||(t=this.parser.parse(String(t))),new j(_(this.tokens,e,t),this.parser)},j.prototype.evaluate=function(e){return e=e||{},w(this.tokens,this,e)},j.prototype.toString=function(){return M(this.tokens,!1)},j.prototype.symbols=function(e){e=e||{};var t=[];return A(this.tokens,t,e),t},j.prototype.variables=function(e){e=e||{};var t=[];A(this.tokens,t,e);var n=this.functions;return t.filter(function(e){return!(e in n)})},j.prototype.toJSFunction=function(e,t){var n=this,r=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+M(this.simplify(t).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var S="TEOF",I="TOP",C="TNUMBER",T="TSTRING",N="TPAREN",D="TBRACKET",R="TCOMMA",B="TNAME",F="TSEMICOLON";function G(e,t,n){this.type=e,this.value=t,this.index=n}function L(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}G.prototype.toString=function(){return this.type+": "+this.value},L.prototype.newToken=function(e,t,n){return new G(e,t,null!=n?n:this.pos)},L.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},L.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},L.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(S,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},L.prototype.isString=function(){var e=!1,t=this.pos,n=this.expression.charAt(t);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,t+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var s=this.expression.substring(t+1,r);this.current=this.newToken(T,this.unescape(s),t),e=!0;break}r=this.expression.indexOf(n,r+1)}return e},L.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(N,e),this.pos++,!0)},L.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("[")||(this.current=this.newToken(D,e),this.pos++,0))},L.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(R,","),this.pos++,!0)},L.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(F,";"),this.pos++,!0)},L.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(r in this.consts)return this.current=this.newToken(C,this.consts[r]),this.pos+=r.length,!0}return!1},L.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(I,r),this.pos+=r.length,!0}return!1},L.prototype.isName=function(){for(var e=this.pos,t=e,n=!1;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()){if(t===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(t===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var s=this.expression.substring(e,t);return this.current=this.newToken(B,s),this.pos+=s.length,!0}return!1},L.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var U=/^[0-9a-f]{4}$/i;function z(e,t,n){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}L.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var n=e.substring(0,t);t>=0;){var r=e.charAt(++t);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var s=e.substring(t+1,t+5);U.test(s)||this.parseError("Illegal escape sequence: \\u"+s),n+=String.fromCharCode(parseInt(s,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++t;var o=e.indexOf("\\",t);n+=e.substring(t,o<0?e.length:o),t=o}return n},L.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},L.prototype.isRadixInteger=function(){var e,t,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))e=16,t=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;e=2,t=/^[01]$/i,++n}for(var r=!1,s=n;n<this.expression.length;){var o=this.expression.charAt(n);if(!t.test(o))break;n++,r=!0}return r&&(this.current=this.newToken(C,parseInt(this.expression.substring(s,n),e)),this.pos=n),r},L.prototype.isNumber=function(){for(var e,t=!1,n=this.pos,r=n,s=n,o=!1,i=!1;n<this.expression.length&&((e=this.expression.charAt(n))>="0"&&e<="9"||!o&&"."===e);)"."===e?o=!0:i=!0,n++,t=i;if(t&&(s=n),"e"===e||"E"===e){n++;for(var a=!0,c=!1;n<this.expression.length;){if(e=this.expression.charAt(n),!a||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;c=!0,a=!1}else a=!1;n++}c||(n=s)}return t?(this.current=this.newToken(C,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=s,t},L.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(I,t);else if("∙"===t||"•"===t)this.current=this.newToken(I,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(I,">="),this.pos++):this.current=this.newToken(I,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(I,"<="),this.pos++):this.current=this.newToken(I,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(I,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(I,"=="),this.pos++):this.current=this.newToken(I,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(I,"!="),this.pos++):this.current=this.newToken(I,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},L.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},L.prototype.getCoordinates=function(){var e,t=0,n=-1;do{t++,e=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:t,column:e}},L.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},z.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},z.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?$(t,e.value):"function"==typeof t?t(e):e.value===t)},z.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},z.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},z.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t)||(this.next(),0))},z.prototype.expect=function(e,t){if(!this.accept(e,t)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(t||e))}},z.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(B)||this.accept(I,function(e){return e.value in t}))e.push(new y(a,this.current.value));else if(this.accept(C))e.push(new y(r,this.current.value));else if(this.accept(T))e.push(new y(r,this.current.value));else if(this.accept(N,"("))this.parseExpression(e),this.expect(N,")");else{if(!this.accept(D,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(D,"]"))e.push(new y(v,0));else{var n=this.parseArrayList(e);e.push(new y(v,n))}}},z.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},z.prototype.pushExpression=function(e,t){for(var n=0,r=t.length;n<r;n++)e.push(t[n])},z.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(F)&&(!this.nextToken||this.nextToken.type===S||this.nextToken.type===N&&")"===this.nextToken.value||t.push(new y(h)),this.nextToken.type!==S&&this.parseExpression(t),e.push(new y(p,t)),!0)},z.prototype.parseArrayList=function(e){for(var t=0;!this.accept(D,"]");)for(this.parseExpression(e),++t;this.accept(R);)this.parseExpression(e),++t;return t},z.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(I,"=");){var t=e.pop(),n=[],r=e.length-1;if(t.type!==l){if(t.type!==a&&t.type!==f)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),e.push(new y(c,t.value)),e.push(new y(p,n)),e.push(m("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var s=0,o=t.value+1;s<o;s++){var i=r-s;e[i].type===a&&(e[i]=new y(c,e[i].value))}this.parseVariableAssignmentExpression(n),e.push(new y(p,n)),e.push(new y(u,t.value))}}},z.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(I,"?");){var t=[],n=[];this.parseConditionalExpression(t),this.expect(I,":"),this.parseConditionalExpression(n),e.push(new y(p,t)),e.push(new y(p,n)),e.push(b("?"))}},z.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(I,"or");){var t=[];this.parseAndExpression(t),e.push(new y(p,t)),e.push(m("or"))}},z.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(I,"and");){var t=[];this.parseComparison(t),e.push(new y(p,t)),e.push(m("and"))}};var q=["==","!=","<","<=",">=",">","in"];z.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(I,q);){var t=this.current;this.parseAddSub(e),e.push(m(t.value))}};var V=["+","-","||"];z.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(I,V);){var t=this.current;this.parseTerm(e),e.push(m(t.value))}};var W=["*","/","%"];function H(e,t){return Number(e)+Number(t)}function J(e,t){return e-t}function K(e,t){return e*t}function Y(e,t){return e/t}function X(e,t){return e%t}function Q(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function Z(e,t){return e===t}function ee(e,t){return e!==t}function te(e,t){return e>t}function ne(e,t){return e<t}function re(e,t){return e>=t}function se(e,t){return e<=t}function oe(e,t){return Boolean(e&&t)}function ie(e,t){return Boolean(e||t)}function ae(e,t){return $(t,e)}function ce(e){return(Math.exp(e)-Math.exp(-e))/2}function le(e){return(Math.exp(e)+Math.exp(-e))/2}function ue(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function pe(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function de(e){return Math.log(e+Math.sqrt(e*e-1))}function fe(e){return Math.log((1+e)/(1-e))/2}function he(e){return Math.log(e)*Math.LOG10E}function ve(e){return-e}function ye(e){return!e}function ge(e){return e<0?Math.ceil(e):Math.floor(e)}function me(e){return Math.random()*(e||1)}function be(e){return _e(e+1)}z.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(I,W);){var t=this.current;this.parseFactor(e),e.push(m(t.value))}},z.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(I,function(e){return e.value in t})){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===N&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===F||this.nextToken.type===R||this.nextToken.type===S||this.nextToken.type===N&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var n=this.current;this.parseFactor(e),e.push(g(n.value))}else this.parseExponential(e)},z.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(I,"^");)this.parseFactor(e),e.push(m("^"))},z.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(I,"!");)e.push(g("!"))},z.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(I,function(e){return e.value in t})){var n=this.current;this.parseAtom(e),e.push(g(n.value))}else for(this.parseMemberExpression(e);this.accept(N,"(");)if(this.accept(N,")"))e.push(new y(l,0));else{var r=this.parseArgumentList(e);e.push(new y(l,r))}},z.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(N,")");)for(this.parseExpression(e),++t;this.accept(R);)this.parseExpression(e),++t;return t},z.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(I,".")||this.accept(D,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(B),e.push(new y(f,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(D,"]"),e.push(m("["))}}};var xe=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function _e(e){var t,n;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var r=e-2,s=e-1;r>1;)s*=r,r--;return 0===s&&(s=1),s}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*_e(1-e));if(e>=171.35)return 1/0;if(e>85){var o=e*e,i=o*e,a=i*e,c=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*o)-139/(51840*i)-571/(2488320*a)+163879/(209018880*c)+5246819/(75246796800*c*e))}--e,n=xe[0];for(var l=1;l<xe.length;++l)n+=xe[l]/(e+l);return t=e+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*n}function we(e){return Array.isArray(e)?e.length:String(e).length}function Pe(){for(var e=0,t=0,n=0;n<arguments.length;n++){var r,s=Math.abs(arguments[n]);t<s?(e=e*(r=t/s)*r+1,t=s):e+=s>0?(r=s/t)*r:s}return t===1/0?1/0:t*Math.sqrt(e)}function Oe(e,t,n){return e?t:n}function ke(e,t){return void 0===t||0===+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function Me(e,t,n){return n&&(n[e]=t),t}function Ee(e,t){return e[0|t]}function $e(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function Ae(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function je(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(t,n){return e(t,n)})}function Se(e,t,n){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce(function(t,n,r){return e(t,n,r)},t)}function Ie(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(t,n){return e(t,n)})}function Ce(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function Te(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Ne(e){return(e>0)-(e<0)||+e}var De=1/3;function Re(e){return e<0?-Math.pow(-e,De):Math.pow(e,De)}function Be(e){return Math.exp(e)-1}function Fe(e){return Math.log(1+e)}function Ge(e){return Math.log(e)/Math.LN2}function Le(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||ce,cosh:Math.cosh||le,tanh:Math.tanh||ue,asinh:Math.asinh||pe,acosh:Math.acosh||de,atanh:Math.atanh||fe,sqrt:Math.sqrt,cbrt:Math.cbrt||Re,log:Math.log,log2:Math.log2||Ge,ln:Math.log,lg:Math.log10||he,log10:Math.log10||he,expm1:Math.expm1||Be,log1p:Math.log1p||Fe,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||ge,"-":ve,"+":Number,exp:Math.exp,not:ye,length:we,"!":be,sign:Math.sign||Ne},this.binaryOps={"+":H,"-":J,"*":K,"/":Y,"%":X,"^":Math.pow,"||":Q,"==":Z,"!=":ee,">":te,"<":ne,">=":re,"<=":se,and:oe,or:ie,in:ae,"=":Me,"[":Ee},this.ternaryOps={"?":Oe},this.functions={random:me,fac:be,min:Ae,max:$e,hypot:Math.hypot||Pe,pyt:Math.hypot||Pe,pow:Math.pow,atan2:Math.atan2,if:Oe,gamma:_e,roundTo:ke,map:je,fold:Se,filter:Ie,indexOf:Ce,join:Te},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Le.prototype.parse=function(e){var t=[],n=new z(this,new L(this,e),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(t),n.expect(S,"EOF"),new j(t,this)},Le.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Ue=new Le;Le.parse=function(e){return Ue.parse(e)},Le.evaluate=function(e,t){return Ue.parse(e).evaluate(t)};var ze={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Le.prototype.isOperatorEnabled=function(e){var t=function(e){return ze.hasOwnProperty(e)?ze[e]:e}(e),n=this.options.operators||{};return!(t in n)||!!n[t]};const qe={Parser:Le,Expression:j}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r={};return(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Client",{enumerable:!0,get:function(){return s.Client}}),Object.defineProperty(e,"gameFactory",{enumerable:!0,get:function(){return o.default}});var t,s=n(4245),o=(t=n(4913))&&t.__esModule?t:{default:t}})(),r})());